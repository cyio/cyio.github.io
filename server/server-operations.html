<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.37">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#0089a7"><meta name="referrer" content="no-referrer"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><title>运维 | Oaker小站</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app.2f4e902b.js"><link rel="modulepreload" href="/assets/server-operations.html.71e0c44b.js"><link rel="modulepreload" href="/assets/server-operations.html.54c9e754.js">
    <link rel="stylesheet" href="/assets/style.5af559d1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Oaker小站</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/concept.html" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/web/html.html" class="" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frameworks/vue.html" class="" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/node/concept.html" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/markdown.html" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/algorithms/index.html" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/solutions/fib.html" class="" aria-label="题解"><!--[--><!--]--> 题解 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cyio" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/concept.html" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/web/html.html" class="" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frameworks/vue.html" class="" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/node/concept.html" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/markdown.html" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/algorithms/index.html" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/solutions/fib.html" class="" aria-label="题解"><!--[--><!--]--> 题解 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cyio" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="运维" tabindex="-1"><a class="header-anchor" href="#运维" aria-hidden="true">#</a> 运维</h1><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> 常用命令</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>
uptime/last/htop <span class="token comment"># 上线时间/最后登入</span>

ll/ls -l <span class="token comment"># 对比查看权限</span>

<span class="token function">chown</span> group:owner <span class="token function">file</span> <span class="token comment"># 修改权限</span>

lsb_release -a <span class="token comment"># 查看系统信息，mac 下是 sw_vers</span>

<span class="token function">uname</span> -a <span class="token comment"># 查看软硬件信息更全面</span>

<span class="token function">df</span> -h <span class="token comment"># 磁盘占用信息</span>

<span class="token function">cat</span> /proc/cpuinfo <span class="token comment"># CPU信息</span>

<span class="token function">free</span> -m <span class="token comment"># 内存信息</span>

<span class="token function">ifconfig</span> <span class="token comment"># 网络信息</span>
<span class="token function">ifconfig</span><span class="token operator">|</span><span class="token function">grep</span> <span class="token number">192</span> <span class="token comment"># 查看本机局域网IP</span>

nmap -sP <span class="token number">192.168</span>.1.1-255

<span class="token comment"># 测网速</span>
<span class="token function">wget</span> -O - https://raw.github.com/sivel/speedtest-cli/master/speedtest.py <span class="token operator">|</span> python

<span class="token function">sudo</span> <span class="token function">passwd</span> <span class="token comment"># root 用户改密码</span>
<span class="token function">sudo</span> <span class="token function">passwd</span> USERNAME <span class="token comment"># 普通用户，如果直接运行 passwd 命令会限制密码长度</span>

<span class="token comment"># 查看端口占用 (list open files)</span>
  <span class="token function">lsof</span> <span class="token punctuation">[</span>-P<span class="token punctuation">]</span> -i <span class="token punctuation">[</span>tcp<span class="token punctuation">]</span>:3000 <span class="token punctuation">[</span><span class="token operator">|</span> <span class="token function">xargs</span> kill<span class="token punctuation">]</span>
  杀掉，3 表示退出，避免残留
  <span class="token function">kill</span> <span class="token punctuation">[</span>-3<span class="token punctuation">]</span> pid

<span class="token function">tail</span> -5 filename <span class="token comment"># 查看最后5行</span>

<span class="token function">find</span> <span class="token punctuation">[</span>path<span class="token punctuation">]</span> -type <span class="token punctuation">[</span>d/f<span class="token punctuation">]</span> -name <span class="token string">&#39;react*&#39;</span> <span class="token punctuation">[</span>-ls<span class="token punctuation">]</span> <span class="token comment"># 以react开头 [文件夹/文件] [显示详细信息]</span>

<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.odex&quot;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">rm</span> -f <span class="token comment"># 删除所有子目录下的特定文件用</span>

<span class="token function">grep</span> -Rli <span class="token string">&quot;500&quot;</span> <span class="token comment"># 打印包含指定字符串的文件名, 参数分别表示，递归，列出文件名，忽略大小写</span>

<span class="token function">grep</span> -rh <span class="token string">&#39;500&#39;</span> --include <span class="token string">&#39;access.log*&#39;</span> <span class="token comment"># 特定文件名包含字符串，递归，不显示文件名</span>

<span class="token function">grep</span> -P <span class="token string">&#39;(\d+\.){3}\d+&#39;</span> -hor --include <span class="token string">&#39;access.log*&#39;</span> <span class="token comment"># 特定文件内容匹配打印出IP地址，-o 只打印匹配部分，否则会打印行其它内容</span>

<span class="token function">zip</span> -r myapp.zip myapp <span class="token comment"># 压缩文件夹</span>

<span class="token function">curl</span> --socks5 localhost:1086 httpbin.org/ip <span class="token comment"># 验证代理是否生效</span>

pbcopy <span class="token operator">&lt;</span> ~/.ssh/id_rsa.pub <span class="token comment"># mac 下快速复制 ssh 公钥</span>

pbpaste <span class="token operator">|</span> base64 <span class="token operator">|</span> pbcopy <span class="token comment"># mac 下将剪贴板中的内容转换为 base64</span>

<span class="token comment"># 下载网站</span>
<span class="token function">wget</span> -r -np -k http://www.ime.usp.br/~coelho/mac0122-2013/ep2/esqueleto/

<span class="token function">users</span> <span class="token comment"># 查看有哪些用户</span>
<span class="token function">id</span> -g -n tom <span class="token comment"># 查看 tom 所在用户组</span>

<span class="token function">ps</span> xf / -ef <span class="token comment"># 查看用户或所有进程，htop 默认会显示所有进程，按 H 只显示用户进程</span>

<span class="token function">ps</span> -ef<span class="token operator">|</span><span class="token function">grep</span> mosh <span class="token comment"># 查找进程</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h2 id="如何将命令转入后台" tabindex="-1"><a class="header-anchor" href="#如何将命令转入后台" aria-hidden="true">#</a> 如何将命令转入后台</h2><ol><li><p>在命令后加一个 &amp; 符号，运行需按 Ctrl - Z 结束命令对当前终端的占用</p></li><li><p>已经运行的命令，直接 Ctrl - Z，然后输入 bg 回车</p><p>保持进程（同时转入后台） nohup node server.js$</p></li></ol><h2 id="linux-下修改用户名" tabindex="-1"><a class="header-anchor" href="#linux-下修改用户名" aria-hidden="true">#</a> Linux 下修改用户名</h2><p><a href="http://askubuntu.com/questions/34074/how-do-i-change-my-username" target="_blank" rel="noopener noreferrer">permissions - How do I change my username? - Ask Ubuntu<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>根据第二个答案操作，注意点：</p><ul><li>如果老用户有占用进程，要杀掉</li><li>原答说操作完就可以新用户登陆了，但我这里登陆界面的用户名并没有变，重启解决</li></ul><p>接着，桌面启动失败，软件正常 此时，切换到 X 下，用<code>startx</code>是可以正常启动桌面 然后，发现 npm 命令的权限不正确，尝试如下命令修复权限</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> -R <span class="token environment constant">$USER</span><span class="token builtin class-name">:</span><span class="token variable">$GROUP</span> ~/.npm
<span class="token function">npm</span> cache clean
<span class="token function">sudo</span> <span class="token function">npm</span> update
</code></pre></div><p>接着，发现 zsh 配置有写包含老用户名的绝对路径，均改为相对 home 路径 到这里，差不多就能正常启动桌面了。</p><h2 id="centos-6-和-7-防火墙不一样" tabindex="-1"><a class="header-anchor" href="#centos-6-和-7-防火墙不一样" aria-hidden="true">#</a> centos 6 和 7 防火墙不一样</h2><p>测试端口是否打开 <code>telnet ip port</code><a href="https://segmentfault.com/a/1190000003931716" target="_blank" rel="noopener noreferrer">不可不知的 centos7 firewalld 防火墙的使用 - 飞翔的大象 - SegmentFault<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="服务器站点目录权限" tabindex="-1"><a class="header-anchor" href="#服务器站点目录权限" aria-hidden="true">#</a> 服务器站点目录权限</h2><p>需求:</p><ul><li>web 访问和写入</li><li>bower 安装权限避免用 root</li><li>自己编辑避免 root</li><li>能普通用户处理，就不用 root</li><li>想想平时自己在本地是怎么处理的，一样，新建用户是必须的 <a href="https://askubuntu.com/questions/46331/how-to-avoid-using-sudo-when-working-in-var-www" target="_blank" rel="noopener noreferrer">webserver - How to avoid using sudo when working in /var/www? - Ask Ubuntu<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> html
<span class="token comment"># 将自己加入 www-data 用户组</span>
<span class="token function">sudo</span> gpasswd -a <span class="token string">&quot;<span class="token environment constant">$USER</span>&quot;</span> www-data
<span class="token function">sudo</span> <span class="token function">chown</span> -R <span class="token string">&quot;<span class="token environment constant">$USER</span>&quot;</span>:www-data /var/www
</code></pre></div><h2 id="迁移检查清单" tabindex="-1"><a class="header-anchor" href="#迁移检查清单" aria-hidden="true">#</a> 迁移检查清单</h2><ul><li>创建新用户，设置公钥登录</li><li>在普通用户下安装环境</li><li>设置 www 权限 <code>sudo chown -R &quot;$USER&quot;:www-data /var/www</code>，如果 webserver 要写入，要把用户也改为<code>www-data</code><ul><li>注意，centos 下没有 www-data，对应的是 apache，<code>chown -R apache:apache uploadfile/</code></li></ul></li><li>克隆项目</li><li>安装前端环境，npm 全局需要的包不多，直接 sudo 装</li></ul><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> -g pm2
</code></pre></div><ul><li>是否有静态资源如图片需要迁移</li><li>是否需要配置临时域名，以便客户测试</li></ul><h2 id="新建用户" tabindex="-1"><a class="header-anchor" href="#新建用户" aria-hidden="true">#</a> 新建用户</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">apt</span> <span class="token function">install</span> <span class="token function">sudo</span>

<span class="token comment"># 无法直接修改</span>
<span class="token function">chmod</span> u+w /etc/sudoers
/etc/sudoers
<span class="token function">chmod</span> u-w /etc/sudoers

<span class="token function">tar</span> -xvzf community_images.tar.gz

$ pm2 save
$ <span class="token function">chown</span> -R <span class="token environment constant">$USER</span><span class="token builtin class-name">:</span><span class="token environment constant">$USER</span> ~/.pm2
$ <span class="token function">pkill</span> -f PM2
$ pm2 resurrect

<span class="token comment"># pm2 能运行带 sudo 权限的进程吗？</span>
<span class="token comment"># 指定用户 -u root</span>
<span class="token comment"># 要求输入密码 sudo -S</span>
<span class="token comment"># 运行 kcp ，无日志输出，不行</span>
<span class="token comment"># use -- to start entering options for the launched app</span>
$ pm2 start <span class="token function">npm</span> -- start
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="npm-权限" tabindex="-1"><a class="header-anchor" href="#npm-权限" aria-hidden="true">#</a> npm 权限</h2><p>直接全局安装 pm2，会要求 sudo 权限 先改 prefix，设置好 dotfiles 后，<code>npm config set prefix &#39;~/.npm-packages&#39;</code></p><h2 id="添加额外-ip" tabindex="-1"><a class="header-anchor" href="#添加额外-ip" aria-hidden="true">#</a> 添加额外 IP</h2><ol><li>查看以太网设备名称 <code>$ ip link show</code>，下而的命令和配置都要用到</li><li>添加配置 <code>$ sudo vim /etc/network/interfaces</code></li></ol><div class="language-bash ext-sh"><pre class="language-bash"><code>auto ens3:0
iface ens3:0 inet static
address <span class="token number">45.77</span>.93.109
netmask <span class="token number">255.255</span>.255.255
</code></pre></div><ol start="3"><li>启用 <code>$ sudo ifup ens3:0</code></li></ol><h2 id="scp-远程拷贝" tabindex="-1"><a class="header-anchor" href="#scp-远程拷贝" aria-hidden="true">#</a> scp 远程拷贝</h2><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token comment"># 注意指定了服务器端口</span>
<span class="token comment"># 有时目录没有写入权限或怕写错位置，可以先复制到 /tmp，再进一步操作</span>
<span class="token function">scp</span> -r -P <span class="token number">29979</span> ./wp-content/uploads xx@xx:/tmp/
</code></pre></div><h2 id="线上编译失败" tabindex="-1"><a class="header-anchor" href="#线上编译失败" aria-hidden="true">#</a> 线上编译失败</h2><p>内存不足，3-4 百兆不一定够，只能 scp 上传 yarn 安装更省内存</p><h2 id="certbot" tabindex="-1"><a class="header-anchor" href="#certbot" aria-hidden="true">#</a> certbot</h2><p>用法有变化</p><ul><li><p>centos <a href="https://gist.github.com/dalegaspi/dec44117fa5e7597a559" target="_blank" rel="noopener noreferrer">Installing Python 2.7 on CentOS 6.5<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>提示版本收集不满足，pip 走的是 aliyun 代理 <code>ping pypi.python.org</code></p><blockquote><p>这个只是阿里云的镜像没同步完整 pypi 仓库而已，你换成清华大学的镜像站就 OK 了，或者删掉 pip.conf 中的 mirror 配置，直接走官方仓库。那个报错是说找不到指定的版本而已</p></blockquote></li><li><p>UFW 影响 renew</p></li></ul><div class="language-text ext-text"><pre class="language-text"><code>sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
</code></pre></div><h2 id="travis-cli" tabindex="-1"><a class="header-anchor" href="#travis-cli" aria-hidden="true">#</a> travis-cli</h2><p>debug 时要依先后顺序挨个点开看排除，跟命令行是一个道理</p><h2 id="sudo-权限运行脚本" tabindex="-1"><a class="header-anchor" href="#sudo-权限运行脚本" aria-hidden="true">#</a> sudo 权限运行脚本</h2><div class="language-text ext-text"><pre class="language-text"><code>sudo crontab -e
</code></pre></div><h2 id="无法登陆时" tabindex="-1"><a class="header-anchor" href="#无法登陆时" aria-hidden="true">#</a> 无法登陆时</h2><ol><li>开启密码登陆 2. 修改端口 找到 passwordAuthentication 项，修改成 yes</li></ol><div class="language-text ext-text"><pre class="language-text"><code>vim /etc/ssh/sshd_config
service sshd restart
</code></pre></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: icaner@qq.com">cyio</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.2f4e902b.js" defer></script>
  </body>
</html>
