import{_ as o,r as p,o as c,c as l,a as n,b as e,F as i,e as t,d as s}from"./app.fe82fd74.js";const r={},u=t(`<h1 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h1><p>[toc]</p><h2 id="\u4F7F\u7528\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u573A\u666F" aria-hidden="true">#</a> \u4F7F\u7528\u573A\u666F</h2><p>\u6388\u6743\u8BA4\u8BC1\uFF1A</p><ul><li>\u57FA\u4E8E cookie\uFF0C\u670D\u52A1\u5668\u9700\u8981\u751F\u6210\u3001\u4FDD\u6301 session\uFF0C\u4FDD\u6301\uFF0C\u6709\u72B6\u6001</li><li>\u57FA\u4E8E token\uFF0C\u7528\u6237\u4FE1\u606F\u7F16\u7801\uFF0C\u65E0\u72B6\u6001</li></ul><h2 id="\u7528\u6765\u6807\u8BB0\u7528\u6237" tabindex="-1"><a class="header-anchor" href="#\u7528\u6765\u6807\u8BB0\u7528\u6237" aria-hidden="true">#</a> \u7528\u6765\u6807\u8BB0\u7528\u6237</h2><p>\u670D\u52A1\u5668<code>set-cookie</code>\u53D1\u7ED9\u5BA2\u6237\u7AEF\uFF0C\u6D4F\u89C8\u5668\u4F1A\u5C06 cookie \u4FDD\u5B58\u4E0B\u6765\uFF0C\u7A0D\u540E\u5BA2\u6237\u7AEF\u53D1\u8BF7\u6C42\u65F6\u53EF\u5E26\u4E0A cookie</p><h2 id="\u5224\u65AD\u662F\u5426\u767B\u5F55" tabindex="-1"><a class="header-anchor" href="#\u5224\u65AD\u662F\u5426\u767B\u5F55" aria-hidden="true">#</a> \u5224\u65AD\u662F\u5426\u767B\u5F55</h2><ul><li>\u4E24\u5C42\uFF0C\u524D\u540E\u7AEF cookie \u6709\u6548\u671F\u53EF\u80FD\u4E0D\u4E00\u81F4</li><li>\u524D\u7AEF cookie \u68C0\u67E5\u4F18\u5148</li></ul><h2 id="\u6709\u6548\u671F" tabindex="-1"><a class="header-anchor" href="#\u6709\u6548\u671F" aria-hidden="true">#</a> \u6709\u6548\u671F</h2><p>\u9ED8\u8BA4 session \u7EA7</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">KEY=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token number">123</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;path=/;domain=.baidu.com</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
</code></pre></div><p>\u9700\u8981\u5728\u76F8\u5E94\u57DF\u540D\u7684\u9875\u9762\u6216\u63A5\u53E3\u4E0B\u624D\u80FD\u8BFB\u53D6\u5230</p><h2 id="\u5C01\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5C01\u88C5" aria-hidden="true">#</a> \u5C01\u88C5</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u83B7\u53D6cookie\u3001</span>
<span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">(^| )</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=([^;]*)(;|$)</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token comment">// \u8BBE\u7F6Ecookie,\u589E\u52A0\u5230vue\u5B9E\u4F8B\u65B9\u4FBF\u5168\u5C40\u8C03\u7528</span>
<span class="token keyword">function</span> <span class="token function">setCookie</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> expireDays</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> expireDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  expireDate<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>expireDate<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> expireDays<span class="token punctuation">)</span>
  <span class="token keyword">const</span> expireDateKeyValue <span class="token operator">=</span>
    expireDays <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&#39;&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;;expires=&#39;</span> <span class="token operator">+</span> expireDate<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> domainKeyValue <span class="token operator">=</span>
    location<span class="token punctuation">.</span>host<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;aijianzi&#39;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&#39;;domain=.google.com&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;&#39;</span>
  <span class="token keyword">const</span> cookieValue <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> expireDateKeyValue <span class="token operator">+</span> domainKeyValue
  document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> name <span class="token operator">+</span> <span class="token string">&#39;=&#39;</span> <span class="token operator">+</span> cookieValue
<span class="token punctuation">}</span>

<span class="token comment">// \u5220\u9664cookie</span>
<span class="token keyword">function</span> <span class="token function">delCookie</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setCookie</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>document.cookie = <code>\${name}=\${escape(value)}\${(expiredays == null) ? &#39;&#39; :</code>;expires=\${exdate.toGMTString()}<code>};path=/;</code>;</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">var</span> c_value <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>exdays <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;; expires=&quot;</span> <span class="token operator">+</span> exdate<span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="\u5B50\u57DF\u540D\u5171\u4EAB" tabindex="-1"><a class="header-anchor" href="#\u5B50\u57DF\u540D\u5171\u4EAB" aria-hidden="true">#</a> \u5B50\u57DF\u540D\u5171\u4EAB</h2>`,18),k=n("li",null,[n("p",null,"\u4E0D\u540C\u4E1A\u52A1\u95F4\u5F71\u54CD")],-1),d=n("li",null,[n("p",null,"key name \u7528\u57DF\u540D\u7A7A\u95F4\u89E3\u51B3\uFF0C\u5982 token34/token35")],-1),h=n("p",null,"\u540C\u540D cookie\uFF0C\u6CDB\u57DF\u540D\u4F1A\u4F18\u5148\u88AB\u8BFB\u53D6\uFF1F",-1),m={href:"https://stackoverflow.com/questions/5671451/creating-a-javascript-cookie-on-a-domain-and-reading-it-across-sub-domains",target:"_blank",rel:"noopener noreferrer"},b=s("Creating a JavaScript cookie on a domain and reading it across sub domains - Stack Overflow"),_=n("h2",{id:"domain",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#domain","aria-hidden":"true"},"#"),s(" domain")],-1),g=n("li",null,[n("p",null,"\u503C\u8981\u6709\u4E24\u4E2A\u70B9")],-1),f=n("p",null,"localhost \u65F6\u8981\u5B8C\u5168\u7701\u7565\u6389",-1),x={href:"https://stackoverflow.com/questions/1134290/cookies-on-localhost-with-explicit-domain",target:"_blank",rel:"noopener noreferrer"},v=s("setcookie - Cookies on localhost with explicit domain - Stack Overflow"),y=n("h2",{id:"\u540C\u6B65",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u540C\u6B65","aria-hidden":"true"},"#"),s(" \u540C\u6B65")],-1),w=n("li",null,[n("p",null,"\u5199\u5165 cookie \u662F\u540C\u6B65\u64CD\u4F5C\uFF0C\u963B\u585E")],-1),j=n("p",null,"\u4E0D\u77E5\u9053\u5199\u5165\u6210\u529F\u8FD8\u662F\u5931\u8D25",-1),E={href:"https://wicg.github.io/cookie-store/#intro-proposed-change",target:"_blank",rel:"noopener noreferrer"},C=s("Cookie Store API"),D=n("h2",{id:"\u5C0F\u7A0B\u5E8F\u4E0D\u652F\u6301-cookie-\u8BBE\u7F6E",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5C0F\u7A0B\u5E8F\u4E0D\u652F\u6301-cookie-\u8BBE\u7F6E","aria-hidden":"true"},"#"),s(" \u5C0F\u7A0B\u5E8F\u4E0D\u652F\u6301 cookie \u8BBE\u7F6E")],-1),S=s("\u610F\u601D\u662F\u5BF9\u63A5\u53D7\u7684\u8BF7\u6C42\uFF0C\u4E0D\u4F1A\u5B58 cookie\uFF0C\u6211\u4EEC\u53EF\u4EE5\u81EA\u5DF1\u5C01\u88C5\u5229\u7528 storage \u5B58\u8D77\u6765\u6A21\u62DF "),V={href:"https://www.waitig.com/%25E5%25BE%25AE%25E4%25BF%25A1%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258Fcookie-session%25E9%2597%25AE%25E9%25A2%2598.html",target:"_blank",rel:"noopener noreferrer"},A=s("\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F cookie-session \u95EE\u9898 | \u7B49\u82F1\u535A\u5BA2"),B=t(`<h2 id="\u57FA\u4E8E-token-\u7684\u8BA4\u8BC1\u65B9\u5F0F\u66F4\u597D" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8E-token-\u7684\u8BA4\u8BC1\u65B9\u5F0F\u66F4\u597D" aria-hidden="true">#</a> \u57FA\u4E8E token \u7684\u8BA4\u8BC1\u65B9\u5F0F\u66F4\u597D</h2><p>cookie \u4E0E token \u65B9\u5F0F\uFF0C\u6839\u672C\u533A\u522B\uFF0C\u5B58\u50A8\u4F4D\u7F6E\uFF0C\u524D\u8005\u9700\u8981\u670D\u52A1\u5668\u5B58 session\u3001\u5BA2\u6237\u7AEF\u5B58 session id\uFF0C\u540E\u8005\u7B97\u6CD5\u751F\u6210 token\uFF0C\u4EC5\u5BA2\u6237\u7AEF\u4FDD\u5B58\uFF08JWT\uFF09</p><p>\u65E0\u72B6\u6001\u3001\u6027\u80FD\u66F4\u597D\uFF08\u5E26\u5BBD\u3001\u670D\u52A1\u5668\u89E3\u5BC6\u5373\u53EF\uFF0C\u4E0D\u5FC5\u5B58 session\uFF09\u3001\u901A\u7528\u6027\uFF08\u5C0F\u7A0B\u5E8F\u3001oAuth\uFF09</p><h2 id="\u7B7E\u540D-\u9A8C\u8BC1\u662F\u5426\u88AB\u4FEE\u6539\u8FC7" tabindex="-1"><a class="header-anchor" href="#\u7B7E\u540D-\u9A8C\u8BC1\u662F\u5426\u88AB\u4FEE\u6539\u8FC7" aria-hidden="true">#</a> \u7B7E\u540D-\u9A8C\u8BC1\u662F\u5426\u88AB\u4FEE\u6539\u8FC7</h2><div class="language-javascript ext-js"><pre class="language-javascript"><code>res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">signed</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>\u7C7B\u4F3C hash\uFF0C\u652F\u6301\u91CD\u65B0\u8BA1\u7B97\u6821\u9A8C</p>`,6),q={href:"https://stackoverflow.com/questions/11897965/what-are-signed-cookies-in-connect-expressjs",target:"_blank",rel:"noopener noreferrer"},$=s('node.js - What are "signed" cookies in connect/expressjs? - Stack Overflow'),N=n("h2",{id:"httponly",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#httponly","aria-hidden":"true"},"#"),s(" httponly")],-1),F=n("h2",{id:"\u53C2\u8003",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u53C2\u8003","aria-hidden":"true"},"#"),s(" \u53C2\u8003")],-1),K={href:"https://blog.csdn.net/hf872914334/article/details/78979007",target:"_blank",rel:"noopener noreferrer"},O=s("Cookie -- \u524D\u7AEF\u89C6\u89D2 - hf872914334 \u7684\u535A\u5BA2 - CSDN \u535A\u5BA2"),T={href:"https://github.com/yinxin630/blog/issues/2",target:"_blank",rel:"noopener noreferrer"},I=s("Cookie \u7684\u8BBE\u7F6E\u3001\u8BFB\u53D6\u4EE5\u53CA\u662F\u5426\u81EA\u52A8\u643A\u5E26\u95EE\u9898 \xB7 Issue #2 \xB7 yinxin630/blog");function J(L,U){const a=p("ExternalLinkIcon");return c(),l(i,null,[u,n("ul",null,[k,d,n("li",null,[h,n("p",null,[n("a",m,[b,e(a)])])])]),_,n("ul",null,[g,n("li",null,[f,n("p",null,[n("a",x,[v,e(a)])])])]),y,n("ul",null,[w,n("li",null,[j,n("p",null,[n("a",E,[C,e(a)])])])]),D,n("p",null,[S,n("a",V,[A,e(a)])]),B,n("p",null,[n("a",q,[$,e(a)])]),N,F,n("p",null,[n("a",K,[O,e(a)]),n("a",T,[I,e(a)])])],64)}var z=o(r,[["render",J],["__file","cookie.html.vue"]]);export{z as default};
