import{r as n,o as s,c as a,a as e,F as p,b as o,d as t}from"./app.09b8f80a.js";const l={},c=e("h1",{id:"mock",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#mock","aria-hidden":"true"},"#"),o(" Mock")],-1),r=e("li",null,"代码容易分解和合成",-1),i=e("li",null,[o("纯函数 "),e("ul",null,[e("li",null,"给定相同输入，总是返回相同输出"),e("li",null,"无副作用")])],-1),u=o("松耦合 "),k={href:"https://medium.com/javascript-scene/mocking-is-a-code-smell-944a70c90a6a",target:"_blank",rel:"noopener noreferrer"},m=o("Mocking is a Code Smell – JavaScript Scene – Medium"),d=t('<h2 id="方案" tabindex="-1"><a class="header-anchor" href="#方案" aria-hidden="true">#</a> 方案</h2><ul><li>json 文件，开发阶段适用 <ol><li>page.js 页面文件</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> MockAdapter <span class="token keyword">from</span> <span class="token string">&#39;axios-mock-adapter&#39;</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 辅助库</span>\n<span class="token comment">// import dayjs from &#39;dayjs&#39;;</span>\n<span class="token comment">// import Mock from &#39;mockjs&#39;;</span>\n\n<span class="token comment">// 配置和数据</span>\n<span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">&#39;@/config&#39;</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> res <span class="token keyword">from</span> <span class="token string">&#39;./exam-intro.json&#39;</span>\n\n<span class="token keyword">const</span> mock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MockAdapter</span><span class="token punctuation">(</span>axios<span class="token punctuation">)</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span> baseUrl <span class="token punctuation">}</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>\n\n<span class="token comment">// 具体规则</span>\nmock<span class="token punctuation">.</span><span class="token function">onGet</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>baseUrl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api/course/getExaminationById?examId=1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reply</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="2"><li>request.js 请求封装文件</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&#39;../mock/exam-intro&#39;</span> <span class="token comment">// eslint-disable-line</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul>',2);l.render=function(o,t){const l=n("OutboundLink");return s(),a(p,null,[c,e("ul",null,[r,i,e("li",null,[u,e("a",k,[m,e(l)])])]),d],64)};export default l;
