(window.webpackJsonp=window.webpackJsonp||[]).push([[348],{788:function(e,t,r){"use strict";r.r(t);var a=r(56),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"性能"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#性能"}},[e._v("#")]),e._v(" 性能")]),e._v(" "),r("p",[e._v("[toc]")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://godbasin.github.io/front-end-playground/front-end-basic/deep-learning/monitor-and-report.html#%25E6%2595%25B0%25E6%258D%25AE%25E6%2594%25B6%25E9%259B%2586",target:"_blank",rel:"noopener noreferrer"}},[e._v("前端监控体系搭建 | 被删的前端游乐场"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"guidelines"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#guidelines"}},[e._v("#")]),e._v(" Guidelines")]),e._v(" "),r("ol",[r("li",[e._v("审计页面")]),e._v(" "),r("li",[e._v("使用报告找出优化点")]),e._v(" "),r("li",[e._v("一次改变一个点")]),e._v(" "),r("li",[e._v("每次改变后审计，观察效果")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.youtube.com/watch?v=5fLW5Q5ODiE",target:"_blank",rel:"noopener noreferrer"}},[e._v("Improving Load Performance - Chrome DevTools 101 - YouTube"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"方法论"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#方法论"}},[e._v("#")]),e._v(" 方法论")]),e._v(" "),r("ul",[r("li",[e._v("请求\n"),r("ul",[r("li",[e._v("并发")]),e._v(" "),r("li",[e._v("延迟 Script defer")]),e._v(" "),r("li",[e._v("预取")]),e._v(" "),r("li",[e._v("head")]),e._v(" "),r("li",[e._v("transfer gzipped")]),e._v(" "),r("li",[e._v("body 压缩")])])]),e._v(" "),r("li",[e._v("请求与渲染结合\n"),r("ul",[r("li",[e._v("非首屏图片懒加载 | 关键 CSS 拆分内联")])])])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://developers.google.com/web/fundamentals/performance/why-performance-matters/?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[e._v("性能为何至关重要  |  Web Fundamentals  |  Google Developers"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.smashingmagazine.com/2019/01/front-end-performance-checklist-2019-pdf-pages/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Front-End Performance Checklist 2019 [PDF, Apple Pages, MS Word] — Smashing Magazine"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://juejin.im/post/5b65105f5188251b134e9778",target:"_blank",rel:"noopener noreferrer"}},[e._v("狙杀页面卡顿 —— Performance 指北 - 掘金"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"后台页面"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#后台页面"}},[e._v("#")]),e._v(" 后台页面")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("使用"),r("code",[e._v("visibilityChange")]),e._v("监听器避免在后台执行不必要的工作，如处理视图变化")])]),e._v(" "),r("li",[r("p",[r("code",[e._v("requestAnimationFrame")]),e._v(" 批量更新，失焦时不会触发\n"),r("a",{attrs:{href:"https://developers.google.com/web/updates/2017/03/background_tabs",target:"_blank",rel:"noopener noreferrer"}},[e._v("Background Tabs in Chrome 57  |  Web  |  Google Developers"),r("OutboundLink")],1)])]),e._v(" "),r("li",[r("p",[e._v("例外，websocket 连接，audio，pinned tabs")])])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Try those flags:\n\nautomatic tab discarding disabled\n\nonly auto-reload visible tabs disabled\n\nthrottle expensive background timers disabled\n")])])]),r("blockquote",[r("p",[e._v("改善下载时间 保持 JavaScript 包的小巧，特别是对于移动设备。小的 js 包可提高下载速度，降低内存使用率并降低 CPU 成本。 避免只有一个大\njs 文件;如果单个 js 文件超过~50-100 kB，则将其拆分为单独的较小的 js 文件。 （通过 HTTP / 2 多路复用，可以同时传输多个请求和\n响应消息，从而减少额外请求的开销。） 在移动设备上，你会希望发送的数据更小，特别是因为网络速度，但也保持低内存使用率。 缩短执行时间\n避免使主线程保持忙碌的长任务，并可以推断出页面交互的时间。下载后，脚本执行时间现在是主要成本。 避免使用大型内联脚本（因为它们仍然在\n主线程上进行了解析和编译）。一个好的经验法则是：如果脚本超过 1 kB，请避免内联（因为 1 kB 也是外部脚本启动时代码缓存的下限）。")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://v8.dev/blog/cost-of-javascript-2019",target:"_blank",rel:"noopener noreferrer"}},[e._v("The cost of JavaScript in 2019 · V8"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://github.com/azl397985856/automate-everything/blob/master/docs/chapter4.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("页面加载性能优化 automate-everything/chapter4.md at master · azl397985856/automate-everything"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"lazy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#lazy"}},[e._v("#")]),e._v(" lazy")]),e._v(" "),r("p",[e._v("chrome 默认规则，按优先级加载，依然是尽快拉取\nchrome 76 支持浏览器原生懒加载，显式指定加载规则\n"),r("code",[e._v("auto")]),e._v(" 默认\n"),r("code",[e._v("lazy")]),e._v(" 进入视口才加载\n"),r("code",[e._v("eager")]),e._v(" 忽略默认规则")]),e._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("img")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("loading")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[r("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("lazy"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("iframe")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("loading")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[r("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("lazy"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("iframe")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),r("h2",{attrs:{id:"第三方方案"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第三方方案"}},[e._v("#")]),e._v(" 第三方方案")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.tingyun.com/tingyun_browser.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("听云Browser・实时了解您网站的真实用户体验"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.tingyun.com/tingyun_network.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("测速 - 听云Network・国内领先的网站性能监测与优化产品"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.gatsbyjs.org/blog/2018-10-16-why-mobile-performance-is-crucial/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Journey to the Content Mesh Part 4: Why Mobile Performance Is Crucial | GatsbyJS"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"modern-构建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#modern-构建"}},[e._v("#")]),e._v(" modern 构建")]),e._v(" "),r("p",[e._v("构建两个版本，modern 降低体积，old 兼顾")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://engineering.universe.com/improving-browser-performance-10x-f9551927dcff",target:"_blank",rel:"noopener noreferrer"}},[e._v("Improving Browser Performance 10x - Universe Engineering"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/GoogleChrome/lighthouse/blob/master/docs/authenticated-pages.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("lighthouse/authenticated-pages.md at master · GoogleChrome/lighthouse"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.cnblogs.com/videring/articles/7603864.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chrome 中的 First Meaningful Paint - 邹天得 - 博客园"),r("OutboundLink")],1),e._v("\n算法：\na. 首次有效绘制 = 具有最大布局变化的绘制\nb. 布局显著性 = 添加的对象数目 / max(1, 页面高度 / 屏幕高度)")]),e._v(" "),r("p",[e._v("用户期待：页面的首屏内容应在1.5秒内加载完成")]),e._v(" "),r("p",[e._v("普通用户期望且能够接受的页面加载时间在 3 秒以内")]),e._v(" "),r("p",[e._v("搜索流量倾斜，3s 红线")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/article/doc/00062cad124c8867cf380f64156c13",target:"_blank",rel:"noopener noreferrer"}},[e._v("前端加载优化及实践 | 微信开放社区"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.itslide.com/slide/244993",target:"_blank",rel:"noopener noreferrer"}},[e._v("杨森 把前端性能监控做到极致 | ITSlide - 专注于PPT幻灯片的分享平台"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://blog.shipengqi.top/2018/10/29/frontend-performance-optimize/",target:"_blank",rel:"noopener noreferrer"}},[e._v("笔记 前端性能优化原理与实践"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("FMP  主要内容用户可见 1220ms 99分 基于真实网站数据")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://webpagetest.org/easy",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebPageTest - Website Performance and Optimization Test"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("可链接提供 Image Analysis Results，可压缩比")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://docs.google.com/spreadsheets/d/1Cxzhy5ecqJCucdf1M0iOzM8mIxNc7mmx107o5nj38Eo/edit#gid=0",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lighthouse v3 Score Weighting [MAKE YOUR OWN COPY] - Google 表格"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("可交互时间、速度指标权重更高，FMP 权重最低，比较容易实现")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://web.dev/lighthouse-performance",target:"_blank",rel:"noopener noreferrer"}},[e._v("Performance audits  |  web.dev"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics#tracking_fmp_using_hero_elements",target:"_blank",rel:"noopener noreferrer"}},[e._v("以用户为中心的性能指标  |  Web Fundamentals  |  Google Developers"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("传统指标或单个指标不可靠，Google 定义新指标")]),e._v(" "),r("p",[e._v("Long Tasks API >50 毫秒")]),e._v(" "),r("p",[e._v("100 毫秒内响应用户输入")]),e._v(" "),r("p",[e._v("发生在后，权重大，对用户更重要")]),e._v(" "),r("p",[e._v("PerformanceObserver 观测实际设备")]),e._v(" "),r("p",[e._v("首屏加载时间定义\n一般 图片\n课件，可操作时间")]),e._v(" "),r("p",[e._v("speedIndex 内容显示速度，综合指标，需要解决一系列问题提升")]),e._v(" "),r("p",[e._v("持续集成、测试关键指标是否合格，低于阈值判定失败")]),e._v(" "),r("p",[e._v("用户关注主要内容的展示和可交互，但浏览器不知道")]),e._v(" "),r("p",[e._v("自定义指标，测量方法\n"),r("a",{attrs:{href:"https://speedcurve.com/blog/user-timing-and-custom-metrics/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SpeedCurve | User Timing and Custom Metrics"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.w3.org/TR/navigation-timing-2/#performanceentry",target:"_blank",rel:"noopener noreferrer"}},[e._v("Navigation Timing Level 2"),r("OutboundLink")],1)]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('<body onload="init()">\n')])])]),r("p",[e._v("这里"),r("code",[e._v("onload")]),e._v("即"),r("code",[e._v("window.onload")]),e._v("，完整 Document 资源加载结束，包括 images, scripts, links and sub-frames")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.infoq.cn/article/pqSFIzu9DFuwmg4e51oM?utm_source=rss&utm_medium=article",target:"_blank",rel:"noopener noreferrer"}},[e._v("让偶现Bug无所遁形：贝壳自研时光机如何解决前端行业痛点？-InfoQ"),r("OutboundLink")],1)]),e._v(" "),r("blockquote",[r("p",[e._v("在衡量 Web 页面性能时，最普遍的做法是通过 YSlow、Lighthouse 等工具对页面进行一次性的诊断分析。诚然这些工具可以检查出诸多页面性能的瓶颈和优化点，但我们依然无法感知并量化用户在访问页面时的具体表现，因为真实场景的页面性能会受到诸多因素的影响，如用户使用的终端类型、服务器响应速度、所在地域 CDN 性能等。")])]),e._v(" "),r("p",[e._v("真实用户访问 --\x3e 提取性能指标 --\x3e 数据清洗加工 --\x3e 性能分析监控（监控平台）")]),e._v(" "),r("p",[e._v("高精度时间，小数点后 12 位\n"),r("code",[e._v("performance.now")]),e._v("单调递增，不受修改系统时间影响")]),e._v(" "),r("p",[e._v("原生 DCL --\x3e FP/FCP --\x3e FMP 算法推导 用户感知")]),e._v(" "),r("p",[e._v("FMP 布局树，布局对象，最大之后的绘制，可见区域 页面高度")]),e._v(" "),r("blockquote",[r("p",[e._v("First meaningful paint = Paint that follows biggest layout change\nBiggest layout change means layout with the largest number of LayoutObjectsThatHadNeverHadLayout. In Figure 1, the biggest layout change is at 1.86s, so the next paint (1.907s) is the first meaningful paint.")])]),e._v(" "),r("h2",{attrs:{id:"ttfb"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ttfb"}},[e._v("#")]),e._v(" TTFB")]),e._v(" "),r("p",[e._v("首字节时间(TTFB)用于测量服务器的响应能力。是从客户端发起 HTTP 请求到客户端浏览器收到资源的第一个字节所经历的时间。由 socket 连接时间、发送 HTTP 请求所需时间、收到页面第一个字节所需时间组成。")]),e._v(" "),r("p",[e._v("Gzip 压缩会导致 TTFB 提升")]),e._v(" "),r("p",[e._v("大多数服务器的 TTFB 时间都在 50 ms 以下")]),e._v(" "),r("p",[e._v("本地过多 cookie ？每次请求会带上，上传受限，可能增加 TTFB")]),e._v(" "),r("p",[e._v("h2 统计到的 TTFB 值会更高，因为 socket 连接更早？")]),e._v(" "),r("p",[e._v("更好解答 "),r("a",{attrs:{href:"https://stackoverflow.com/questions/53699584/is-it-possible-to-do-hls-streaming-over-http-2-and-will-it-be-better-latency-wi/53899295#53899295",target:"_blank",rel:"noopener noreferrer"}},[e._v("Is it possible to do HLS streaming over HTTP/2, and will it be better latency-wise than over HTTP/1.1? - Stack Overflow"),r("OutboundLink")],1),e._v("\nh2 优势在大量并行小请求\n而视频流是串行请求大的数据块，HTTP1.1 + keep alive 就能满足，且更高效，不需要处理 h2 基于 TCP 的流控制架构")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://blog.cloudflare.com/ttfb-time-to-first-byte-considered-meaningles/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Stop worrying about Time To First Byte (TTFB)"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://superuser.com/questions/931389/http-2-has-much-higher-ttfb-than-http-1-1",target:"_blank",rel:"noopener noreferrer"}},[e._v("iis - HTTP/2 has much higher TTFB than HTTP/1.1 - Super User"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://haydenjames.io/nginx-tuning-tips-tls-ssl-https-ttfb-latency/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Nginx tuning tips: TLS/SSL HTTPS - Improved TTFB/latency"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://juejin.im/post/5cb54286e51d456e235d9be6",target:"_blank",rel:"noopener noreferrer"}},[e._v("《HTTP/2 基础教程》 阅读摘要 - 掘金"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/34020557",target:"_blank",rel:"noopener noreferrer"}},[e._v("页面加载与API服务响应--- 性能标定与标准 - 知乎"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("可能是分帧，增加了延迟？\n"),r("a",{attrs:{href:"https://segmentfault.com/a/1190000015030944#item-5-19",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTTP/2 技术调研和性能分析 - 个人文章 - SegmentFault 思否"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"_4x-cpu"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4x-cpu"}},[e._v("#")]),e._v(" 4x cpu")]),e._v(" "),r("p",[e._v("仅影响主线程，产生额外线程频繁打断主线程\nsimulated 与 Applied 区别，不实际节流，推测值")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://stackoverflow.com/questions/50848341/what-does-4x-slower-cpu-throttle-in-chrome-devtools-simulate-in-terms-of-hardwar",target:"_blank",rel:"noopener noreferrer"}},[e._v("performance testing - What does 4x slower CPU throttle in Chrome DevTools simulate in terms of hardware? - Stack Overflow"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"clear-storage"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clear-storage"}},[e._v("#")]),e._v(" clear storage")]),e._v(" "),r("p",[e._v("选中，模拟用户首次访问\n取消选中，模拟重复访问")]),e._v(" "),r("h2",{attrs:{id:"show-coverage"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#show-coverage"}},[e._v("#")]),e._v(" show coverage")]),e._v(" "),r("p",[e._v("按文件，按行分析，红色为未用到")]),e._v(" "),r("p",[e._v("判断是否渲染阻塞资源， show block，刷新，页面是否正常渲染")]),e._v(" "),r("h2",{attrs:{id:"main-thread"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#main-thread"}},[e._v("#")]),e._v(" main thread")]),e._v(" "),r("ol",[r("li",[e._v("performance")]),e._v(" "),r("li",[e._v("reload")]),e._v(" "),r("li",[e._v("user timing")]),e._v(" "),r("li",[e._v("bottom-up")])]),e._v(" "),r("h2",{attrs:{id:"不同机器差异"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#不同机器差异"}},[e._v("#")]),e._v(" 不同机器差异")]),e._v(" "),r("p",[e._v("一次优化在一台机器上测，模拟环境，然后在真实环境验证。跨机器标准化可操作性差，影响因素太多。同一台机器，尽量减少影响结果的差异因素。")]),e._v(" "),r("h2",{attrs:{id:"总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),r("ul",[r("li",[e._v("先审计再优化")]),e._v(" "),r("li",[e._v("一次改一点，隔离变化对性能影响")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://developers.google.com/web/tools/chrome-devtools/speed/get-started",target:"_blank",rel:"noopener noreferrer"}},[e._v("Optimize Website Speed With Chrome DevTools  |  Tools for Web Developers"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/91365316",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lighthouse 测试内幕 - 知乎"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"信息流内容页-闪开"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#信息流内容页-闪开"}},[e._v("#")]),e._v(" 信息流内容页“闪开”")]),e._v(" "),r("p",[e._v("流程上在Webview列表初始化的时候进行详情页资源的预加载，同时针对视图内的信息流列表进行内容页的预渲染，从而在用户点击详情页的时候可以直接从内存中读出HTML，达到闪开的效果。")]),e._v(" "),r("p",[e._v("它将渲染的损耗分摊到了客户端，从而保证渲染不会受高流量访问的影响")]),e._v(" "),r("h2",{attrs:{id:"定位性能问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#定位性能问题"}},[e._v("#")]),e._v(" 定位性能问题")]),e._v(" "),r("p",[e._v("问题： 页面滚动不流畅")]),e._v(" "),r("ol",[r("li",[e._v("打开 console - "),r("code",[e._v("...")]),e._v(" - rendering - Paint flashing")]),e._v(" "),r("li",[e._v("绿色块表示存在性能问题")]),e._v(" "),r("li",[e._v("反复移除内容，直到绿色块消失")]),e._v(" "),r("li",[r("code",[e._v("fixed")]),e._v(" 引起")])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.youtube.com/watch?v=2vFrZXWiwIc",target:"_blank",rel:"noopener noreferrer"}},[e._v("Troubleshooting rendering performance issues - YouTube"),r("OutboundLink")],1),e._v(" "),r("a",{attrs:{href:"https://stackoverflow.com/questions/26907265/css-will-change-how-to-use-it-how-it-works",target:"_blank",rel:"noopener noreferrer"}},[e._v("css3 - CSS "),r("code",[e._v("will-change")]),e._v(" - how to use it, how it works - Stack Overflow"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"element-ui"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#element-ui"}},[e._v("#")]),e._v(" element-ui")]),e._v(" "),r("p",[e._v("css vendor common 重合\nbabel 配置隐式 import css\n改用 scss import，线开 js split 机制")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.smashingmagazine.com/2020/01/front-end-performance-checklist-2020-pdf-pages/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Front-End Performance Checklist 2020 [PDF, Apple Pages, MS Word] — Smashing Magazine"),r("OutboundLink")],1)]),e._v(" "),r("h2",{attrs:{id:"fps"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#fps"}},[e._v("#")]),e._v(" FPS")]),e._v(" "),r("p",[e._v("理想值 60")]),e._v(" "),r("p",[e._v("收集 FPS list")]),e._v(" "),r("p",[e._v("连续出现3个低于20的 FPS 即可认为网页存在卡顿。")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/39292837",target:"_blank",rel:"noopener noreferrer"}},[e._v("如何监控网页的卡顿？ - 知乎"),r("OutboundLink")],1)]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("let")]),e._v(" hasFocus "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" document"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("hasFocus")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("removeEventListener")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'focus'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" focusListener"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("removeEventListener")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'blur'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" blurListener"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),r("p",[e._v("https://github.com/GoogleChromeLabs/squoosh/blob/dev/src/shared/prerendered-app/Intro/blob-anim/index.ts#L337")])])}),[],!1,null,null,null);t.default=n.exports}}]);