(window.webpackJsonp=window.webpackJsonp||[]).push([[267],{706:function(t,a,s){"use strict";s.r(a);var n=s(56),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"微信小程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微信小程序"}},[t._v("#")]),t._v(" 微信小程序")]),t._v(" "),s("p",[t._v("[toc]")]),t._v(" "),s("p",[t._v("(学任何东西，官方 Demo，文档，一定要放在手边，为什么不能一步一步走)")]),t._v(" "),s("ul",[s("li",[t._v("场景：结合原生功能，如扫码，摩拜")]),t._v(" "),s("li",[t._v("商业上，获客成本是 App 的 1/5，受益于微信庞大的用户体量，可作为正式产品的精简版，过渡品")]),t._v(" "),s("li",[t._v("没有 window，所以用到 window 和 document 的库都不行，如 jQuery 和 zepto")]),t._v(" "),s("li",[t._v("多人项目可共用 appid ，可真机调试，体验发布只能一个")]),t._v(" "),s("li",[t._v("rpx 是 px 的 2 倍，1 个物理像素")]),t._v(" "),s("li",[t._v('wx:key 警告解决， wx:key="key"')]),t._v(" "),s("li",[t._v("wxss 不支持引用本地资源，避免用 base64，那图只能放线上了")]),t._v(" "),s("li",[t._v("wxml 中配置 data-testid 传递字符串，不支持函数直接传参")]),t._v(" "),s("li",[t._v("操作反馈时用 toast，询问行为时用 modal，表单提交后用页面")]),t._v(" "),s("li",[t._v("引入 promise "),s("a",{attrs:{href:"http://www.jianshu.com/p/aeb95c210b3c",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信小程序 引入 es6 promise - 简书"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("小程序的网络请求接口 wx.request()不带 Cookies ，这让传统基于 Cookies 实现的会话管理不再适用")]),t._v(" "),s("li",[t._v("不支持 HTML、没有 Dom。 以前做好的 h5 页面没法直接用。")]),t._v(" "),s("li",[t._v("小程序源码打包后的大小限制为 1M，超大传不上去。")]),t._v(" "),s("li",[t._v("网络请求单次 wx.request 传输的数据最大也是 1M。")]),t._v(" "),s("li",[t._v("底部工具栏（MINA 框架实现的 tab bar）最多 5 个 tab")]),t._v(" "),s("li",[t._v("小程序页面只能同时打开 5 个，如果交互流程较长难以支持")]),t._v(" "),s("li",[t._v("通过 wx. navigateTo 推入后台的页面最多 5 层，超过会无法打开新页面。")]),t._v(" "),s("li",[t._v("不支持 A 标签，无法打开普通网页。")]),t._v(" "),s("li",[t._v("本地缓存数据最大 10M")]),t._v(" "),s("li",[t._v("尽量使用动态的长度单位 rpx（有点类似 android 里的 dpi，类似，不是完全）")]),t._v(" "),s("li",[t._v("小程序中是没有 Cookie 的，为了兼容目前大部分 web app 的登录管理是使用 cookie 的。小程序在请求发送时，客户端可以动态的给请求设置 Header 发送报文的 cookie")]),t._v(" "),s("li",[t._v("H5 中，通过微信授权一般采用 url 重定向的方式获取 code；在小程序中，通过 wx.login 获取 code")]),t._v(" "),s("li",[t._v("小程序用 storage 替代了 H5 中的 localstorage、sessionstorage。storage 对每个小程序的大小是 10M，支持同步和异步")])]),t._v(" "),s("p",[t._v("这种方式一般是在 wxml 中绑定事件，同时设置需要传递的数据，如果需要传递多个，可以写多个 data-[参数]的方式进行传递")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("view bindtap"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"clickMe"')]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("testId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("testId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"'),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("view"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n在js页面中自定义方法clickMe中接收\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("clickMe")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" testId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentTarget"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("testid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigateTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            url"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../pages/test/test'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("注意：通过 wxml 设置 data-[参数名]传递参数，[参数名]只能是小写，不能有大写")]),t._v(" "),s("ul",[s("li",[t._v("过滤器")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Page")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//原始数据")]),t._v("\n        user "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            birthday "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 相当于使用过滤器的表达式")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("userBirthday")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dateFormat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("birthday"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yyyy-MM-dd'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])]),s("p",[t._v("示例")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--index.wxml--\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scroll-view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("scroll-y")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindscrolltolower")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("loadMore"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lower-threshold")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("10"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scroll-wrapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("height: {{winH}}px;"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("navigator")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("../pic/pic?index={{index}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("key")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("hover-class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navigator-hover"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("wx:")]),t._v("for")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{items}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("scroll-view-item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("image")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{item.img}}_/fw/480"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("desc-wrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("text")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("desc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{item.desc}}"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("navigator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scroll-view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h2",{attrs:{id:"wepy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wepy"}},[t._v("#")]),t._v(" wepy")]),t._v(" "),s("ul",[s("li",[t._v("async/await 使用前要 import 'wepy-async-function'")]),t._v(" "),s("li",[t._v("app.wpy 为程序入口，在 config 里定义页面")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("config "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  pages"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pages/index'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("ul",[s("li",[t._v("在函数运行周期之外的函数里去修改数据需要手动调用$apply 方法，指的就是异步回调")]),t._v(" "),s("li",[t._v("混合，特殊的是 methods，兼容式混合，同名 method 先响应本身，再响应 mixin 中的")]),t._v(" "),s("li",[t._v("css 类绑定 "),s("code",[t._v(':class="{red: num > 55, green: num < 45}')])]),t._v(" "),s("li",[t._v("列表 "),s("code",[t._v('<repeat for="'+t._s(t.groupList)+'" index="index" item="item" key="key">')])])]),t._v(" "),s("h2",{attrs:{id:"学习参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#学习参考"}},[t._v("#")]),t._v(" 学习参考")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/o2team/JDHot/blob/master/201612/20161228_The_Birth_Of_JD_wxapp.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("JDHot/20161228_The_Birth_Of_JD_wxapp.pdf at master · o2team/JDHot"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://aotu.io/notes/2017/01/19/wxapp-event/",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信小程序跨页面通信解决思路 | Aotu.io「凹凸实验室」"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"webview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webview"}},[t._v("#")]),t._v(" webview")]),t._v(" "),s("p",[t._v("限制比较多，如 https，域名验证")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000012250564",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于微信小程序 webview 的使用 - 个人文章 - SegmentFault"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("第三方页面无法完成业务域名校验")]),t._v(" "),s("h2",{attrs:{id:"域名配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名配置"}},[t._v("#")]),t._v(" 域名配置")]),t._v(" "),s("p",[t._v("备案，https，用不了自己和 leancloud 免费的，只能用数据库了")]),t._v(" "),s("h2",{attrs:{id:"不支持过滤器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不支持过滤器"}},[t._v("#")]),t._v(" 不支持过滤器")]),t._v(" "),s("ul",[s("li",[t._v("ES6 getter 只能操作对象？")]),t._v(" "),s("li",[t._v("wxs 脚本，相当于原生 JS，不支持 ES6")]),t._v(" "),s("li",[t._v("修改原始数据")])]),t._v(" "),s("h2",{attrs:{id:"不使用原生的复选框大圆圈"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不使用原生的复选框大圆圈"}},[t._v("#")]),t._v(" 不使用原生的复选框大圆圈")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("radio,\ncheckbox")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" none"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"客服消息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#客服消息"}},[t._v("#")]),t._v(" 客服消息")]),t._v(" "),s("p",[t._v("客服消息弹一个链接，跳到二维码，让用户长按识别二维码去关注服务号")]),t._v(" "),s("h2",{attrs:{id:"下拉刷新跟-toast-配合起来比较好"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下拉刷新跟-toast-配合起来比较好"}},[t._v("#")]),t._v(" 下拉刷新跟 toast 配合起来比较好")]),t._v(" "),s("h2",{attrs:{id:"退出小程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#退出小程序"}},[t._v("#")]),t._v(" 退出小程序")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("wx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("navigateBack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  delta"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"无法监听返回"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无法监听返回"}},[t._v("#")]),t._v(" 无法监听返回")]),t._v(" "),s("blockquote",[s("p",[t._v("微信官方觉得阻止后退是不合理的，所以不提供该 api")])]),t._v(" "),s("h2",{attrs:{id:"输入框-input"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入框-input"}},[t._v("#")]),t._v(" 输入框 input")]),t._v(" "),s("p",[t._v("num 类型会调微信自己的输入框\ntextarea 默认在键盘上面多个栏\n文字与键盘最好保持一定距离")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[t._v(":show-confirm-bar='false' cursor-spacing=\"15\"\n")])])]),s("p",[t._v("编译后是这样"),s("code",[t._v('show-confirm-bar="'+t._s(!1)+'"')])]),t._v(" "),s("h2",{attrs:{id:"tabbar-的非首页中-如果-input-textarea-在屏幕下半区域-弹出软键盘后-顶栏会掉下来"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tabbar-的非首页中-如果-input-textarea-在屏幕下半区域-弹出软键盘后-顶栏会掉下来"}},[t._v("#")]),t._v(" tabbar 的非首页中，如果 input/textarea 在屏幕下半区域，弹出软键盘后，顶栏会掉下来")]),t._v(" "),s("ul",[s("li",[t._v("设置为首页，就正常，如此 hack，再跳转，痕迹明显")]),t._v(" "),s("li",[t._v("wx.scrollTop 需要配合改页面高度？")]),t._v(" "),s("li",[t._v("最好改设计，转场")])]),t._v(" "),s("h2",{attrs:{id:"webview-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webview-2"}},[t._v("#")]),t._v(" webview")]),t._v(" "),s("p",[t._v("默认会铺满，调第三方页面无法处理返回")]),t._v(" "),s("h2",{attrs:{id:"session-key-两端不一致"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#session-key-两端不一致"}},[t._v("#")]),t._v(" session key 两端不一致")]),t._v(" "),s("p",[t._v("401 请求拦截，重新从服务器获取新的 session key")]),t._v(" "),s("h2",{attrs:{id:"图片优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片优化"}},[t._v("#")]),t._v(" 图片优化")]),t._v(" "),s("ul",[s("li",[t._v("上 cdn")]),t._v(" "),s("li",[t._v("大图片存到 storage")])]),t._v(" "),s("h2",{attrs:{id:"全局数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#全局数据"}},[t._v("#")]),t._v(" 全局数据")]),t._v(" "),s("p",[t._v("全局 store 怎么使用啊 · Issue #89 · Meituan-Dianping/mpvue https://github.com/Meituan-Dianping/mpvue/issues/89#issuecomment-373011661")]),t._v(" "),s("h2",{attrs:{id:"小程序入口二维码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#小程序入口二维码"}},[t._v("#")]),t._v(" 小程序入口二维码")]),t._v(" "),s("p",[t._v("比如某个页面，由于微信返回的是二进制文件流，需要后端转换为前端可展示的图片")]),t._v(" "),s("h2",{attrs:{id:"登录详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登录详解"}},[t._v("#")]),t._v(" 登录详解")]),t._v(" "),s("ul",[s("li",[t._v("获取用户信息组件与 wx.getUserInfo 相比，不受弹框限制")]),t._v(" "),s("li",[t._v("推荐按钮组件获取用户信息，未来不再支持 api 方式主动调起\n"),s("blockquote",[s("p",[t._v("小程序中，在页面中加入一个 button 按钮，并将 open-type 属性设置为 getUserInfo 。")])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developers.weixin.qq.com/blogdetail?action=get_post_info&docid=c45683ebfa39ce8fe71def0631fad26b&token=60776517&lang=zh_CN",target:"_blank",rel:"noopener noreferrer"}},[t._v("获取用户信息方案介绍 | 微信公众平台 开发者社区"),s("OutboundLink")],1),t._v(" "),s("a",{attrs:{href:"https://developers.weixin.qq.com/blogdetail?action=get_post_info&lang=zh_CN&token=&docid=000e2aac1ac838e29aa6c4eaf56409",target:"_blank",rel:"noopener noreferrer"}},[t._v("小程序•小故事(6)——微信登录能力优化 | 微信公众平台 开发者社区"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"尺寸单位"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#尺寸单位"}},[t._v("#")]),t._v(" 尺寸单位")]),t._v(" "),s("p",[t._v("iphone 6 1rpx = 0.5px\n"),s("a",{attrs:{href:"https://developers.weixin.qq.com/ebook?action=get_post_info&token=935589521&volumn=1&lang=zh_CN&book=miniprogram&docid=000c44c49141887b00864fbba5100a",target:"_blank",rel:"noopener noreferrer"}},[t._v("教程 | 《小程序开发指南》"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"mpvue-computed-无法跨页面响应变化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mpvue-computed-无法跨页面响应变化"}},[t._v("#")]),t._v(" mpvue computed 无法跨页面响应变化")]),t._v(" "),s("p",[t._v("computed 只 mounted 时调用")]),t._v(" "),s("blockquote",[s("p",[t._v("vuex 是支持的。但是计算属性不支持")])]),t._v(" "),s("h2",{attrs:{id:"登陆流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登陆流程"}},[t._v("#")]),t._v(" 登陆流程")]),t._v(" "),s("ul",[s("li",[t._v("前端获取 code 发给后端换取 skey/token\n执行时机\n"),s("ul",[s("li",[t._v("token 不存在")]),t._v(" "),s("li",[t._v("checkSession 失效")])])]),t._v(" "),s("li",[t._v("用户微信资料后端存取\n"),s("ul",[s("li",[t._v("只需要用户一次允许授权，相当于一般网站的注册")]),t._v(" "),s("li",[t._v("再次请求授权时，允许即更新资料，拒绝依然能显示")])])]),t._v(" "),s("li",[t._v("cookie 传递\n"),s("a",{attrs:{href:"https://www.waitig.com/%25E5%25BE%25AE%25E4%25BF%25A1%25E5%25B0%258F%25E7%25A8%258B%25E5%25BA%258Fcookie-session%25E9%2597%25AE%25E9%25A2%2598.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信小程序 cookie-session 问题 | 等英博客"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转发"}},[t._v("#")]),t._v(" 转发")]),t._v(" "),s("ul",[s("li",[t._v("可以判断是否成功")]),t._v(" "),s("li",[t._v("判断转发到个人还是群聊，需要执行 wx.share 带上 ticket 参数，res 有 shareTickets 是群聊天")]),t._v(" "),s("li",[t._v("只能按页面处理，不支持全局")])])])}),[],!1,null,null,null);a.default=e.exports}}]);