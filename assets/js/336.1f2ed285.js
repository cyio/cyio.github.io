(window.webpackJsonp=window.webpackJsonp||[]).push([[336],{776:function(t,s,a){"use strict";a.r(s);var n=a(56),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ios"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ios"}},[t._v("#")]),t._v(" iOS")]),t._v(" "),a("h2",{attrs:{id:"ios调试移动端弹窗遮罩input框focus和click事件失效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ios调试移动端弹窗遮罩input框focus和click事件失效"}},[t._v("#")]),t._v(" IOS调试移动端弹窗遮罩input框focus和click事件失效")]),t._v(" "),a("p",[t._v("移动端的登录窗口绝大多数的做法是点击登录，然后弹出固定定位的遮罩窗口，输入用户名、密码等信息进行登录。\n在IOS系统下，当input唤起键盘时，会导致遮罩下层的页面出现滚动和底部空白，这时就会影响到遮罩固定定位的页面显示及交互事件。\n解决办法：底层页面在一加载进入的时候就记录scrollTop，当遮罩弹出的input失去焦点时，要触发底层页面的滚动事件，让它滚动到遮罩未弹出时的位置，就可以修复input失效的bug。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isIOS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("platform "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("iPad|iPhone|iPod")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("platform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fix IOS手机唤起键盘，输入框失去焦点后页面元素点击事件位置偏移")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fixIOSInput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("isIOS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scroll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("使用")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('input(@blur="fixIOSInput")\n')])])]),a("h2",{attrs:{id:"橡皮筋效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#橡皮筋效果"}},[t._v("#")]),t._v(" 橡皮筋效果")]),t._v(" "),a("p",[t._v("如果弹窗不滚动，没问题，如果需要滚动，只能把露出的内容隐藏\n"),a("a",{attrs:{href:"https://github.com/zipeijun/vue-bounce",target:"_blank",rel:"noopener noreferrer"}},[t._v("zipeijun/vue-bounce: 禁用 iOS 平台橡皮筋效果的 Vue 插件"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-pug extra-class"},[a("pre",{pre:!0,attrs:{class:"language-pug"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("toolbar"),a("span",{pre:!0,attrs:{class:"token attributes"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"!showFullscreenModal"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("// 规避 ios 下 modal 滚动到底露出 fixed 在底部的 toolbar")]),t._v("\n")])])]),a("p",[t._v("弹出层与父页面都能滚动时，互相影响，需要处理滚动位置恢复")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://codepen.io/cyio/pen/rNOdEQx",target:"_blank",rel:"noopener noreferrer"}},[t._v("全屏弹层（滚动场景）"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"x-系列-页面底部元素被虚拟键遮挡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#x-系列-页面底部元素被虚拟键遮挡"}},[t._v("#")]),t._v(" x 系列 页面底部元素被虚拟键遮挡")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://codepen.io/cyio/pen/yvbVjz",target:"_blank",rel:"noopener noreferrer"}},[t._v("is iphonex"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Iphone X 系列，特征是 ios + 长脸")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信内置浏览器，需要加下 innerHeight 的判断？")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("isIphoneXSeries")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" window "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("iphone")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-flags"}},[t._v("gi")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userAgent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("screen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("812")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://webkit.org/blog/7929/designing-websites-for-iphone-x/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Designing Websites for iPhone X | WebKit"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("官方文档")]),t._v(" "),a("p",[t._v("safari 自动处理，会避开刘海和圆角区域，这些区域会填充页面背景色。大部分网站没有问题")]),t._v(" "),a("p",[t._v("其它网站，如有全宽度的水平导航栏，会被虚拟指示条遮挡")]),t._v(" "),a("p",[t._v("设置"),a("code",[t._v("viewport-fit=cover")]),t._v("，使用整个屏幕，自己处理。缺点是，要处理各个方向间距，以及旋转后各个方向间距 变化")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.im/post/5be95fbef265da61327ed8e0",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容iphone x刘海的正确姿势 - 掘金"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://codepen.io/cyio/pen/xxwjKyv",target:"_blank",rel:"noopener noreferrer"}},[t._v("iphone x 系列 安全区域"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  safari 有工具栏，向下滚动时，隐藏，向上时，出现\n\n  wechat 横 微信栏占用两倍调试，遮挡内容，无法通过 cover + padding-top 解决\n\n  when use cover\n    safari 上方无问题 竖 地址栏/网址栏 横 无\n\n    toolbar 横 向下滚 仅展示一半，且遮挡\n\n  safari wechat 测试中表现有时不一致，像是缓存了？\n")])])]),a("p",[t._v("结论：如果使用 cover，需要")]),t._v(" "),a("ol",[a("li",[t._v("左右下 设置 padding")]),t._v(" "),a("li",[t._v("toolbar 设置 bottom padding")])])])}),[],!1,null,null,null);s.default=e.exports}}]);