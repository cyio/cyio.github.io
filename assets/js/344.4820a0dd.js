(window.webpackJsonp=window.webpackJsonp||[]).push([[344],{782:function(t,e,r){"use strict";r.r(e);var a=r(56),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"http-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#http-2"}},[t._v("#")]),t._v(" HTTP 2")]),t._v(" "),r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#tldr"}},[t._v("TLDR")])]),r("li",[r("a",{attrs:{href:"#概要"}},[t._v("概要")])]),r("li",[r("a",{attrs:{href:"#header-压缩"}},[t._v("header 压缩")])]),r("li",[r("a",{attrs:{href:"#与-http-1-1-对比"}},[t._v("与 HTTP 1.1 对比")])])])]),r("p"),t._v(" "),r("h2",{attrs:{id:"tldr"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#tldr"}},[t._v("#")]),t._v(" TLDR")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("http 1.1\n6-8 多域\nkeep-alive 请求结束不关闭 基于文本 队首阻塞\nHTTP 2 二进制分帧 乱序并发，合并 header 压缩\n")])])]),r("h2",{attrs:{id:"概要"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),r("ul",[r("li",[t._v("新特性：多路复用的单一长连接、请求优先级、服务器推送")]),t._v(" "),r("li",[t._v("HTTP 1.x 浏览器有同域请求并发限制")]),t._v(" "),r("li",[t._v("HTTP 2 同一连接并发互换\n"),r("blockquote",[r("p",[t._v("在 HTTP/2 中，客户端向某个域名的服务器请求页面的过程中，只会创建一条 TCP 连接，即使这页面可能包含上百个资源。而之前的 HTTP/1.x 一般\n会创建 6-8 条 TCP 连接来请求这 100 多个资源。单一的连接应该是 HTTP2 的主要优势，单一的连接能减少 TCP 握手带来的时延\nHTTP2 中用一条单一的长连接，避免了创建多个 TCP 连接带来的网络开销，提高了吞吐量。")])])])]),t._v(" "),r("p",[r("a",{attrs:{href:"https://http2-explained.haxx.se/zh/part6",target:"_blank",rel:"noopener noreferrer"}},[t._v("The http2 protocol · http2 explained"),r("OutboundLink")],1),t._v(" "),r("a",{attrs:{href:"https://httpwg.org/specs/rfc7540.html#intro",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hypertext Transfer Protocol Version 2 (HTTP/2)"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"header-压缩"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#header-压缩"}},[t._v("#")]),t._v(" header 压缩")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("HTTP\n  TLS gzip\n    TCP\n")])])]),r("p",[t._v("一开始 header 和 body 无差别压缩，由于安全原因，云服务禁用了 header 压缩，直到 H2。HPACK 专用算法")]),t._v(" "),r("p",[r("code",[t._v("key:value")]),t._v("\n静态字典 + Huffman + 动态字典，请求复用时，压缩率可达 99%")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://blog.cloudflare.com/hpack-the-silent-killer-feature-of-http-2/",target:"_blank",rel:"noopener noreferrer"}},[t._v("HPACK: the silent killer (feature) of HTTP/2"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"与-http-1-1-对比"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#与-http-1-1-对比"}},[t._v("#")]),t._v(" 与 HTTP 1.1 对比")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th"),t._v(" "),r("th",[t._v("html1.x")]),t._v(" "),r("th",[t._v("html2")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("TCP")]),t._v(" "),r("td",[t._v("一个")]),t._v(" "),r("td",[t._v("复用")])]),t._v(" "),r("tr",[r("td",[t._v("cookie")]),t._v(" "),r("td",[t._v("每个请求携带")]),t._v(" "),r("td",[t._v("一个连接")])]),t._v(" "),r("tr",[r("td",[t._v("header")]),t._v(" "),r("td",[t._v("无压缩")]),t._v(" "),r("td",[t._v("HPACK")])]),t._v(" "),r("tr",[r("td",[t._v("传输格式")]),t._v(" "),r("td",[t._v("文本")]),t._v(" "),r("td",[t._v("二进制分帧、多流")])])])]),t._v(" "),r("p",[t._v("参考："),r("a",{attrs:{href:"https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/14",target:"_blank",rel:"noopener noreferrer"}},[t._v("第 15 题：简单讲解一下 http2 的多路复用 · Issue #14 · Advanced-Frontend/Daily-Interview-Question"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("keep-alive 虽然可以复用一个连接处理多个请求，但序列响应、存在队首阻塞问题，即前序请求不完成、后续请求只能等着。")]),t._v(" "),r("p",[t._v("建立多个连接客户端、服务端开销大")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://blog.csdn.net/justinzengTM/article/details/105918883",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP/1.1队首阻塞和HTTP/2优化_大力海棠的博客-CSDN博客"),r("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=n.exports}}]);