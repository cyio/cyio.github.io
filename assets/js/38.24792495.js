(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{481:function(t,s,a){"use strict";a.r(s);var e=a(56),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react"}},[t._v("#")]),t._v(" React")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#为什么用"}},[t._v("为什么用")])]),a("li",[a("a",{attrs:{href:"#学习参考"}},[t._v("学习参考")])]),a("li",[a("a",{attrs:{href:"#virtual-dom"}},[t._v("Virtual DOM")])]),a("li",[a("a",{attrs:{href:"#issues"}},[t._v("Issues")])]),a("li",[a("a",{attrs:{href:"#布局总结"}},[t._v("布局总结")])]),a("li",[a("a",{attrs:{href:"#jsx"}},[t._v("JSX")]),a("ul",[a("li",[a("a",{attrs:{href:"#定义"}},[t._v("定义")])]),a("li",[a("a",{attrs:{href:"#创建和使用组件"}},[t._v("创建和使用组件")])])])]),a("li",[a("a",{attrs:{href:"#render-中绑定函数提到外面"}},[t._v("render 中绑定函数提到外面")])]),a("li",[a("a",{attrs:{href:"#learn"}},[t._v("learn")])]),a("li",[a("a",{attrs:{href:"#hooks"}},[t._v("hooks")]),a("ul",[a("li",[a("a",{attrs:{href:"#usestate"}},[t._v("useState")])]),a("li",[a("a",{attrs:{href:"#useeffect"}},[t._v("useEffect")])])])]),a("li",[a("a",{attrs:{href:"#生命周期"}},[t._v("生命周期")]),a("ul",[a("li",[a("a",{attrs:{href:"#componentdidupdate"}},[t._v("componentDidUpdate")])])])]),a("li",[a("a",{attrs:{href:"#组件演化"}},[t._v("组件演化")])]),a("li",[a("a",{attrs:{href:"#proptypes"}},[t._v("PropTypes")])]),a("li",[a("a",{attrs:{href:"#portal"}},[t._v("Portal")])]),a("li",[a("a",{attrs:{href:"#react-memo-vs-usememo"}},[t._v("React.memo vs useMemo")])]),a("li",[a("a",{attrs:{href:"#react-diff-算法"}},[t._v("React diff 算法")])]),a("li",[a("a",{attrs:{href:"#懒加载"}},[t._v("懒加载")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"为什么用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么用"}},[t._v("#")]),t._v(" 为什么用")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("名称含义：re hack html")])]),t._v(" "),a("li",[a("p",[t._v("传统 web ，要更新一个状态，必须刷新整个页面，而重绘的伤害性体验，是传统 web 无法解决的")]),t._v(" "),a("p",[t._v("如何追踪变化？如何按需更新？")])]),t._v(" "),a("li",[a("p",[t._v("组件化，解决协作，复用问题")]),t._v(" "),a("ul",[a("li",[t._v("VirtualDOM JS 版的 DOM ，高效渲染 DOM ，允许 diff ，允许服务端渲染")]),t._v(" "),a("li",[t._v("diff 两个 VirtualDOM 树")]),t._v(" "),a("li",[t._v("改变节点类型，会略过 diff")])])]),t._v(" "),a("li",[a("p",[t._v("函数就是组件")]),t._v(" "),a("ul",[a("li",[t._v("组件内任意嵌套组件")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("c1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("hello"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("c1 style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'red'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("React 再加上函数式编程技巧，项目可以无往而不利")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("显示和状态分离")]),t._v(" "),a("p",[t._v("用 stateless 组件来负责显示，class 组件来负责状态和逻辑")])])]),t._v(" "),a("h2",{attrs:{id:"学习参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#学习参考"}},[t._v("#")]),t._v(" 学习参考")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://developer.telerik.com/featured/5-steps-for-learning-react-application-development/",target:"_blank",rel:"noopener noreferrer"}},[t._v("5 Steps for Learning React Application Development - Telerik Developer Network"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"virtual-dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#virtual-dom"}},[t._v("#")]),t._v(" Virtual DOM")]),t._v(" "),a("ul",[a("li",[t._v("两个前提：JS 高效，DOM 操作慢")]),t._v(" "),a("li",[t._v("生成虚拟 ODM 树，对比虚拟 DOM 树，用最少的操作更新视图")])]),t._v(" "),a("h2",{attrs:{id:"issues"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#issues"}},[t._v("#")]),t._v(" Issues")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("state 计算依赖，依赖值")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// won't update")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("previousState")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" counter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" previousState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("state 可作为 props 向下传递，props 按组件树向下传递，而 state 由组件单独管理和由函数冒泡改变")])])]),t._v(" "),a("h2",{attrs:{id:"布局总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#布局总结"}},[t._v("#")]),t._v(" 布局总结")]),t._v(" "),a("ol",[a("li",[t._v("react 宽度基于 pt 为单位， 可以通过 Dimensions 来获取宽高，PixelRatio 获取密度，如果想使用百分比，可以通过获取屏幕宽度手动计算。")]),t._v(" "),a("li",[t._v("基于 flex 的布局\n"),a("ol",[a("li",[t._v("view 默认宽度为 100%")]),t._v(" "),a("li",[t._v("水平居中用 alignItems, 垂直居中用 justifyContent")]),t._v(" "),a("li",[t._v("基于 flex 能够实现现有的网格系统需求，且网格能够各种嵌套无 bug")])])]),t._v(" "),a("li",[t._v("图片布局\n"),a("ol",[a("li",[t._v("通过 Image.resizeMode 来适配图片布局，包括 contain, cover, stretch")]),t._v(" "),a("li",[t._v("默认不设置模式等于 cover 模式")]),t._v(" "),a("li",[t._v("contain 模式自适应宽高，给出高度值即可")]),t._v(" "),a("li",[t._v("cover 铺满容器，但是会做截取")]),t._v(" "),a("li",[t._v("stretch 铺满容器，拉伸")])])]),t._v(" "),a("li",[t._v("定位\n"),a("ol",[a("li",[t._v("定位相对于父元素，父元素不用设置 position 也行")]),t._v(" "),a("li",[t._v("padding 设置在 Text 元素上的时候会存在 bug。所有 padding 变成了 marginBottom")])])]),t._v(" "),a("li",[t._v("文本元素\n"),a("ol",[a("li",[t._v("文字必须放在 Text 元素里边")]),t._v(" "),a("li",[t._v("Text 元素可以相互嵌套，且存在样式继承关系")]),t._v(" "),a("li",[t._v("numberOfLines 需要放在最外层的 Text 元素上，且虽然截取了文字但是还是会占用空间")])])])]),t._v(" "),a("h2",{attrs:{id:"jsx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsx"}},[t._v("#")]),t._v(" JSX")]),t._v(" "),a("h3",{attrs:{id:"定义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[t._v("#")]),t._v(" 定义")]),t._v(" "),a("p",[t._v("像 XML 的 JavaScript 语法扩展，用于描述包含属性的树状结构")]),t._v(" "),a("p",[t._v("我们只要记住 HTML 只是代码创建 DOM 的一种语法形式，就很容易理解 JSX。而这种使用代码构建界面的方式，完全消除了业务逻辑和界面元素之间的隔阂，让代码更加直观和易于维护。")]),t._v(" "),a("ul",[a("li",[t._v("组件(首字母大写)")]),t._v(" "),a("li",[t._v("HTML 标签(首字母小写)")])]),t._v(" "),a("h3",{attrs:{id:"创建和使用组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建和使用组件"}},[t._v("#")]),t._v(" 创建和使用组件")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" MyComponent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createClass")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*...*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myElement "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyComponent someProperty"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'example'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("命名组件解决子组件较多的情况")]),t._v(" "),a("ul",[a("li",[t._v("如何使用混合子表达式")]),t._v(" "),a("li",[t._v("如何添加注释")])]),t._v(" "),a("p",[t._v("特殊属性:")]),t._v(" "),a("ul",[a("li",[t._v("className 替换 class")]),t._v(" "),a("li",[t._v("htmlFor 替换 for")])]),t._v(" "),a("p",[t._v("可使用点号对象访问方式，构成组件名")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MyComponents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("DatePicker")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("DatePicker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Imagine a "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" datepicker here"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("BlueDatePicker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyComponents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DatePicker color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blue"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("首字母大写才会被解析为用户定义组件，否则会认为是普通 HTML 标签")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" components "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  photo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PhotoStory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  video"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" VideoStory\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Story")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" SpecificStory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" components"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("storyType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("SpecificStory story"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("story"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("扩展属性")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Greeting firstName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ben"')]),t._v(" lastName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hector"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" props "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" firstName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Ben'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lastName"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hector'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Greeting "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("0")]),t._v("会被渲染，使用逻辑表达式前要确保条件类型是布尔值")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MessageList messages"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MessageList messages"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("messages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"render-中绑定函数提到外面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#render-中绑定函数提到外面"}},[t._v("#")]),t._v(" render 中绑定函数提到外面")]),t._v(" "),a("p",[t._v("官方解答，使用箭头函数是 OK 的，在你遇到性能问题之前")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://reactjs.org/docs/faq-functions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Passing Functions to Components – React"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("原理：创建新函数，意味着 prop 值每次变化，进而不必要地 re render 子组件")]),t._v(" "),a("ol",[a("li",[t._v("外提箭头函数赋值")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("handleClick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'clickity'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("在构造器中统一绑定")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("handleClick "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'clickity'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[t._v("解决绑定传参，拆分组件")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://daveceddia.com/avoid-bind-when-passing-props/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Don't Use Bind When Passing Props"),a("OutboundLink")],1)])])]),t._v(" "),a("h2",{attrs:{id:"learn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#learn"}},[t._v("#")]),t._v(" learn")]),t._v(" "),a("p",[t._v("state 每个组件私有")]),t._v(" "),a("p",[t._v("当需要获取多个子组件数据，或两个组件需要相互通讯，state 提升到父组件")]),t._v(" "),a("p",[t._v("受控组件")]),t._v(" "),a("blockquote",[a("p",[t._v("受控”与“非受控”两个概念，区别在于这个组件的状态是否可以被外部修改。一个设计得当的组件应该同时支持“受控”与“非受控”两种形式，即当开发者不控制组件属性时，组件自己管理状态，而当开发者控制组件属性时，组件该由属性控制。而开发一个复杂组件更需要注意这点，以避免只有部分属性受控，使其变成一个半受控组件。\n"),a("a",{attrs:{href:"https://www.yuque.com/ant-design/course/goozth",target:"_blank",rel:"noopener noreferrer"}},[t._v("受控组件与非受控组件 · 语雀"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("不可变数据：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("跟踪更容易")])]),t._v(" "),a("li",[a("p",[t._v("优势，帮助创建 pure components，变化时机 --\x3e 确定重新渲染")])]),t._v(" "),a("li",[a("p",[t._v("只有 render，不含私有数据(state)，写成函数组件更简单")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("NoStateComp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("React 元素 对象 一等公民 参数传递")])]),t._v(" "),a("li",[a("p",[t._v("动态列表，指定 key，且 key 一般不要用数组索引")])]),t._v(" "),a("li",[a("p",[t._v("组合，no 继承")])]),t._v(" "),a("li",[a("p",[t._v("大型 webapp 首选")])]),t._v(" "),a("li",[a("p",[t._v("组件划分原则，单一职责")])]),t._v(" "),a("li",[a("p",[t._v("渲染 UI vs 添加交互")]),t._v(" "),a("p",[t._v("大量编码 vs 大量细节")])]),t._v(" "),a("li",[a("p",[t._v("prop vs state")]),t._v(" "),a("p",[t._v("构建静态版本时，不需要 state")])]),t._v(" "),a("li",[a("p",[t._v("小型 vs 大型")]),t._v(" "),a("p",[t._v("自下而上 vs 自上而下")])])]),t._v(" "),a("p",[t._v("state 需要定义的最少数据")]),t._v(" "),a("p",[t._v("创建新上层组件理由，需要存放共同 state")]),t._v(" "),a("ul",[a("li",[t._v("class ==> hook why\n"),a("ul",[a("li",[t._v("组件复用，抽象层嵌套地域")]),t._v(" "),a("li",[t._v("生命周期，不相关逻辑分散")]),t._v(" "),a("li",[t._v("class this 理解难度大")])])])]),t._v(" "),a("h2",{attrs:{id:"hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[t._v("#")]),t._v(" hooks")]),t._v(" "),a("ul",[a("li",[t._v("hooks 是一种在函数式组件内使用 state 逻辑，消除写 classes 的必要。")]),t._v(" "),a("li",[t._v("vue 可以结合 mixin 来写无状态的函数式组件。mixin 的缺点是无法消费或使用另一个 mixin。导致链式逻辑难以实现。")]),t._v(" "),a("li",[t._v("更清晰定义和共享逻辑、传递 state")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.logrocket.com/hooks-are-coming-to-vue/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hooks are coming to Vue.js version 3.0 - LogRocket Blog"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/66170210",target:"_blank",rel:"noopener noreferrer"}},[t._v("useHooks~小窍门 - 知乎"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"usestate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usestate"}},[t._v("#")]),t._v(" useState")]),t._v(" "),a("p",[t._v("use 设置对象或数组时替换， 有别于 class 合并")]),t._v(" "),a("p",[t._v("除非需要替换更新的一类数据，否则都应该分开定义")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/hooks-faq.html#should-i-use-one-or-many-state-variables",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hooks FAQ – React"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://blog.solutotlv.com/react-class-to-hooks/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Class features vs. Hooks equivalents • Soluto Engineering Blog"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://github.com/shanggqm/blog/issues/4",target:"_blank",rel:"noopener noreferrer"}},[t._v("无意识设计-复盘 React Hook 的创造过程 · Issue #4 · shanggqm/blog"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[a("p",[t._v("调用限制：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("只在 top level 调用 Hooks，而不能在循环、条件或嵌套函数中使用")])]),t._v(" "),a("li",[a("p",[t._v("只在 React 函数组件或自定义 Hooks 中调用，而不能在普通 JS 函数中")])])])]),t._v(" "),a("li",[a("p",[t._v("useState 里数据务必为 immutable")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bad 这样无法触发更新")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// good 必须传入一个新的对象")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setList")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"useeffect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useeffect"}},[t._v("#")]),t._v(" useEffect")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("async 要用 IIFE 包起来")])]),t._v(" "),a("li",[a("p",[t._v("组件渲染后执行，不阻塞绘制。"),a("code",[t._v("componentDidMount")]),t._v(" and "),a("code",[t._v("componentDidUpdate")]),t._v("是同步")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://frezc.github.io/2019/03/23/react-hooks-traps/",target:"_blank",rel:"noopener noreferrer"}},[t._v("react hooks 踩坑记录 | Code for fun"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("什么情况下不用？操作 DOM 且每次渲染不一样，DOM 更新后又触发 effect。用户会看到界面闪烁，只有这一种情况需要使用"),a("code",[t._v("useLayoutEffect")]),t._v("，执行在 dom 更新后，绘制前")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://kentcdodds.com/blog/useeffect-vs-uselayouteffect",target:"_blank",rel:"noopener noreferrer"}},[t._v("useEffect vs useLayoutEffect"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("Fragment 相当于 vue 的 template")]),t._v(" "),a("p",[t._v("加空格方式 "),a("code",[t._v("{' '}")])]),t._v(" "),a("p",[t._v("setState 更新回调")]),t._v(" "),a("ol",[a("li",[t._v("componentDidUpdate")]),t._v(" "),a("li",[a("code",[t._v("setState(updater, callback)")])])]),t._v(" "),a("p",[t._v("render return 里可直接定义变量"),a("code",[t._v("const ChapterName = <h2>{chapterName}</h2>;")])]),t._v(" "),a("h2",{attrs:{id:"生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生命周期"}},[t._v("#")]),t._v(" 生命周期")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React lifecycle methods diagram"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"componentdidupdate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#componentdidupdate"}},[t._v("#")]),t._v(" componentDidUpdate")]),t._v(" "),a("ul",[a("li",[t._v("组件更新后立即调用，首次渲染不调用")]),t._v(" "),a("li",[t._v("用于网络请求导致 props 变化等")]),t._v(" "),a("li",[t._v("注意，执行操作要有条件，避免死循环")])]),t._v(" "),a("h2",{attrs:{id:"组件演化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组件演化"}},[t._v("#")]),t._v(" 组件演化")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://ww1.sinaimg.cn/large/4e5d3ea7ly1gikjo188z2j21q80x8gs0.jpg",alt:"image.png"}})]),t._v(" "),a("h2",{attrs:{id:"proptypes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proptypes"}},[t._v("#")]),t._v(" PropTypes")]),t._v(" "),a("p",[t._v("默认非必须，即允许 null / undefined")]),t._v(" "),a("h2",{attrs:{id:"portal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#portal"}},[t._v("#")]),t._v(" Portal")]),t._v(" "),a("p",[t._v("仅影响 DOM 结构，不影响事件、生命周期、组件树")]),t._v(" "),a("h2",{attrs:{id:"react-memo-vs-usememo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-memo-vs-usememo"}},[t._v("#")]),t._v(" React.memo vs useMemo")]),t._v(" "),a("p",[t._v("类型，顶层 api，hooks\n第二参数，比较函数（是否相等），依赖数组")]),t._v(" "),a("p",[t._v("避免受")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("propsAreEqual")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("prevProp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextProp"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("prevProp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextProp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nReact"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("memo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Comp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" propsAreEqual"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("useMemo 缓存计算值，仅依赖变化时重新计算")]),t._v(" "),a("h2",{attrs:{id:"react-diff-算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-diff-算法"}},[t._v("#")]),t._v(" React diff 算法")]),t._v(" "),a("ul",[a("li",[t._v("不同元素类型，旧元素卸载，挂载新元素")]),t._v(" "),a("li",[t._v("相同类型的 DOM 元素，只更新属性")]),t._v(" "),a("li",[t._v("相同类型的 Component 元素，更新 prop")]),t._v(" "),a("li",[t._v("DOM 子元素遍历比较，顺序发生变化会全部认为 diff，可用 key 显式指明是否是同一元素")])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://reactjs.org/docs/reconciliation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reconciliation – React"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"http://benweizhu.github.io/blog/2018/04/22/deep-thinking-in-react-5/",target:"_blank",rel:"noopener noreferrer"}},[t._v("React的思考（五）- Reconciliation - NO END FOR LEARNING"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("不可变数据优势 "),a("a",{attrs:{href:"https://zh-hans.reactjs.org/tutorial/tutorial.html#why-immutability-is-important",target:"_blank",rel:"noopener noreferrer"}},[t._v("入门教程: 认识 React – React"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("易于实现复杂特性，如撤销和恢复")])]),t._v(" "),a("h2",{attrs:{id:"懒加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#懒加载"}},[t._v("#")]),t._v(" 懒加载")]),t._v(" "),a("p",[t._v("React.lazy 配合 Suspense")])])}),[],!1,null,null,null);s.default=n.exports}}]);