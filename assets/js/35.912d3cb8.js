(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{478:function(t,a,e){"use strict";e.r(a);var s=e(56),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"react-issues"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-issues"}},[t._v("#")]),t._v(" react issues")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#页面结构"}},[t._v("页面结构")])]),e("li",[e("a",{attrs:{href:"#注意"}},[t._v("注意")])]),e("li",[e("a",{attrs:{href:"#page-bare-template"}},[t._v("page bare template")])]),e("li",[e("a",{attrs:{href:"#typescript"}},[t._v("TypeScript")]),e("ul",[e("li",[e("a",{attrs:{href:"#json-快速生成-ts"}},[t._v("JSON 快速生成 TS")])])])]),e("li",[e("a",{attrs:{href:"#影响效率因素"}},[t._v("影响效率因素")])]),e("li",[e("a",{attrs:{href:"#新建页面"}},[t._v("新建页面")])]),e("li",[e("a",{attrs:{href:"#表格实现"}},[t._v("表格实现")])]),e("li",[e("a",{attrs:{href:"#路径-routes"}},[t._v("路径 routes")])]),e("li",[e("a",{attrs:{href:"#connect"}},[t._v("connect")])]),e("li",[e("a",{attrs:{href:"#解构对象内容"}},[t._v("解构对象内容")])]),e("li",[e("a",{attrs:{href:"#checkbox-group"}},[t._v("checkbox.group")])]),e("li",[e("a",{attrs:{href:"#classnames"}},[t._v("classNames")])]),e("li",[e("a",{attrs:{href:"#umi-requesttype-默认是-json-可选-form"}},[t._v("umi requestType 默认是 json，可选 form")])]),e("li",[e("a",{attrs:{href:"#iconfont-cn-use-in-antd"}},[t._v("iconfont.cn use in antd")])]),e("li",[e("a",{attrs:{href:"#hover-exclude"}},[t._v("hover exclude")])]),e("li",[e("a",{attrs:{href:"#useeffect-反复执行"}},[t._v("useEffect 反复执行")])]),e("li",[e("a",{attrs:{href:"#数据联动"}},[t._v("数据联动")])]),e("li",[e("a",{attrs:{href:"#antd-form-onfinished"}},[t._v("antd form onFinished")])]),e("li",[e("a",{attrs:{href:"#hook-state-拆分合并原则"}},[t._v("hook state 拆分合并原则")])]),e("li",[e("a",{attrs:{href:"#可以在函数内直接申明普通常量或普通函数吗"}},[t._v("可以在函数内直接申明普通常量或普通函数吗？")])]),e("li",[e("a",{attrs:{href:"#useeffect-不要用-async-use-usecallback-instead"}},[t._v("useEffect 不要用 async, use useCallback instead")])]),e("li",[e("a",{attrs:{href:"#list-virtualized"}},[t._v("list virtualized")])]),e("li",[e("a",{attrs:{href:"#生命周期模拟-useeffect"}},[t._v("生命周期模拟 useEffect")])]),e("li",[e("a",{attrs:{href:"#calc-px-计算"}},[t._v("calc px 计算")])]),e("li",[e("a",{attrs:{href:"#播放器能支持哪些文件类型"}},[t._v("播放器能支持哪些文件类型")])]),e("li",[e("a",{attrs:{href:"#使用多个-usestate-或-usereducer"}},[t._v("使用多个 useState 或 useReducer")])]),e("li",[e("a",{attrs:{href:"#复杂-state-逻辑建议用-react-自带-usereducer"}},[t._v("复杂 state 逻辑建议用 React 自带 useReducer")])]),e("li",[e("a",{attrs:{href:"#自定义-hook"}},[t._v("自定义 hook")])]),e("li",[e("a",{attrs:{href:"#rangepicker-没有样式"}},[t._v("RangePicker 没有样式")])]),e("li",[e("a",{attrs:{href:"#dva-使用"}},[t._v("dva 使用")])]),e("li",[e("a",{attrs:{href:"#antd-权限组件"}},[t._v("antd 权限组件")])]),e("li",[e("a",{attrs:{href:"#hook-dva-snip"}},[t._v("hook dva snip")])]),e("li",[e("a",{attrs:{href:"#umi-ui"}},[t._v("umi ui")])]),e("li",[e("a",{attrs:{href:"#自定义左侧菜单-icon"}},[t._v("自定义左侧菜单 icon")])]),e("li",[e("a",{attrs:{href:"#动态-menu"}},[t._v("动态 menu")])]),e("li",[e("a",{attrs:{href:"#参数路由"}},[t._v("参数路由")])]),e("li",[e("a",{attrs:{href:"#layouts"}},[t._v("layouts")])]),e("li",[e("a",{attrs:{href:"#视图无关的数据"}},[t._v("视图无关的数据")])]),e("li",[e("a",{attrs:{href:"#re-render"}},[t._v("re-render")])]),e("li",[e("a",{attrs:{href:"#why-mapstate-mapdispatch"}},[t._v("why mapState mapDispatch")])]),e("li",[e("a",{attrs:{href:"#容器组件模式"}},[t._v("容器组件模式")])]),e("li",[e("a",{attrs:{href:"#umi-简化数据流方案"}},[t._v("umi 简化数据流方案")])]),e("li",[e("a",{attrs:{href:"#class-组件不能用-hooks"}},[t._v("class 组件不能用 hooks")])]),e("li",[e("a",{attrs:{href:"#form-表单数据存储到上层组件"}},[t._v("form 表单数据存储到上层组件")])]),e("li",[e("a",{attrs:{href:"#warning-antd-upload-value-is-not-a-valid-prop-do-you-mean-filelist"}},[t._v("Warning: [antd: Upload] value is not a valid prop, do you mean fileList?")])]),e("li",[e("a",{attrs:{href:"#unhandled-rejection-typeerror-object-is-not-a-function"}},[t._v("Unhandled Rejection (TypeError): Object(...) is not a function")])]),e("li",[e("a",{attrs:{href:"#使用-upload-组件上传图片提示-uncaught-error-must-set-key-for-rc-animate-children"}},[t._v("使用 upload 组件上传图片提示：Uncaught Error: must set key for "),e("rc-animate",[t._v(" children")])],1)]),e("li",[e("a",{attrs:{href:"#error-too-many-re-renders-react-limits-the-number-of-renders-to-prevent-an-infinite-loop"}},[t._v("Error: Too many re-renders. React limits the number of renders to prevent an infinite loop.")])]),e("li",[e("a",{attrs:{href:"#自定义表单控件"}},[t._v("自定义表单控件")])]),e("li",[e("a",{attrs:{href:"#usemodel-是否会触发-redux-插件"}},[t._v("useModel 是否会触发 redux 插件")])]),e("li",[e("a",{attrs:{href:"#给定深层数据-id-tree-结构定位"}},[t._v("给定深层数据 id，tree 结构定位")])]),e("li",[e("a",{attrs:{href:"#antd-官方-dragger-丢失文件"}},[t._v("antd 官方 dragger 丢失文件")])]),e("li",[e("a",{attrs:{href:"#useeffect-函数惰性-绑定函数记忆的可以是旧的依赖值"}},[t._v("useEffect 函数惰性，绑定函数记忆的可以是旧的依赖值")])]),e("li",[e("a",{attrs:{href:"#切换素材时-form-item-下发的-value-不更新-故改为手动传"}},[t._v("切换素材时，Form.item 下发的 value 不更新，故改为手动传")])]),e("li",[e("a",{attrs:{href:"#react-props-默认值使用非基础类型-引起不必要更新"}},[t._v("react props 默认值使用非基础类型 引起不必要更新")])]),e("li",[e("a",{attrs:{href:"#failed-to-execute-clone-on-response-umi"}},[t._v("Failed to execute 'clone' on 'Response' umi")])]),e("li",[e("a",{attrs:{href:"#antd-layout"}},[t._v("antd layout")])]),e("li",[e("a",{attrs:{href:"#menu"}},[t._v("menu")])]),e("li",[e("a",{attrs:{href:"#usemodel-持久化-浅拷贝数据里如果有对象-对象经修改-会保持"}},[t._v("useModel 持久化，浅拷贝数据里如果有对象 对象经修改，会保持")])]),e("li",[e("a",{attrs:{href:"#异步权限"}},[t._v("异步权限")])]),e("li",[e("a",{attrs:{href:"#关闭菜单国际化"}},[t._v("关闭菜单国际化")])]),e("li",[e("a",{attrs:{href:"#对象意外修改"}},[t._v("对象意外修改")])]),e("li",[e("a",{attrs:{href:"#总结自己使用过的-hooks-数据流方式-掘金-https-juejin-im-post-5e9148f76fb9a03c8966daf8"}},[t._v("总结自己使用过的 Hooks 数据流方式 - 掘金")])]),e("li",[e("a",{attrs:{href:"#css-module-局部作用域"}},[t._v("CSS module 局部作用域")])]),e("li",[e("a",{attrs:{href:"#权限控制"}},[t._v("权限控制")])]),e("li",[e("a",{attrs:{href:"#模块模式"}},[t._v("模块模式")])]),e("li",[e("a",{attrs:{href:"#记忆-memo"}},[t._v("记忆 memo")])]),e("li",[e("a",{attrs:{href:"#file-type-不可靠"}},[t._v("file.type 不可靠")])]),e("li",[e("a",{attrs:{href:"#动态样式"}},[t._v("动态样式")])]),e("li",[e("a",{attrs:{href:"#undefined-未赋值-null-值为空"}},[t._v("undefined 未赋值 null 值为空")])]),e("li",[e("a",{attrs:{href:"#less-alpha"}},[t._v("less alpha")])]),e("li",[e("a",{attrs:{href:"#antd-日期选择-预设日期"}},[t._v("antd 日期选择 预设日期")])]),e("li",[e("a",{attrs:{href:"#特殊选中需求"}},[t._v("特殊选中需求")])]),e("li",[e("a",{attrs:{href:"#使用-传递对象-修改时-注意提前-clone-不要影响原对象"}},[t._v("使用 传递对象，修改时，注意提前 clone，不要影响原对象")])]),e("li",[e("a",{attrs:{href:"#审核自动切换"}},[t._v("审核自动切换")])]),e("li",[e("a",{attrs:{href:"#css-hover-不适用内容有间距场景"}},[t._v("css hover 不适用内容有间距场景")])]),e("li",[e("a",{attrs:{href:"#antd-日期组件返回的时间是当时时间"}},[t._v("antd 日期组件返回的时间是当时时间")])]),e("li",[e("a",{attrs:{href:"#replace-designlayout-with-prolayout"}},[t._v("replace DesignLayout with ProLayout")])]),e("li",[e("a",{attrs:{href:"#权限处理"}},[t._v("权限处理")])]),e("li",[e("a",{attrs:{href:"#ts-demo"}},[t._v("ts demo")])]),e("li",[e("a",{attrs:{href:"#percent-事件频繁导致-多个组件过度-render"}},[t._v("percent 事件频繁导致 多个组件过度 render")])]),e("li",[e("a",{attrs:{href:"#跨代数据共享"}},[t._v("跨代数据共享")])]),e("li",[e("a",{attrs:{href:"#我是如何无缝的扩展-antd-组件-知乎-https-zhuanlan-zhihu-com-p-111850451"}},[t._v("我是如何无缝的扩展 antd 组件 - 知乎")])]),e("li",[e("a",{attrs:{href:"#ant-design-repo"}},[t._v("ant design repo")])]),e("li",[e("a",{attrs:{href:"#高阶组件"}},[t._v("高阶组件")])]),e("li",[e("a",{attrs:{href:"#antd-强烈风格-不适合较大定制"}},[t._v("Antd 强烈风格，不适合较大定制")])]),e("li",[e("a",{attrs:{href:"#线上-设计素材浏览有个-bug-切换二级菜单时-列表数据某些场景会互相影响"}},[t._v("线上 设计素材浏览有个 bug，切换二级菜单时，列表数据某些场景会互相影响")])]),e("li",[e("a",{attrs:{href:"#图标替换"}},[t._v("图标替换")])]),e("li",[e("a",{attrs:{href:"#require-文件不存在"}},[t._v("require 文件不存在")])]),e("li",[e("a",{attrs:{href:"#react-如何点击页面空白处关闭弹窗"}},[t._v("React 如何点击页面空白处关闭弹窗")])]),e("li",[e("a",{attrs:{href:"#umi-env-页面内不要解构-process-env"}},[t._v("umi env 页面内不要解构 process.env")])]),e("li",[e("a",{attrs:{href:"#form-field-避免下标访问-不利于扩展"}},[t._v("form field 避免下标访问，不利于扩展")])]),e("li",[e("a",{attrs:{href:"#公共组件样式"}},[t._v("公共组件样式")])]),e("li",[e("a",{attrs:{href:"#husky"}},[t._v("husky")])]),e("li",[e("a",{attrs:{href:"#antd-range-picker-blur-hide-如何实现"}},[t._v("antd range-picker blur hide 如何实现")])]),e("li",[e("a",{attrs:{href:"#stylelint-异常输出"}},[t._v("stylelint 异常输出")])]),e("li",[e("a",{attrs:{href:"#umi-request-requesttype-生效条件"}},[t._v("umi-request requestType 生效条件")])]),e("li",[e("a",{attrs:{href:"#createportal-左右切换时-生成多余-div"}},[t._v("createPortal，左右切换时，生成多余 div")])]),e("li",[e("a",{attrs:{href:"#todo-material-lib"}},[t._v("todo material-lib")])]),e("li",[e("a",{attrs:{href:"#react-hooks-四-immutable-知乎-https-zhuanlan-zhihu-com-p-163590288"}},[t._v("React Hooks(四): immutable - 知乎")])]),e("li",[e("a",{attrs:{href:"#caches-操作要求-https"}},[t._v("caches 操作要求 https")])]),e("li",[e("a",{attrs:{href:"#请求优化-token-是否存在或在有效期内"}},[t._v("请求优化，token 是否存在或在有效期内")])]),e("li",[e("a",{attrs:{href:"#static-proptypes"}},[t._v("static propTypes")])]),e("li",[e("a",{attrs:{href:"#何时单独用-xhr"}},[t._v("何时单独用 xhr")])]),e("li",[e("a",{attrs:{href:"#immerjs-优于使用-lodash-创建拷贝"}},[t._v("ImmerJS 优于使用 lodash 创建拷贝")])]),e("li",[e("a",{attrs:{href:"#竞速-race"}},[t._v("竞速 race")])]),e("li",[e("a",{attrs:{href:"#upload-drag-扩大区域"}},[t._v("upload drag 扩大区域")])]),e("li",[e("a",{attrs:{href:"#定位代码最快方式"}},[t._v("定位代码最快方式")])]),e("li",[e("a",{attrs:{href:"#开发阶段-eslint-影响初期效率"}},[t._v("开发阶段 eslint 影响初期效率")])]),e("li",[e("a",{attrs:{href:"#临时禁用-lint"}},[t._v("临时禁用 lint")])]),e("li",[e("a",{attrs:{href:"#空数组约定"}},[t._v("空数组约定")])]),e("li",[e("a",{attrs:{href:"#map-key"}},[t._v("map key")])]),e("li",[e("a",{attrs:{href:"#hmr-fast-refresh"}},[t._v("HMR => Fast Refresh")])]),e("li",[e("a",{attrs:{href:"#dan-note"}},[t._v("dan note")])]),e("li",[e("a",{attrs:{href:"#constructor-里发请求"}},[t._v("constructor 里发请求？")])]),e("li",[e("a",{attrs:{href:"#自定义-tag"}},[t._v("自定义 Tag")])]),e("li",[e("a",{attrs:{href:"#jsx-map-join-reduce"}},[t._v("jsx map join => reduce")])]),e("li",[e("a",{attrs:{href:"#pages-重复渲染-尤其-audio-有动画明显"}},[t._v("pages 重复渲染，尤其 audio 有动画明显")])]),e("li",[e("a",{attrs:{href:"#effect-相关函数处理"}},[t._v("effect 相关函数处理：")])]),e("li",[e("a",{attrs:{href:"#modal-router"}},[t._v("modal router")])]),e("li",[e("a",{attrs:{href:"#鼠标进入触发-lottie"}},[t._v("鼠标进入触发 lottie")])]),e("li",[e("a",{attrs:{href:"#antd-table"}},[t._v("antd table")])]),e("li",[e("a",{attrs:{href:"#state-派生自-prop-组件内又修改-state"}},[t._v("state 派生自 prop，组件内又修改 state")])]),e("li",[e("a",{attrs:{href:"#第二层弹窗问题"}},[t._v("第二层弹窗问题")])]),e("li",[e("a",{attrs:{href:"#redux-dev-tool-crash"}},[t._v("redux dev tool crash")])]),e("li",[e("a",{attrs:{href:"#无效组件"}},[t._v("无效组件")])]),e("li",[e("a",{attrs:{href:"#点击文本复制"}},[t._v("点击文本复制")])]),e("li",[e("a",{attrs:{href:"#半受控-props-变化-需要更新部分-state"}},[t._v("半受控，props 变化，需要更新部分 state")])]),e("li",[e("a",{attrs:{href:"#缓存计算"}},[t._v("缓存计算")])]),e("li",[e("a",{attrs:{href:"#ripple-btn"}},[t._v("ripple btn")])]),e("li",[e("a",{attrs:{href:"#跨组件引用可变对象"}},[t._v("跨组件引用可变对象")])]),e("li",[e("a",{attrs:{href:"#webpack-cpu占用高"}},[t._v("webpack CPU占用高")])]),e("li",[e("a",{attrs:{href:"#表格踩坑-最佳实践"}},[t._v("表格踩坑，最佳实践")])]),e("li",[e("a",{attrs:{href:"#url-hash-变化-如何更新页面"}},[t._v("URL hash 变化，如何更新页面")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"页面结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#页面结构"}},[t._v("#")]),t._v(" 页面结构")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("page => connect\n\ncomponents\n\ndva model\n")])])]),e("h2",{attrs:{id:"注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[t._v("#")]),t._v(" 注意")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("不能缺少文件，文件不能为空")]),t._v(" "),e("p",[t._v("样式占位")]),t._v(" "),e("div",{staticClass:"language-css extra-class"},[e("pre",{pre:!0,attrs:{class:"language-css"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".xx")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" initial"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("modal 可以用别的页面复制一个")])]),t._v(" "),e("li",[e("p",[t._v("routes -> config -> index")])])]),t._v(" "),e("h2",{attrs:{id:"page-bare-template"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#page-bare-template"}},[t._v("#")]),t._v(" page bare template")]),t._v(" "),e("ol",[e("li",[t._v("export function")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// import './index.less';")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// import styles from './index.less';")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Comp")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("detail hello"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" Comp\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("export component")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// import styles from './index.less';")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" propTypes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PropTypes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isRequired"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  url"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PropTypes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("string"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isRequired"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  text"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PropTypes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("string\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultProps "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  text"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello World'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Comp")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  state "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    hello"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hello "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h1"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("hello"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("h1"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nComp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propTypes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" propTypes\nComp"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultProps "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" defaultProps\n")])])]),e("ul",[e("li",[e("p",[t._v("提示：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Each record in table should have a unique `key` prop,or set `rowKey` to an unique primary key. #7623\n")])])]),e("p",[t._v("mock 数据，id 重了")])]),t._v(" "),e("li",[e("p",[t._v("全局安装 "),e("code",[t._v("yarn global add typescript")])])])]),t._v(" "),e("h2",{attrs:{id:"typescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#typescript"}},[t._v("#")]),t._v(" TypeScript")]),t._v(" "),e("p",[t._v("校验：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("antd 引入应该在 interface 之前")])]),t._v(" "),e("li",[e("p",[t._v("命名不要重名")]),t._v(" "),e("p",[t._v("组件 -> model(数据) -> interface(TS)")]),t._v(" "),e("p",[t._v("dva model 小写")]),t._v(" "),e("p",[t._v("interface 单独命名，辅助性的，重要性低")]),t._v(" "),e("p",[t._v("组件名只定义一次，没啥问题")]),t._v(" "),e("p",[t._v("批量重命名踩坑，替换时正则需要使用大小写敏感")])]),t._v(" "),e("li",[e("p",[t._v("event 定义")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onUpdatingServerName")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChangeEvent"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("HTMLInputElement"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newserverName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/44321326/property-value-does-not-exist-on-type-eventtarget-in-typescript/44321394",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript - Property 'value' does not exist on type EventTarget in TypeScript - Stack Overflow"),e("OutboundLink")],1)])])]),t._v(" "),e("h3",{attrs:{id:"json-快速生成-ts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#json-快速生成-ts"}},[t._v("#")]),t._v(" JSON 快速生成 TS")]),t._v(" "),e("ol",[e("li",[t._v("vscode 新建文件")]),t._v(" "),e("li",[t._v("复制有效的 JSON，需要带上括号")]),t._v(" "),e("li",[t._v("执行"),e("code",[t._v("Paste JSON as TYPE")])])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("any 慎用，那什么时候用呢？a. 用户输入 b. 不知道数组内数据类型")])]),t._v(" "),e("li",[e("p",[t._v("拆分粒度")])]),t._v(" "),e("li",[e("p",[t._v("render 不能用 async，不能 setState")])]),t._v(" "),e("li",[e("p",[t._v("?")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  curPaymentMethod "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("AliPayModal\n      visible"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("modalVisible"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      onCancel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("closeModal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      onClick"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onPayDone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("WechatPayModal\n      visible"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("modalVisible"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      onCancel"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("closeModal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      onClick"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onPayDone"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      qrCodeStr"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hahajl"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("blockquote",[e("p",[t._v("Uncaught Invariant Violation: Objects are not valid as a React child (found: [object Promise]). If you meant to render a collection of children, use an array instead.\nin WechatPayModal (created by Pay)")])])]),t._v(" "),e("li",[e("p",[t._v("路由 components 与子 routes 互 chi？")])]),t._v(" "),e("li",[e("p",[t._v("func comp 在父层处理 async，请求后或 dismount")])]),t._v(" "),e("li",[e("p",[t._v("antd ts 在 node_modules 中找")])]),t._v(" "),e("li",[e("p",[t._v("只检验 stashed")])]),t._v(" "),e("li",[e("p",[t._v("ts 函数要写明返回")])])]),t._v(" "),e("h2",{attrs:{id:"影响效率因素"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#影响效率因素"}},[t._v("#")]),t._v(" 影响效率因素")]),t._v(" "),e("ul",[e("li",[t._v("熟练手写 ts，类型补全或自定义 snip")]),t._v(" "),e("li",[t._v("dom 闭合补全 > emmet 可以用")]),t._v(" "),e("li",[t._v("timeout ts number window.setTimeout")]),t._v(" "),e("li",[t._v("obj / array 如果有内容，内容也要 ts 定义")]),t._v(" "),e("li",[t._v("serve:no-mock")])]),t._v(" "),e("h2",{attrs:{id:"新建页面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建页面"}},[t._v("#")]),t._v(" 新建页面")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("验证路由配置是否正确，最小步骤")]),t._v(" "),e("ol",[e("li",[t._v("add route")]),t._v(" "),e("li",[t._v("add pages index.js，不要创建其它文件，会报错")])])]),t._v(" "),e("li",[e("p",[t._v("新建 service，确认需要使用的全部接口，有多少接口写多少 model")])]),t._v(" "),e("li",[e("p",[t._v("新建 model，写这个时与 service side by side，入参需要看下 showDoc")])])]),t._v(" "),e("h2",{attrs:{id:"表格实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#表格实现"}},[t._v("#")]),t._v(" 表格实现")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('~/Projects/work/AiJianZiPlatform/src/routes/Useradmin/BSchool/b-school.js\n\nCard(title="filter node") // col - formItem - select\n  StandardTable\n')])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("SearchList")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("~/Projects/work/ajz-admin-agency/src/pages/student-manage/student-account/index.tsx\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("自己拼装\nsearchList 上面不能加东西\ncourse-limit")])]),t._v(" "),e("h2",{attrs:{id:"路径-routes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#路径-routes"}},[t._v("#")]),t._v(" 路径 routes")]),t._v(" "),e("ol",[e("li",[t._v("下级必须是上级子路径")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("提交操作，总是要考虑防止过快多次点击")])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/55265604/uncaught-invariant-violation-too-many-re-renders-react-limits-the-number-of-re",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript - Uncaught Invariant Violation: Too many re-renders. React limits the number of renders to prevent an infinite loop - Stack Overflow"),e("OutboundLink")],1),t._v("\nsetState 被直接调用了")])]),t._v(" "),e("li",[e("p",[t._v("classNames 样式类合并")])]),t._v(" "),e("li",[e("p",[t._v("TS 不处理提交会影响别人，一定要处理、熟悉，提高效率")])]),t._v(" "),e("li",[e("p",[t._v("原型、设计，找别人确认，有疑问要早问，后续改成本高")])]),t._v(" "),e("li",[e("p",[t._v("我们把这个版本的 identity 函数叫做泛型，因为它可以适用于多个类型。 不同于使用 any，它不会丢失信息，像第一个例子那像保持准确性，传入数值类型并返回数值类型。")])])]),t._v(" "),e("h2",{attrs:{id:"connect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connect"}},[t._v("#")]),t._v(" connect")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mapStateToProps")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ConnectState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" classes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" loading "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" state\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    classes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    loading"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" loading"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("queryBaseStatApi"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    saveLoading"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" loading"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effects"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("createClassApi"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mapStateToProps"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Page"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("React.FC 新类型，可以处理 state")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" React "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IProps")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... props interface")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// NEW syntax for typing function components")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MyNewComponent"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FC")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IProps"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" React "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" FunctionComponent"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("FC")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The useState hook")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("hooks 返回 return undefined or a function")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://levelup.gitconnected.com/usetypescript-a-complete-guide-to-react-hooks-and-typescript-db1858d1fb9c",target:"_blank",rel:"noopener noreferrer"}},[t._v("useTypescript — A Complete Guide to React Hooks and TypeScript"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("max-length 会阻止输入，进而不触发验证提示")]),t._v(" "),e("p",[t._v("searchList ts 定义来自，tableColumns dataIndex")]),t._v(" "),e("p",[t._v("ts 参数用尖括号")]),t._v(" "),e("p",[t._v("ts 单独文件定义，跳转很方便")]),t._v(" "),e("p",[t._v("反击自动化")]),t._v(" "),e("p",[t._v("加验证头，能解决插件下载吗？\n"),e("a",{attrs:{href:"https://github.com/videojs/http-streaming/issues/357#issuecomment-374889346",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prevent downloading encrypted content with Firefox video download helper extension · Issue #357 · videojs/http-streaming"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"解构对象内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解构对象内容"}},[t._v("#")]),t._v(" 解构对象内容")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" body "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" body"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" CreateOperation "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"checkbox-group"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#checkbox-group"}},[t._v("#")]),t._v(" checkbox.group")]),t._v(" "),e("p",[t._v("比较特殊，需要在 group 级控制子内容 checked 属性")]),t._v(" "),e("p",[t._v("defaultValue 设置后就不再变，列表条目切换会相互影响")]),t._v(" "),e("p",[e("s",[t._v("value 设置后，点击状态不变，需要 onChange 把变化向上传递，再传回响应变化")])]),t._v(" "),e("h2",{attrs:{id:"classnames"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#classnames"}},[t._v("#")]),t._v(" classNames")]),t._v(" "),e("p",[t._v("这里 styles.disabled 是动态类名，要用数组下标方式包起来。字符串不需要")]),t._v(" "),e("p",[e("code",[t._v("<a className={classNames({ [styles.disabled]: !haveRoles })}")])]),t._v(" "),e("h2",{attrs:{id:"umi-requesttype-默认是-json-可选-form"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#umi-requesttype-默认是-json-可选-form"}},[t._v("#")]),t._v(" umi requestType 默认是 json，可选 form")]),t._v(" "),e("h2",{attrs:{id:"iconfont-cn-use-in-antd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#iconfont-cn-use-in-antd"}},[t._v("#")]),t._v(" iconfont.cn use in antd")]),t._v(" "),e("p",[t._v("createFromIconfontCN")]),t._v(" "),e("h2",{attrs:{id:"hover-exclude"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hover-exclude"}},[t._v("#")]),t._v(" hover exclude")]),t._v(" "),e("p",[t._v("Pointer events to the rescue!")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://techstacker.com/css-remove-hover-pointer-events-none/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to ignore Hover/Mouseover events on specific element in CSS with the pointer-events property – Techstacker"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"useeffect-反复执行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-反复执行"}},[t._v("#")]),t._v(" useEffect 反复执行")]),t._v(" "),e("p",[t._v("trick 第二参数不变，只执行一次")]),t._v(" "),e("p",[t._v("配合第二参数、返回函数，相当于三个生命周期")]),t._v(" "),e("h2",{attrs:{id:"数据联动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据联动"}},[t._v("#")]),t._v(" 数据联动")]),t._v(" "),e("ul",[e("li",[t._v("输入关键字 提交")]),t._v(" "),e("li",[t._v("标签选择 选中 提交\n"),e("ul",[e("li",[t._v("选中 不支持 反选")]),t._v(" "),e("li",[t._v("仅素材类型 限单选")])])]),t._v(" "),e("li",[t._v("筛选 过滤回显 数据包含类型关系\n"),e("ul",[e("li",[t._v("顺序要求")]),t._v(" "),e("li",[t._v("删除、如何修改对应值")])])])]),t._v(" "),e("p",[t._v("同级组件需要伟递事件，只能依靠 model 了？")]),t._v(" "),e("p",[t._v("searchParams")]),t._v(" "),e("p",[t._v("Function components cannot be given refs")]),t._v(" "),e("h2",{attrs:{id:"antd-form-onfinished"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-form-onfinished"}},[t._v("#")]),t._v(" antd form onFinished")]),t._v(" "),e("p",[t._v("通过时提交")]),t._v(" "),e("h2",{attrs:{id:"hook-state-拆分合并原则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hook-state-拆分合并原则"}},[t._v("#")]),t._v(" hook state 拆分合并原则")]),t._v(" "),e("ol",[e("li",[t._v("将完全不相关的 state 拆分为多组 state。比如 size 和 position。")]),t._v(" "),e("li",[t._v("如果某些 state 是相互关联的，或者需要一起发生改变，就可以把它们合并为一组 state。比如 left 和 top。")])]),t._v(" "),e("p",[t._v("依赖数组依赖的值最好不要超过 3 个，否则会导致代码会难以维护。\n如果发现依赖数组依赖的值过多，我们应该采取一些方法来减少它。\n去掉不必要的依赖。\n将 Hook 拆分为更小的单元，每个 Hook 依赖于各自的依赖数组。\n通过合并相关的 state，将多个依赖值聚合为一个。\n通过 setState 回调函数获取最新的 state，以减少外部依赖。\n通过 ref 来读取可变变量的值，不过需要注意控制修改它的途径。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/85969406",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Hooks 你真的用对了吗？ - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"可以在函数内直接申明普通常量或普通函数吗"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可以在函数内直接申明普通常量或普通函数吗"}},[t._v("#")]),t._v(" 可以在函数内直接申明普通常量或普通函数吗？")]),t._v(" "),e("p",[t._v("可以但不建议，Function Component 每次渲染都会重新执行，常量推荐放到函数外层避免性能问题，函数推荐使用 useCallback 申明。")]),t._v(" "),e("p",[t._v("简单的组件间通信使用透传 Props 变量的方式，而频繁组件间通信使用 React.useContext")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/81752821",target:"_blank",rel:"noopener noreferrer"}},[t._v("精读《React Hooks 最佳实践》 - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/94949118",target:"_blank",rel:"noopener noreferrer"}},[t._v("《蚂蚁前端研发最佳实践》文字稿 - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("hook class 转换，多个 render 函数，里面是 return")]),t._v(" "),e("p",[t._v("getDerivedStateFromProps 介于 contructor 和 render 之间，响应 props 变化，返回 state")]),t._v(" "),e("h2",{attrs:{id:"useeffect-不要用-async-use-usecallback-instead"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-不要用-async-use-usecallback-instead"}},[t._v("#")]),t._v(" useEffect 不要用 async, use useCallback instead")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/53332321/react-hook-warnings-for-async-function-in-useeffect-useeffect-function-must-ret",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript - React Hook Warnings for async function in useEffect: useEffect function must return a cleanup function or nothing - Stack Overflow"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("useEffect 应该什么都不返回，而 async 隐式返回 promise")]),t._v(" "),e("h2",{attrs:{id:"list-virtualized"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#list-virtualized"}},[t._v("#")]),t._v(" list virtualized")]),t._v(" "),e("p",[t._v("为大数据列表，性能优化，非必须")]),t._v(" "),e("h2",{attrs:{id:"生命周期模拟-useeffect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生命周期模拟-useeffect"}},[t._v("#")]),t._v(" 生命周期模拟 useEffect")]),t._v(" "),e("p",[t._v("因为生命周期处理的都是副作用，在 hook 里就是用 useEffect")]),t._v(" "),e("p",[t._v("可以写多个 useEffect，给 effect fn 命名以区分职责")]),t._v(" "),e("p",[t._v("useEffect 每次渲染（DOM 更新）完执行 effect fn")]),t._v(" "),e("blockquote",[e("p",[t._v("不用再去考虑“挂载”还是“更新”。React 保证了每次运行 effect 的同时，DOM 都已经更新完毕")])]),t._v(" "),e("p",[t._v("生命周期对应 useEffect 用法：")]),t._v(" "),e("ul",[e("li",[t._v("componentDidMount []")]),t._v(" "),e("li",[t._v("componentDidUpdate [states.count | props.count] 仅变化时调用，减少不必要执行")]),t._v(" "),e("li",[t._v("componentWillUnmount return function cleanup")])]),t._v(" "),e("p",[t._v("getDerivedStateFromProps 渲染中赋值，如果需要对比差异，可以增加缓存值")]),t._v(" "),e("p",[t._v("shouldComponentUpdate React.memo")]),t._v(" "),e("p",[t._v("什么是副作用，数据获取，browser api")]),t._v(" "),e("p",[t._v("render （提升成）函数本身，函数组件就是一个 render 函数")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://juejin.im/post/5d3db4da518825016f644561",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hooks 与 React 生命周期的关系 - 掘金"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("hook 在最顶层调用，如果需要有条件执行，在 hook 内部判断")]),t._v(" "),e("h2",{attrs:{id:"calc-px-计算"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#calc-px-计算"}},[t._v("#")]),t._v(" calc px 计算")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/42548630/css3-calc-minus-vh-with-pixel/42556033",target:"_blank",rel:"noopener noreferrer"}},[t._v("css - Css3 calc minus vh with pixel - Stack Overflow"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"播放器能支持哪些文件类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#播放器能支持哪些文件类型"}},[t._v("#")]),t._v(" 播放器能支持哪些文件类型")]),t._v(" "),e("p",[t._v("第三方播放器取决于浏览器支持")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Containers",target:"_blank",rel:"noopener noreferrer"}},[t._v("Media container formats (file types) - Web media technologies | MDN"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"使用多个-usestate-或-usereducer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用多个-usestate-或-usereducer"}},[t._v("#")]),t._v(" 使用多个 useState 或 useReducer")]),t._v(" "),e("p",[t._v("Should I use multiple useState or useReducer?")]),t._v(" "),e("p",[t._v("For independent things (isHovering and textInput), multiple useState.\n独立状态，使用多个 useState")]),t._v(" "),e("p",[t._v("For things that change together (isFetching and fetchedItems), or if their next state depends on previous (todos), I prefer useReducer.\n状态一起改变，或状态前后依赖，更倾向用 useReducer")]),t._v(" "),e("h2",{attrs:{id:"复杂-state-逻辑建议用-react-自带-usereducer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#复杂-state-逻辑建议用-react-自带-usereducer"}},[t._v("#")]),t._v(" 复杂 state 逻辑建议用 React 自带 useReducer")]),t._v(" "),e("p",[t._v("如果从组件状态上升到应用状态，用 Redux\nredux 不仅是状态管理，是一种架构\n出了 bug，好定位")]),t._v(" "),e("blockquote",[e("p",[t._v("我新开发的应用几乎都用到了 Redux，以前做选择是很简单的：几乎所有项目都用 Redux 就行了！\n当你向 Redux 状态添加内容时，加进来的是一个抽象层以及随之而来的复杂度。\n换句话说，你大可放心使用 Redux，但是每次用到它时应该有合适的理由。")])]),t._v(" "),e("p",[t._v("使用理由：")]),t._v(" "),e("ul",[e("li",[t._v("使用网络之类的 I/O 或设备 API。")]),t._v(" "),e("li",[t._v("保存或加载状态。")]),t._v(" "),e("li",[t._v("与非子组件共享其状态。 （如素材库的查找参数，多个组件更新，可以做为一个抽象层，不要跟别的逻辑混在一起）")]),t._v(" "),e("li",[t._v("需要与应用程序的其他部分共享业务逻辑或数据处理过程。")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://medium.com/javascript-scene/do-react-hooks-replace-redux-210bab340672",target:"_blank",rel:"noopener noreferrer"}},[t._v("Do React Hooks Replace Redux? - JavaScript Scene - Medium"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"自定义-hook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义-hook"}},[t._v("#")]),t._v(" 自定义 hook")]),t._v(" "),e("ul",[e("li",[t._v("逻辑抽象")]),t._v(" "),e("li",[t._v("复用\n"),e("a",{attrs:{href:"https://juejin.im/post/5df8b978e51d45584006e1f5",target:"_blank",rel:"noopener noreferrer"}},[t._v("基用 React Hooks + Antd 快速实现一个列表页 - 掘金"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"rangepicker-没有样式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rangepicker-没有样式"}},[t._v("#")]),t._v(" RangePicker 没有样式")]),t._v(" "),e("p",[t._v("重启服务后正常")]),t._v(" "),e("h2",{attrs:{id:"dva-使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dva-使用"}},[t._v("#")]),t._v(" dva 使用")]),t._v(" "),e("h2",{attrs:{id:"antd-权限组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-权限组件"}},[t._v("#")]),t._v(" antd 权限组件")]),t._v(" "),e("ul",[e("li",[t._v("layout 级的 authority 不起作用？")]),t._v(" "),e("li",[t._v("可以嵌套 layout，SecurityLayout > BasicLayout > page")])]),t._v(" "),e("h2",{attrs:{id:"hook-dva-snip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hook-dva-snip"}},[t._v("#")]),t._v(" hook dva snip")]),t._v(" "),e("h2",{attrs:{id:"umi-ui"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#umi-ui"}},[t._v("#")]),t._v(" umi ui")]),t._v(" "),e("p",[t._v("可视化配置工具，用处不大\n查看模板可访问 "),e("a",{attrs:{href:"https://preview.pro.ant.design/dashboard/analysis",target:"_blank",rel:"noopener noreferrer"}},[e("OutboundLink")],1),t._v("\n关闭参考"),e("code",[t._v("start:no-ui")]),t._v("命令")]),t._v(" "),e("h2",{attrs:{id:"自定义左侧菜单-icon"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义左侧菜单-icon"}},[t._v("#")]),t._v(" 自定义左侧菜单 icon")]),t._v(" "),e("ol",[e("li",[t._v("defaultSettings iconfontUrl")]),t._v(" "),e("li",[t._v("修改 router config")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://prolayout.ant.design/",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置 api 介绍"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"动态-menu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动态-menu"}},[t._v("#")]),t._v(" 动态 menu")]),t._v(" "),e("p",[t._v("setMenuData")]),t._v(" "),e("h2",{attrs:{id:"参数路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数路由"}},[t._v("#")]),t._v(" 参数路由")]),t._v(" "),e("h2",{attrs:{id:"layouts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#layouts"}},[t._v("#")]),t._v(" layouts")]),t._v(" "),e("p",[t._v("UserLayout 就是上方有个 logo、下方留空，如给登录使用")]),t._v(" "),e("h2",{attrs:{id:"视图无关的数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#视图无关的数据"}},[t._v("#")]),t._v(" 视图无关的数据")]),t._v(" "),e("p",[t._v("定义在 RFC 外面")]),t._v(" "),e("h2",{attrs:{id:"re-render"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#re-render"}},[t._v("#")]),t._v(" re-render")]),t._v(" "),e("p",[t._v("每次 re-render，"),e("strong",[t._v("异步函数")]),t._v("会创建新实例，原始版本不再指向正确的实例")]),t._v(" "),e("p",[t._v("使用 useCallback，并提供依赖值")]),t._v(" "),e("h2",{attrs:{id:"why-mapstate-mapdispatch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#why-mapstate-mapdispatch"}},[t._v("#")]),t._v(" why mapState mapDispatch")]),t._v(" "),e("p",[t._v("任何能在组件外以 redux action 方式生存的异步业务逻辑，考虑到使操作不受组件生命周期影响，仅定义为容器的 mapDispatchToProps 并传递给组件，这样意味着你的组件可免除异步逻辑、而变得相当简单，业务逻辑不再与视图紧耦合")]),t._v(" "),e("p",[t._v("展示组件唯一依赖来源 prop，不关心数据怎么来、不关心什么是 dispatch\n"),e("a",{attrs:{href:"https://stackoverflow.com/questions/39419237/what-is-mapdispatchtoprops",target:"_blank",rel:"noopener noreferrer"}},[t._v("reactjs - What is mapDispatchToProps? - Stack Overflow"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"容器组件模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器组件模式"}},[t._v("#")]),t._v(" 容器组件模式")]),t._v(" "),e("p",[t._v("容器处理数据获取，然后渲染相应的子组件，就是这样")]),t._v(" "),e("p",[t._v("相应组件意味着同名，如 "),e("code",[t._v("StockWidgetContainer => StockWidget")])]),t._v(" "),e("p",[t._v("数据获取和渲染职责分离、渲染组件可复用，渲染组件依靠 PropTypes 显式失败")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://medium.com/@learnreact/container-components-c0e67432e005#.1a9j3w1jl",target:"_blank",rel:"noopener noreferrer"}},[t._v("Container Components - Learn React with chantastic - Medium"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"umi-简化数据流方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#umi-简化数据流方案"}},[t._v("#")]),t._v(" umi 简化数据流方案")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://umijs.org/zh-CN/plugins/plugin-model",target:"_blank",rel:"noopener noreferrer"}},[t._v("@umijs/plugin-model"),e("OutboundLink")],1),t._v("\n页面 pattern model/*"),e("em",[t._v("/")]),t._v(" 或 *.model.ts\npages/user/counter.model.js\npages/user/models/counter.js\nuseModel('user.counter')")]),t._v(" "),e("p",[t._v("namespace 小写命名，跟其它类型变量区分")]),t._v(" "),e("p",[t._v("有哪些 namespace 可用，编辑器会提示")]),t._v(" "),e("p",[t._v("发现还是全局请求了，意思是只支持全局，支持不同的放置位置")]),t._v(" "),e("p",[t._v("或者可以把方法导出去，只在需要的页面调用")]),t._v(" "),e("p",[t._v("https://github.com/umijs/umi/issues/5195#issuecomment-672527326\n"),e("a",{attrs:{href:"https://github.com/ant-design/ant-design-pro/issues/6605",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ant Design Pro V5 已经支持预览 · Issue #6605 · ant-design/ant-design-pro"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("对于轻量级的数据流我们都推荐这种方案。")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/103150605",target:"_blank",rel:"noopener noreferrer"}},[t._v("Umi Hooks - 助力拥抱 React Hooks - 知乎"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://juejin.im/post/5ee081e551882543221d8b42",target:"_blank",rel:"noopener noreferrer"}},[t._v("Umi Hooks 实用代码片段整理 - 掘金"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import {useMouse, useWindowSize, useScroll} from 'react-use'\n")])])]),e("h2",{attrs:{id:"class-组件不能用-hooks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#class-组件不能用-hooks"}},[t._v("#")]),t._v(" class 组件不能用 hooks")]),t._v(" "),e("blockquote",[e("p",[t._v("你可以用 hoc 包一层\n数据逻辑极端复杂时，用 class")])]),t._v(" "),e("p",[t._v("React hooks 我也在项目中使用了一段时间，确实有它的优势的地方但是好像也没你文章里说的这么好，它确实是将逻辑复用变得更简单纯粹，但是我平时业务开发的时候，复用的不只是逻辑，ui 也需要复用。所以平时封装的时候，封装你文中这种和业务结合交大的自定义 hook 会比较少，大多数时候还是会封装那种 ui 和状态并存的常规组件，当然为了兼容差异化 ui 需求，会通过 render props 配合默认 render，或者使用内部 Context 实现的 Compound component，来将组件拆离成合理的 ui 粒度，同时保留内部逻辑，通过这两种方式来满足你文中提到的差异化 ui 的需求。使用自定义 hook，感觉还是那种工具类型的更合适些")]),t._v(" "),e("h2",{attrs:{id:"form-表单数据存储到上层组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#form-表单数据存储到上层组件"}},[t._v("#")]),t._v(" form 表单数据存储到上层组件")]),t._v(" "),e("p",[t._v("fields")]),t._v(" "),e("h2",{attrs:{id:"warning-antd-upload-value-is-not-a-valid-prop-do-you-mean-filelist"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#warning-antd-upload-value-is-not-a-valid-prop-do-you-mean-filelist"}},[t._v("#")]),t._v(" Warning: [antd: Upload] "),e("code",[t._v("value")]),t._v(" is not a valid prop, do you mean "),e("code",[t._v("fileList")]),t._v("?")]),t._v(" "),e("p",[t._v("上传是比较特殊组件，放在 form 里，要特殊设置")]),t._v(" "),e("p",[t._v("需要同时使用?")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("valuePropName "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fileList'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指明特殊组件类型")]),t._v("\ngetValueFromEvent "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" normFile "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"unhandled-rejection-typeerror-object-is-not-a-function"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#unhandled-rejection-typeerror-object-is-not-a-function"}},[t._v("#")]),t._v(" Unhandled Rejection (TypeError): Object(...) is not a function")]),t._v(" "),e("p",[t._v("function 没有导出")]),t._v(" "),e("h2",{attrs:{id:"使用-upload-组件上传图片提示-uncaught-error-must-set-key-for-children"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-upload-组件上传图片提示-uncaught-error-must-set-key-for-children"}},[t._v("#")]),t._v(" 使用 upload 组件上传图片提示：Uncaught Error: must set key for "),e("rc-animate",[t._v(" children")])],1),t._v(" "),e("p",[t._v("没有设置 uid")]),t._v(" "),e("h2",{attrs:{id:"error-too-many-re-renders-react-limits-the-number-of-renders-to-prevent-an-infinite-loop"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-too-many-re-renders-react-limits-the-number-of-renders-to-prevent-an-infinite-loop"}},[t._v("#")]),t._v(" Error: Too many re-renders. React limits the number of renders to prevent an infinite loop.")]),t._v(" "),e("p",[t._v("onClick={setSideIndex(index)}")]),t._v(" "),e("h2",{attrs:{id:"自定义表单控件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义表单控件"}},[t._v("#")]),t._v(" 自定义表单控件")]),t._v(" "),e("p",[t._v("完全受控")]),t._v(" "),e("div",{staticClass:"language-jsx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-jsx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dragger")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token spread"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("uploadProps")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("fileList")]),e("span",{pre:!0,attrs:{class:"token script language-javascript"}},[e("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("onChange")]),e("span",{pre:!0,attrs:{class:"token script language-javascript"}},[e("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onChange"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ant-upload-text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("拖入或点击添加工程文件")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dragger")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("h2",{attrs:{id:"usemodel-是否会触发-redux-插件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usemodel-是否会触发-redux-插件"}},[t._v("#")]),t._v(" useModel 是否会触发 redux 插件")]),t._v(" "),e("h2",{attrs:{id:"给定深层数据-id-tree-结构定位"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#给定深层数据-id-tree-结构定位"}},[t._v("#")]),t._v(" 给定深层数据 id，tree 结构定位")]),t._v(" "),e("p",[t._v("转换 tree 为 dict，并添加 parentId 和 index")]),t._v(" "),e("h2",{attrs:{id:"antd-官方-dragger-丢失文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-官方-dragger-丢失文件"}},[t._v("#")]),t._v(" antd 官方 dragger 丢失文件")]),t._v(" "),e("h2",{attrs:{id:"useeffect-函数惰性-绑定函数记忆的可以是旧的依赖值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#useeffect-函数惰性-绑定函数记忆的可以是旧的依赖值"}},[t._v("#")]),t._v(" useEffect 函数惰性，绑定函数记忆的可以是旧的依赖值")]),t._v(" "),e("ul",[e("li",[t._v("如果"),e("code",[t._v("useEffect")]),t._v("第一个函数参数直接或者间接用上某个变量，就请把这个变量放在"),e("code",[t._v("useEffect")]),t._v("的第二个参数里")]),t._v(" "),e("li",[t._v("使用"),e("code",[t._v("useEffect")]),t._v("，不要调用函数层次太多，代码应该一眼看清楚哪些函数会被"),e("code",[t._v("useEffect")]),t._v("调用。")]),t._v(" "),e("li",[t._v("只要是访问了"),e("code",[t._v("state")]),t._v("的函数，都应该用"),e("code",[t._v("useCallback")]),t._v("来保证 state 变化时生成一个新函数")])]),t._v(" "),e("blockquote",[e("p",[t._v("明确或潜在依赖 state 的函数，都需要指明依赖，以便在 re-render 时重新生成正确依赖的函数")])]),t._v(" "),e("h2",{attrs:{id:"切换素材时-form-item-下发的-value-不更新-故改为手动传"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#切换素材时-form-item-下发的-value-不更新-故改为手动传"}},[t._v("#")]),t._v(" 切换素材时，Form.item 下发的 value 不更新，故改为手动传")]),t._v(" "),e("h2",{attrs:{id:"react-props-默认值使用非基础类型-引起不必要更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-props-默认值使用非基础类型-引起不必要更新"}},[t._v("#")]),t._v(" react props 默认值使用非基础类型 引起不必要更新")]),t._v(" "),e("p",[t._v("因此使用 ES 默认值时，如果是非基础属性，建议放一个常量在外面：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EMPTY_ITEMS")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Foo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" items "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EMPTY_ITEMS")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Bar dataSource"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("items"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("https://www.zhihu.com/question/403260687/answer/1306841252")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://gist.github.com/otakustay/9b59153da2e124f0637732fef5c71c6a",target:"_blank",rel:"noopener noreferrer"}},[t._v("React hook to control table selection"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/55546844",target:"_blank",rel:"noopener noreferrer"}},[t._v("React 模式（中文版） - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"failed-to-execute-clone-on-response-umi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#failed-to-execute-clone-on-response-umi"}},[t._v("#")]),t._v(" Failed to execute 'clone' on 'Response' umi")]),t._v(" "),e("p",[t._v("要读取 resonse 里内容， clone 一份再处理")]),t._v(" "),e("h2",{attrs:{id:"antd-layout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-layout"}},[t._v("#")]),t._v(" antd layout")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("layouts/SecurityLayout  是否登录\n  component: '../layouts/BasicLayout', 权限\n  authority: ['admin', 'user'],\n")])])]),e("h2",{attrs:{id:"menu"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#menu"}},[t._v("#")]),t._v(" menu")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" menuList "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/design/personal'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'个人中心'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'personal'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    icon"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IconFont type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icon-mine"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/design/audit'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'审核中心'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'audit'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    icon"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("IconFont type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icon-mine"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("RenderMenuItem")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" icon "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Menu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Item key"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" icon"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("icon"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Link to"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Link"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Menu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Item"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  menuList"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RenderMenuItem data"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("item"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"usemodel-持久化-浅拷贝数据里如果有对象-对象经修改-会保持"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usemodel-持久化-浅拷贝数据里如果有对象-对象经修改-会保持"}},[t._v("#")]),t._v(" useModel 持久化，浅拷贝数据里如果有对象 对象经修改，会保持")]),t._v(" "),e("p",[t._v("解决，深拷贝后，再修改")]),t._v(" "),e("h2",{attrs:{id:"异步权限"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#异步权限"}},[t._v("#")]),t._v(" 异步权限")]),t._v(" "),e("ol",[e("li",[t._v("request loading")]),t._v(" "),e("li",[t._v("setAuthority 更新 localStorage")]),t._v(" "),e("li",[t._v("reloadAuthority")])]),t._v(" "),e("h2",{attrs:{id:"关闭菜单国际化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭菜单国际化"}},[t._v("#")]),t._v(" 关闭菜单国际化")]),t._v(" "),e("p",[t._v("defaultSettings")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("  menu"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    locale"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),e("h2",{attrs:{id:"对象意外修改"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#对象意外修改"}},[t._v("#")]),t._v(" 对象意外修改")]),t._v(" "),e("p",[t._v("pageNum 与需要响应更新列表数据的值分离")]),t._v(" "),e("h2",{attrs:{id:"总结自己使用过的-hooks-数据流方式-掘金"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#总结自己使用过的-hooks-数据流方式-掘金"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://juejin.im/post/5e9148f76fb9a03c8966daf8",target:"_blank",rel:"noopener noreferrer"}},[t._v("总结自己使用过的 Hooks 数据流方式 - 掘金"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/jamiebuilds/unstated-next",target:"_blank",rel:"noopener noreferrer"}},[t._v("jamiebuilds/unstated-next: 200 bytes to never think about React state management libraries ever again"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"css-module-局部作用域"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-module-局部作用域"}},[t._v("#")]),t._v(" CSS module 局部作用域")]),t._v(" "),e("p",[t._v("局部样式与覆盖 global")]),t._v(" "),e("p",[t._v("书写上与一般 CSS 无异")]),t._v(" "),e("p",[t._v("导入使用时有差异")]),t._v(" "),e("p",[t._v("global 即是用来声明传统的 class，方便混用。首先少写全局样式，其次使用时应该包裹起来")]),t._v(" "),e("div",{staticClass:"language-less extra-class"},[e("pre",{pre:!0,attrs:{class:"language-less"}},[e("code",[e("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".override-ant-btn")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v(":global(.ant-btn)")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("border-radius")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 16px"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[e("a",{attrs:{href:"https://antd-course.ulivz.com/customized_styles.html#%25E5%25AE%259A%25E4%25B9%2589%25E6%25A0%25B7%25E5%25BC%258F",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义样式 | Ant Design 实战教程"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"权限控制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#权限控制"}},[t._v("#")]),t._v(" 权限控制")]),t._v(" "),e("p",[t._v("对于权限控制，首先需要明白一点：“权限的真正控制都必须是在服务端负责的”。")]),t._v(" "),e("h2",{attrs:{id:"模块模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#模块模式"}},[t._v("#")]),t._v(" 模块模式")]),t._v(" "),e("p",[t._v("定义工具函数时，可以把需要的私有变量包起来，不污染 utils 等文件")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 除了 double 外界无法访问 a")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("double")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("realFn")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" a\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"记忆-memo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#记忆-memo"}},[t._v("#")]),t._v(" 记忆 memo")]),t._v(" "),e("ul",[e("li",[t._v("用数组或对象，将历史计算结果存储")]),t._v(" "),e("li",[t._v("实现方式，闭包。模式提炼")])]),t._v(" "),e("h2",{attrs:{id:"file-type-不可靠"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#file-type-不可靠"}},[t._v("#")]),t._v(" file.type 不可靠")]),t._v(" "),e("p",[t._v("有的文件类型，如 psd、rar，"),e("code",[t._v("file.type")]),t._v("值是"),e("code",[t._v('""')]),t._v("\n直接拿"),e("code",[t._v("file.name")]),t._v("扩展名判断比较好")]),t._v(" "),e("h2",{attrs:{id:"动态样式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动态样式"}},[t._v("#")]),t._v(" 动态样式")]),t._v(" "),e("p",[t._v("如"),e("code",[t._v("width")]),t._v("数值，用"),e("code",[t._v("style=")]),t._v("就可以")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/ant-design/ant-design/issues/1418",target:"_blank",rel:"noopener noreferrer"}},[t._v("RangePicker『此刻』建议配置成可选时间范围。 · Issue #1418 · ant-design/ant-design"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://www.cnblogs.com/liuyanxia/p/9099947.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("解决——CSS :before、:after ，当 content 使用中文时有时候会出现乱码 - SophiaLiu - 博客园"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"undefined-未赋值-null-值为空"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#undefined-未赋值-null-值为空"}},[t._v("#")]),t._v(" undefined 未赋值 null 值为空")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/ant-design/ant-design/issues/2367",target:"_blank",rel:"noopener noreferrer"}},[t._v("Select 控件为什么会把 null 当做有 value 而不显示 placeholder ，必须要为 undefined 才可以？ · Issue #2367 · ant-design/ant-design"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"less-alpha"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#less-alpha"}},[t._v("#")]),t._v(" less alpha")]),t._v(" "),e("p",[t._v("fade")]),t._v(" "),e("h2",{attrs:{id:"antd-日期选择-预设日期"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-日期选择-预设日期"}},[t._v("#")]),t._v(" antd 日期选择 预设日期")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://bz0iy.csb.app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sandbox - CodeSandbox"),e("OutboundLink")],1)]),t._v(" "),e("ul",[e("li",[t._v("footer 反转")]),t._v(" "),e("li",[t._v("不需要标题栏、关闭"),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("ant-picker-panel-container\ndisplay: flex;\nflex-direction: column-reverse;\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"特殊选中需求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊选中需求"}},[t._v("#")]),t._v(" 特殊选中需求")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("    .ant-menu-item:not(.ant-menu-item-selected) {\n      a[href^='/design/audit'] .anticon {\n        color: #00BE7B;\n      }\n    }\n")])])]),e("h2",{attrs:{id:"使用-传递对象-修改时-注意提前-clone-不要影响原对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-传递对象-修改时-注意提前-clone-不要影响原对象"}},[t._v("#")]),t._v(" 使用 传递对象，修改时，注意提前 clone，不要影响原对象")]),t._v(" "),e("p",[t._v("留意外部传入的 object，然后"),e("code",[t._v(".")]),t._v("语法访问，意外修改了引用")]),t._v(" "),e("p",[t._v("lodash cloneDeep")]),t._v(" "),e("h2",{attrs:{id:"审核自动切换"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#审核自动切换"}},[t._v("#")]),t._v(" 审核自动切换")]),t._v(" "),e("ul",[e("li",[t._v("移除项")]),t._v(" "),e("li",[t._v("不要后台拉取数据，会扰乱 index，使用 filter")]),t._v(" "),e("li",[t._v("filter 不会改变顺序")]),t._v(" "),e("li",[t._v("使用 filter，切换下一项，不需要移动 index，如果当前 index 无值，即到尾部")])]),t._v(" "),e("h2",{attrs:{id:"css-hover-不适用内容有间距场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-hover-不适用内容有间距场景"}},[t._v("#")]),t._v(" css hover 不适用内容有间距场景")]),t._v(" "),e("h2",{attrs:{id:"antd-日期组件返回的时间是当时时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-日期组件返回的时间是当时时间"}},[t._v("#")]),t._v(" antd 日期组件返回的时间是当时时间")]),t._v(" "),e("p",[t._v("实际需求，应该是 start 0.00 end 23.59")]),t._v(" "),e("h2",{attrs:{id:"replace-designlayout-with-prolayout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replace-designlayout-with-prolayout"}},[t._v("#")]),t._v(" replace DesignLayout with ProLayout")]),t._v(" "),e("p",[t._v("1ffb95756ab39c9538affd24c09d7cfe278127a3")]),t._v(" "),e("h2",{attrs:{id:"权限处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#权限处理"}},[t._v("#")]),t._v(" 权限处理")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("setUser(data)\nStorage.setItem('user', data);\nreloadAuthorized()\n")])])]),e("h2",{attrs:{id:"ts-demo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ts-demo"}},[t._v("#")]),t._v(" ts demo")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("type SuperUlMode "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'horizontal'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vertial'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntype SelctCallBackParams "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" index"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ntype "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("SelectCallBack")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SelctCallBackParams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SuperUlProps")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  defaultIndex"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mode"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SuperUlMode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  style"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSSProperties"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onSelect"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SelectCallBack\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ISuperUlContext")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  index"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  onSelect"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SelectCallBack"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("node_modules/antd/es/")]),t._v(" "),e("h2",{attrs:{id:"percent-事件频繁导致-多个组件过度-render"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#percent-事件频繁导致-多个组件过度-render"}},[t._v("#")]),t._v(" percent 事件频繁导致 多个组件过度 render")]),t._v(" "),e("p",[t._v("分析： percent 事件 3-7 次/s emit 给父组件 fileList，变化导致所有依赖 fileList 的组件 render。但外部并不关心这个事件")]),t._v(" "),e("p",[t._v("解决： 内部维护一份 fileList，仅非 percent 事件时，向外 emit 变化")]),t._v(" "),e("h2",{attrs:{id:"跨代数据共享"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨代数据共享"}},[t._v("#")]),t._v(" 跨代数据共享")]),t._v(" "),e("ul",[e("li",[t._v("依赖反转、组件合成")]),t._v(" "),e("li",[t._v("动态数据传递，要格外注意显式声明依赖")])]),t._v(" "),e("h2",{attrs:{id:"我是如何无缝的扩展-antd-组件-知乎"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#我是如何无缝的扩展-antd-组件-知乎"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/111850451",target:"_blank",rel:"noopener noreferrer"}},[t._v("我是如何无缝的扩展 antd 组件 - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("ul",[e("li",[t._v("扩展组件、但保持旧的引用")]),t._v(" "),e("li",[t._v("编辑器能识别吗")])]),t._v(" "),e("h2",{attrs:{id:"ant-design-repo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ant-design-repo"}},[t._v("#")]),t._v(" ant design repo")]),t._v(" "),e("p",[t._v("install use node 8\nstart use node 14")]),t._v(" "),e("h2",{attrs:{id:"高阶组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#高阶组件"}},[t._v("#")]),t._v(" 高阶组件")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://gist.github.com/sebmarkbage/ef0bf1f338a7182b6775",target:"_blank",rel:"noopener noreferrer"}},[t._v("Higher-order Components"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://medium.com/@dan_abramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750#.eeu8q01s1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mixins Are Dead. Long Live Composition | by Dan Abramov | Medium"),e("OutboundLink")],1)]),t._v(" "),e("blockquote",[e("p",[t._v("A higher-order component is just a function that takes an existing component and returns another component that wraps it.")])]),t._v(" "),e("h2",{attrs:{id:"antd-强烈风格-不适合较大定制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-强烈风格-不适合较大定制"}},[t._v("#")]),t._v(" Antd 强烈风格，不适合较大定制")]),t._v(" "),e("p",[t._v("推荐主色定制\n"),e("a",{attrs:{href:"https://github.com/ant-design/ant-design/issues/1241",target:"_blank",rel:"noopener noreferrer"}},[t._v("有关主题设计的建议 · Issue #1241 · ant-design/ant-design"),e("OutboundLink")],1),t._v("\n样式覆盖、非常麻烦")]),t._v(" "),e("p",[t._v("最常用的通用变量")]),t._v(" "),e("p",[t._v("读 "),e("a",{attrs:{href:"https://ant.design/docs/react/faq-cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("FAQ - Ant Design"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"线上-设计素材浏览有个-bug-切换二级菜单时-列表数据某些场景会互相影响"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#线上-设计素材浏览有个-bug-切换二级菜单时-列表数据某些场景会互相影响"}},[t._v("#")]),t._v(" 线上 设计素材浏览有个 bug，切换二级菜单时，列表数据某些场景会互相影响")]),t._v(" "),e("p",[t._v("bug 原因，")]),t._v(" "),e("ol",[e("li",[t._v("URL 参数变化，组件仅 update，需要重置 state")]),t._v(" "),e("li",[t._v("菜单切换，会触发 infiniteLoading，超出最大页数判断有问题")])]),t._v(" "),e("h2",{attrs:{id:"图标替换"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#图标替换"}},[t._v("#")]),t._v(" 图标替换")]),t._v(" "),e("ol",[e("li",[t._v("需要 JS 操作")]),t._v(" "),e("li",[t._v("fork 图标库，单独维护\n以 anticon-down 为例，搜索 down，替换 svg，build")])]),t._v(" "),e("p",[t._v("生成文件\nnode_modules/@ant-design/icons-svg/lib/asn/DownOutlined.js")]),t._v(" "),e("p",[t._v("ant-design-icons/packages/icons-svg/docs/ContributionGuide.zh-CN.md")]),t._v(" "),e("h2",{attrs:{id:"require-文件不存在"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#require-文件不存在"}},[t._v("#")]),t._v(" require 文件不存在")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/55213560/javascript-check-if-file-exists-if-not-then",target:"_blank",rel:"noopener noreferrer"}},[t._v("reactjs - JavaScript Check if File exists, if not then - Stack Overflow"),e("OutboundLink")],1),t._v("\n─")]),t._v(" "),e("p",[t._v("使用 import，报错\nUnhandled Rejection (Error): Cannot find module './sketch.svg'\nwebpack:/src/assets/project lazy ^./.*.svg$ namespace object:45")]),t._v(" "),e("h2",{attrs:{id:"react-如何点击页面空白处关闭弹窗"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-如何点击页面空白处关闭弹窗"}},[t._v("#")]),t._v(" React 如何点击页面空白处关闭弹窗")]),t._v(" "),e("ol",[e("li",[t._v("给 body 绑定事件 关闭")]),t._v(" "),e("li",[t._v("给弹窗等元素绑定点击事件 "),e("code",[t._v("onClick={e => e.stopPropagation()}")])])]),t._v(" "),e("h2",{attrs:{id:"umi-env-页面内不要解构-process-env"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#umi-env-页面内不要解构-process-env"}},[t._v("#")]),t._v(" umi env 页面内不要解构 process.env")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const { NODE_ENV, SERVER_ENV } = process.env;\n\nconsole.error(process.env.SERVER_ENV, SERVER_ENV) // test undefined\n")])])]),e("p",[t._v("node config/config.ts 可以完整读取 process.env，而 global.tsx 明显是页面层面，读到的是 define 植入，不是真实的 object，不一定能解构出来。所以最好不要用解构语法。")]),t._v(" "),e("h2",{attrs:{id:"form-field-避免下标访问-不利于扩展"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#form-field-避免下标访问-不利于扩展"}},[t._v("#")]),t._v(" form field 避免下标访问，不利于扩展")]),t._v(" "),e("p",[t._v("可以用 find name 方式")]),t._v(" "),e("h2",{attrs:{id:"公共组件样式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#公共组件样式"}},[t._v("#")]),t._v(" 公共组件样式")]),t._v(" "),e("p",[t._v("避免传值写死，不利于响应式")]),t._v(" "),e("h2",{attrs:{id:"husky"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#husky"}},[t._v("#")]),t._v(" husky")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -D husky lint-staged prettier\nnpx mrm lint-staged\n")])])]),e("p",[t._v("antd 项目已默认配置")]),t._v(" "),e("h2",{attrs:{id:"antd-range-picker-blur-hide-如何实现"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-range-picker-blur-hide-如何实现"}},[t._v("#")]),t._v(" antd range-picker blur hide 如何实现")]),t._v(" "),e("p",[t._v("基于已有组件定制，可以单独使用")]),t._v(" "),e("p",[t._v("失焦如何同时支持 input 和 div")]),t._v(" "),e("p",[t._v("time-picker\ndate-picker\n"),e("a",{attrs:{href:"https://www.npmjs.com/package/rc-picker",target:"_blank",rel:"noopener noreferrer"}},[t._v("rc-picker - npm"),e("OutboundLink")],1),t._v("\nrc-picker/src/RangePicker.tsx\ntriggerInnerOpen\nrc-trigger/src/index.tsx\nclass -hidden\n{trigger} onBlur input\n{portal} onMouseLeave div\n必 delay\nonMouseEnter 先清除定时器")]),t._v(" "),e("h2",{attrs:{id:"stylelint-异常输出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stylelint-异常输出"}},[t._v("#")]),t._v(" stylelint 异常输出")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("单独运行 npm run stylelint 提示未安装\n检查 node_modules/.bin 确实没装\n可能是 eslint 全局安装，带来的问题？避免全局安装，因为不同项目依赖可能不一样，再加上 ts 等规则依赖，会很麻烦\nnpm install --no-save stylelint\n\nnpx stylelint --help\n")])])]),e("h2",{attrs:{id:"umi-request-requesttype-生效条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#umi-request-requesttype-生效条件"}},[t._v("#")]),t._v(" umi-request requestType 生效条件")]),t._v(" "),e("p",[t._v("'requestType' when the type of data is object or array.")]),t._v(" "),e("h2",{attrs:{id:"createportal-左右切换时-生成多余-div"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#createportal-左右切换时-生成多余-div"}},[t._v("#")]),t._v(" createPortal，左右切换时，生成多余 div")]),t._v(" "),e("p",[t._v("避免创建新的 div？不行")]),t._v(" "),e("p",[t._v("只能是创建时，先把旧的删掉")]),t._v(" "),e("h2",{attrs:{id:"todo-material-lib"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#todo-material-lib"}},[t._v("#")]),t._v(" todo material-lib")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v(".ant-menu-item:active, .ant-menu-submenu-title:active {\n    /* background: aliceblue; */\n}\n")])])]),e("h2",{attrs:{id:"react-hooks-四-immutable-知乎"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-hooks-四-immutable-知乎"}},[t._v("#")]),t._v(" "),e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/163590288",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Hooks(四): immutable - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("更新有两个阶段：1. render: compute diff 2. commit diff to real dom")]),t._v(" "),e("p",[t._v("存在问题的是 1，执行计算开销\n"),e("a",{attrs:{href:"https://codesandbox.io/s/child-overload-render-p5p6t",target:"_blank",rel:"noopener noreferrer"}},[t._v("child overload render - CodeSandbox"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("期望：")]),t._v(" "),e("ul",[e("li",[t._v("值变化，引用变化")]),t._v(" "),e("li",[t._v("值不变，引用不变\n问题：")]),t._v(" "),e("li",[t._v("!!!机制：父组件重渲染会递归重渲染所有子组件，即使子组件依赖的 props 没有变化")]),t._v(" "),e("li",[t._v("性能：可避免的重渲染，有的子组件渲染开销很大")]),t._v(" "),e("li",[t._v("行为：无用的副作用重执行，无限循环")]),t._v(" "),e("li",[t._v("需要重请求保持数据最新场景，而重渲染开销大，返回数据每次创建新对象")]),t._v(" "),e("li",[t._v("parse 会创建新对象")]),t._v(" "),e("li",[t._v("对子组件来说，依赖的父组件应避免意外变化")]),t._v(" "),e("li",[t._v("引用相等，值发生了变化，UI 不更新")]),t._v(" "),e("li",[t._v("深拷贝问题，包含对象值不变，引用变了，")])]),t._v(" "),e("p",[t._v("结论：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("React.memo 包裹组件， 适用 prop 仅原始类型，复杂类型，可以指定比较函数，只适用函数组件")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://dmitripavlutin.com/use-react-memo-wisely/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Use React.memo() wisely"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("使用 immer")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/34691516",target:"_blank",rel:"noopener noreferrer"}},[t._v("精读《Immer.js》源码 - 知乎"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("record 和 tuple，JS 引入不可变数据结构 未来")])]),t._v(" "),e("li",[e("p",[t._v("useRef 适用于父组件内要定义包含常量的对象")])]),t._v(" "),e("li",[e("p",[t._v("避免在 render 中创建对象，或者使用 useMemo 只能是无副作用的高计算开销操作，指定依赖项，仅依赖更新时重新计算")])]),t._v(" "),e("li",[e("p",[t._v("hook state 要求不可变，深层嵌套如果配合 ES6，spread hell")])])]),t._v(" "),e("p",[t._v("根源：对象的值比较和引用比较的不一致性\n值比较计算开销大")]),t._v(" "),e("p",[t._v("很全的文章，不仅是介绍 record tuples\n"),e("a",{attrs:{href:"https://dev.to/sebastienlorber/records-tuples-for-react-way-more-than-immutability-2iic",target:"_blank",rel:"noopener noreferrer"}},[t._v("Records & Tuples for React, way more than immutability"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("官方性能优化指南：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("把存在依赖项的函数，移到 useEffect 内")])]),t._v(" "),e("li",[e("p",[t._v("不需要考虑函数重复创建的开销，除非是确定开销比较大的函数")])]),t._v(" "),e("li",[e("p",[t._v("setState 传入函数更新 state，如果返回值不变，render 会跳过更新 搜"),e("code",[t._v("setRows")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://codepen.io/cyio/pen/WNwpGJW?editors=1010",target:"_blank",rel:"noopener noreferrer"}},[t._v("useState: lazy initial state"),e("OutboundLink")],1)])])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://reactjs.org/docs/hooks-faq.html#how-can-i-measure-a-dom-node",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hooks FAQ – React"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"caches-操作要求-https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#caches-操作要求-https"}},[t._v("#")]),t._v(" caches 操作要求 https")]),t._v(" "),e("p",[t._v("if (window.caches && window.caches.keys) {")]),t._v(" "),e("p",[t._v("SecurityError: Failed to execute 'keys' on 'CacheStorage': Only secure origins are allowed (see: https://goo.gl/Y0ZkNV).")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/CacheStorage",target:"_blank",rel:"noopener noreferrer"}},[t._v("CacheStorage - Web APIs | MDN"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("安全源定义\n"),e("a",{attrs:{href:"https://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prefer Secure Origins For Powerful New Features - The Chromium Projects"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"请求优化-token-是否存在或在有效期内"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求优化-token-是否存在或在有效期内"}},[t._v("#")]),t._v(" 请求优化，token 是否存在或在有效期内")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/qkstart/p/11856168.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("React-umi-request 动态刷新 Token 功能实现及 node.js 代码逻辑 - qkstart - 博客园"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"static-proptypes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#static-proptypes"}},[t._v("#")]),t._v(" static propTypes")]),t._v(" "),e("p",[t._v("适用没有 typescript 时，老代码用得多\n"),e("a",{attrs:{href:"https://stackoverflow.com/questions/40514574/react-why-static-proptypes",target:"_blank",rel:"noopener noreferrer"}},[t._v("reactjs - react: why static propTypes - Stack Overflow"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"何时单独用-xhr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#何时单独用-xhr"}},[t._v("#")]),t._v(" 何时单独用 xhr")]),t._v(" "),e("p",[t._v("跨域？不带 cookie？")]),t._v(" "),e("h2",{attrs:{id:"immerjs-优于使用-lodash-创建拷贝"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#immerjs-优于使用-lodash-创建拷贝"}},[t._v("#")]),t._v(" ImmerJS 优于使用 lodash 创建拷贝")]),t._v(" "),e("ul",[e("li",[t._v("无需遍历，借用 proxy，仅针对变化的对象属性进行深拷贝\n"),e("a",{attrs:{href:"https://dev.to/sebastienlorber/insight-3-use-immerjs-over-lodash-set-immutablejs-or-plain-js-36bl",target:"_blank",rel:"noopener noreferrer"}},[t._v("Insight #3 - Use ImmerJS over lodash/set, ImmutableJS or plain JS - DEV"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://redux-toolkit.js.org/introduction/quick-start",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方类似 dva 解决方案 Quick Start | Redux Toolkit"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"竞速-race"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#竞速-race"}},[t._v("#")]),t._v(" 竞速 race")]),t._v(" "),e("ol",[e("li",[t._v("useRef 判断")]),t._v(" "),e("li",[t._v("取消请求")]),t._v(" "),e("li",[t._v("saga takeLatest")]),t._v(" "),e("li",[t._v("建议硬编码增加请求延时，更容易复现和发现问题\n"),e("a",{attrs:{href:"https://dev.to/sebastienlorber/handling-api-request-race-conditions-in-react-4j5b",target:"_blank",rel:"noopener noreferrer"}},[t._v("Handling API request race conditions in React - DEV"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://github.com/slorber/react-async-hook",target:"_blank",rel:"noopener noreferrer"}},[t._v("slorber/react-async-hook: React hook to handle any async operation in React components"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("makeCancelable 为 promise 添加伪取消功能 "),e("a",{attrs:{href:"https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("isMounted is an Antipattern – React Blog"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"upload-drag-扩大区域"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upload-drag-扩大区域"}},[t._v("#")]),t._v(" upload drag 扩大区域")]),t._v(" "),e("ul",[e("li",[e("code",[t._v(":focue outline")]),t._v("浏览器原生样式，列表界面点击时出现 focus 样式并不合适")]),t._v(" "),e("li",[t._v("非文件也能 drag\n"),e("a",{attrs:{href:"https://medium.com/@ralzohairi/how-to-drag-drop-html-elements-and-files-using-javascript-d31d15279369",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to Drag & Drop HTML Elements and Files using Javascript | by Reema | Medium"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://codepen.io/tech_query/pen/MqGgap?editors=1000",target:"_blank",rel:"noopener noreferrer"}},[t._v("DataTransfer test"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"定位代码最快方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#定位代码最快方式"}},[t._v("#")]),t._v(" 定位代码最快方式")]),t._v(" "),e("ol",[e("li",[t._v("react dev tools 组件名称")]),t._v(" "),e("li",[t._v("css 类")])]),t._v(" "),e("p",[t._v("数据流，从上到下传递，嵌套可能很深，找数据定义从上往下找")]),t._v(" "),e("h2",{attrs:{id:"开发阶段-eslint-影响初期效率"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发阶段-eslint-影响初期效率"}},[t._v("#")]),t._v(" 开发阶段 eslint 影响初期效率")]),t._v(" "),e("ul",[e("li",[t._v("开发新功能初期，可能有很多临时代码")]),t._v(" "),e("li",[t._v("可以对新文件，添加 eslint 忽略标记。后期再放开")])]),t._v(" "),e("h2",{attrs:{id:"临时禁用-lint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#临时禁用-lint"}},[t._v("#")]),t._v(" 临时禁用 lint")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// @ts-nocheck\n/* eslint-disable */\n")])])]),e("h2",{attrs:{id:"空数组约定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#空数组约定"}},[t._v("#")]),t._v(" 空数组约定")]),t._v(" "),e("p",[t._v("2.【强制】前后端数据列表相关的接口返回，如果为空，则返回空数组[]或空集合{}。说明：此条约定有利于数据层面上的协作更加高效，减少前端很多琐碎的 null 判断。")]),t._v(" "),e("p",[t._v("https://github.com/alibaba/p3c/blob/master/Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%EF%BC%88%E5%B5%A9%E5%B1%B1%E7%89%88%EF%BC%89.pdf")]),t._v(" "),e("h2",{attrs:{id:"map-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#map-key"}},[t._v("#")]),t._v(" map key")]),t._v(" "),e("p",[t._v("要求：稳定，列表内惟一")]),t._v(" "),e("p",[t._v("稳定是说一个页面操作内，保持稳定")]),t._v(" "),e("p",[t._v("不指定 key 时，默认使用 index，index 存在不稳定")]),t._v(" "),e("p",[t._v("内容 hash 不行，不惟一")]),t._v(" "),e("p",[t._v("所以，只要提前生成一个惟一值就行。可以基于一个常量，累加生成 "),e("code",[t._v("key={genUniqKey()}")])]),t._v(" "),e("h2",{attrs:{id:"hmr-fast-refresh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hmr-fast-refresh"}},[t._v("#")]),t._v(" HMR => Fast Refresh")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://medium.com/javascript-in-plain-english/what-is-react-fast-refresh-f3d1e8401333",target:"_blank",rel:"noopener noreferrer"}},[t._v("What is React Fast Refresh?. This library is going to change your… | by Mallik Cheripally | JavaScript In Plain English | Medium"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("存在问题：")]),t._v(" "),e("ul",[e("li",[t._v("有时变更后，刷新很慢")]),t._v(" "),e("li",[t._v("出现错误后，需要手动刷新")])]),t._v(" "),e("h2",{attrs:{id:"dan-note"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dan-note"}},[t._v("#")]),t._v(" dan note")]),t._v(" "),e("p",[t._v("react 中 props state 是不可变的（至少强烈建议如此）")]),t._v(" "),e("p",[t._v("避免闭包的原因是很难思考一个值可以随着时间被改变")]),t._v(" "),e("p",[t._v("Function components capture the rendered values.")]),t._v(" "),e("p",[t._v("函数组件保持了触发请求时的 prop。可变 this 模拟 ref.current\n而 class 会由于在请求中，重渲染，this 变化，读取最新的 prop。React 会改变 this")]),t._v(" "),e("p",[t._v("In all cases I’ve seen so far, the “stale closures” problems happen due to a mistaken assumption that “functions don’t change” or that “props are always the same”. This is not the case, as I hope this post has helped to clarify.")]),t._v(" "),e("p",[t._v("实际是因为闭包？\n"),e("a",{attrs:{href:"https://overreacted.io/how-are-function-components-different-from-classes/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How Are Function Components Different from Classes? — Overreacted"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("Dan 介绍 hooks 提案，演示 class 与 hook 对比 context custom hook\n"),e("a",{attrs:{href:"https://www.youtube.com/watch?v=dpw9EHDh2bM",target:"_blank",rel:"noopener noreferrer"}},[t._v("React Today and Tomorrow and 90% Cleaner React With Hooks - YouTube"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"constructor-里发请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#constructor-里发请求"}},[t._v("#")]),t._v(" constructor 里发请求？")]),t._v(" "),e("ol",[e("li",[t._v("应该设置初始 state，给用户替代状态，如 loading")]),t._v(" "),e("li",[t._v("constructor 不能 async")]),t._v(" "),e("li",[t._v("componentWillMount 废弃，开发者可能漏掉设置初始 state，以为 render 会等待，实际请求中会执行一次")]),t._v(" "),e("li",[t._v("最佳实践，componentDidMount + isLoading，设置 isLoading 为 true 时，实际组件不会渲染")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://daveceddia.com/where-fetch-data-componentwillmount-vs-componentdidmount/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Where to Fetch Data: componentWillMount vs componentDidMount"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/55182526/fetching-data-in-constructor",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript - Fetching data in constructor - Stack Overflow"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://zh-hans.reactjs.org/docs/faq-ajax.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("AJAX and APIs – React"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"自定义-tag"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自定义-tag"}},[t._v("#")]),t._v(" 自定义 Tag")]),t._v(" "),e("p",[t._v("字符模板 + 大写 + keyof")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/33471880/dynamic-tag-name-in-jsx-and-react",target:"_blank",rel:"noopener noreferrer"}},[t._v("reactjs - Dynamic tag name in jsx and React - Stack Overflow"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"jsx-map-join-reduce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jsx-map-join-reduce"}},[t._v("#")]),t._v(" jsx map join => reduce")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/34034038/how-to-render-react-components-by-using-map-and-join",target:"_blank",rel:"noopener noreferrer"}},[t._v("reactjs - how to render react components by using map and join - Stack Overflow"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"pages-重复渲染-尤其-audio-有动画明显"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pages-重复渲染-尤其-audio-有动画明显"}},[t._v("#")]),t._v(" pages 重复渲染，尤其 audio 有动画明显")]),t._v(" "),e("p",[t._v("14 MediaPiece.tsx:7 mediapiece render")]),t._v(" "),e("p",[t._v("areEqual 从第二次渲染开始，意味着不能有卸载，父级哪层导致了卸载，拆出去的代码是否需要包括 map，需要，因为要检查数据入口，自上而下，分层控制")]),t._v(" "),e("p",[t._v("如果整个列表都卸载了，key 无意义")]),t._v(" "),e("p",[t._v("一层 map，使用 memo，仅修改项会 re-render")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("key={genUniqKey()}\n")])])]),e("p",[t._v("两层 map key item 写混，误以为 uniq key 生成有问题")]),t._v(" "),e("p",[t._v("lodash uniqueId 生成位数个位数时，容易冲突")]),t._v(" "),e("p",[t._v("检测父组件是否发生了卸载，也可以在 react dev tools 选中组件，如果组件卸载，选中会往父级跳")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'child unmounted'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("组件定义嵌套时，memo 失效？")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://codesandbox.io/s/reactmemo-oi15s?file=/src/App.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("React.memo - CodeSandbox"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("总结：")]),t._v(" "),e("ul",[e("li",[t._v("state 更新，组件并不会卸载，除非删除？")]),t._v(" "),e("li",[t._v("memo 不能写到组件内 React Top-Level API，这个 level 实指 top level scope，官方文档译的顶层、不好理解")]),t._v(" "),e("li",[t._v("memo 包裹的组件如果使用了 children props，会不 work")]),t._v(" "),e("li",[t._v("key 里不要直接写函数，否则界面更新会执行")])]),t._v(" "),e("p",[t._v("React 函数组件优化只做了两点：")]),t._v(" "),e("ol",[e("li",[t._v("state 浅比较，相等则不重渲染。所以不比较 prop？")]),t._v(" "),e("li",[t._v("DOM 树只重渲染变化部分")])]),t._v(" "),e("h2",{attrs:{id:"effect-相关函数处理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#effect-相关函数处理"}},[t._v("#")]),t._v(" effect 相关函数处理：")]),t._v(" "),e("p",[t._v("是否要把函数放入 effect 依赖数组，尽量避免")]),t._v(" "),e("ol",[e("li",[t._v("提升到组件外面")]),t._v(" "),e("li",[t._v("移到 effect 内")]),t._v(" "),e("li",[t._v("useCallback")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://overreacted.io/a-complete-guide-to-useeffect/",target:"_blank",rel:"noopener noreferrer"}},[t._v("A Complete Guide to useEffect — Overreacted"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/93824106",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入浅出 useSWR 原理 - 知乎"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"modal-router"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modal-router"}},[t._v("#")]),t._v(" modal router")]),t._v(" "),e("p",[t._v("在 modal withRouter 不行， 传不到子组件")]),t._v(" "),e("h2",{attrs:{id:"鼠标进入触发-lottie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#鼠标进入触发-lottie"}},[t._v("#")]),t._v(" 鼠标进入触发 lottie")]),t._v(" "),e("p",[t._v("mouseHover 没有")]),t._v(" "),e("p",[t._v("mouseOver 不行")]),t._v(" "),e("p",[t._v("mouseEnter / mouseLeave")]),t._v(" "),e("p",[t._v("解决误触，debounse 不行，延迟但还是会执行，throttle 也不行，因为 enter 触发并不频繁")]),t._v(" "),e("p",[t._v("通用解决方案：为调用增加延时，当误触发生时取消延时，hover 够久时正常调用")]),t._v(" "),e("p",[t._v("子组件 render 问题，有外在表现组件容易显现出来，如动画、发请求，否则就要打 log 才能看出来")]),t._v(" "),e("p",[t._v("el 绑定，用自定义 id 即可。不需要实时 Dom，因此没必要用 ref")]),t._v(" "),e("p",[t._v("翻页集中 setState，否则可能多次渲染，原因是先设置了 index，然后又设置 data")]),t._v(" "),e("h2",{attrs:{id:"antd-table"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#antd-table"}},[t._v("#")]),t._v(" antd table")]),t._v(" "),e("ul",[e("li",[t._v("data 不需要 concat, 无限加载才需要")]),t._v(" "),e("li",[t._v("弹窗表格优化"),e("div",{staticClass:"language-css extra-class"},[e("pre",{pre:!0,attrs:{class:"language-css"}},[e("code",[t._v("// 小屏\n"),e("span",{pre:!0,attrs:{class:"token atrule"}},[e("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@media")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("max-height")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 800px"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".ant-modal")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("top")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50px"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 固定高度内滚动")]),t._v("\nscroll"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" y"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" clientHeight "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("450")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"state-派生自-prop-组件内又修改-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#state-派生自-prop-组件内又修改-state"}},[t._v("#")]),t._v(" state 派生自 prop，组件内又修改 state")]),t._v(" "),e("p",[t._v("数据变更源成了两个，增加了数据意外变化定位难度")]),t._v(" "),e("p",[t._v("是否能通过通知父组件更新数据")]),t._v(" "),e("h2",{attrs:{id:"第二层弹窗问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第二层弹窗问题"}},[t._v("#")]),t._v(" 第二层弹窗问题")]),t._v(" "),e("p",[t._v("用了 absolute，需要计算容器高度")]),t._v(" "),e("p",[t._v("将一层内容 hide，并改将二层内容用 transfrom 移动到目标位置")]),t._v(" "),e("h2",{attrs:{id:"redux-dev-tool-crash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redux-dev-tool-crash"}},[t._v("#")]),t._v(" redux dev tool crash")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/reduxjs/redux-devtools/issues/643#issuecomment-697398278",target:"_blank",rel:"noopener noreferrer"}},[t._v('"redux-devtools-extension" gets laggy and eventually crashes when I try to open it. · Issue #643 · reduxjs/redux-devtools'),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"无效组件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#无效组件"}},[t._v("#")]),t._v(" 无效组件")]),t._v(" "),e("p",[t._v("不能是 object，有的没有 props.children")]),t._v(" "),e("p",[t._v("暂时用 组件 map")]),t._v(" "),e("p",[t._v("可以打印出来，检查是否正确")]),t._v(" "),e("blockquote",[e("p",[t._v("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: object. #13445\n元素类型，有两种，内置组件 string，合成组件 class/function")])]),t._v(" "),e("p",[t._v("组件不能是 el，需要是函数")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CompanyIconInHeader "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("y"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("span"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// wrong use")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CompanyIconInHeader "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// right")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("CompanyIconInHeader")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("y"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("span"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"点击文本复制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#点击文本复制"}},[t._v("#")]),t._v(" 点击文本复制")]),t._v(" "),e("p",[t._v("react wrapper 引入问题")]),t._v(" "),e("p",[t._v("browser api 兼容性，需要请求权限")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("import copy from 'copy-to-clipboard';\n")])])]),e("h2",{attrs:{id:"半受控-props-变化-需要更新部分-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#半受控-props-变化-需要更新部分-state"}},[t._v("#")]),t._v(" 半受控，props 变化，需要更新部分 state")]),t._v(" "),e("p",[t._v("硬重置（不推荐、但可救急）")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("componentDidUpdate\n  this.setState({ ..._.cloneDeep(defaultStates) }, () => {\n")])])]),e("p",[t._v("v15 componentWillReceiveProps or componentDidUpdate + setState\nv16 getDerivedStateFromProps")]),t._v(" "),e("p",[t._v("反模式：受控与非受控混合")]),t._v(" "),e("p",[t._v("官方建议：")]),t._v(" "),e("ol",[e("li",[t._v("完全受控，数据提升")]),t._v(" "),e("li",[t._v("完全不受控，用 key 控制更新")])]),t._v(" "),e("h2",{attrs:{id:"缓存计算"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缓存计算"}},[t._v("#")]),t._v(" 缓存计算")]),t._v(" "),e("p",[t._v("类 Vue computed，场景高开销计算，入参作为依赖，缓存最后一次计算值")]),t._v(" "),e("p",[t._v("memoize-one\n"),e("a",{attrs:{href:"https://juejin.cn/post/6844903894061940750",target:"_blank",rel:"noopener noreferrer"}},[t._v("memoize-one 在 React 中的应用"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("拓展：斐波那契数列")]),t._v(" "),e("h2",{attrs:{id:"ripple-btn"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ripple-btn"}},[t._v("#")]),t._v(" ripple btn")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("demo a>text\nantd button>span text\n")])])]),e("p",[t._v("多个 span 标签，导致事件 target 会变，当 target 为 span 时，计算坐标有误")]),t._v(" "),e("p",[t._v("span antd 有设置 absolute")]),t._v(" "),e("h2",{attrs:{id:"跨组件引用可变对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨组件引用可变对象"}},[t._v("#")]),t._v(" 跨组件引用可变对象")]),t._v(" "),e("ul",[e("li",[t._v("多个修改源")]),t._v(" "),e("li",[t._v("深层数据变了，引用没变")])]),t._v(" "),e("h2",{attrs:{id:"webpack-cpu占用高"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webpack-cpu占用高"}},[t._v("#")]),t._v(" webpack CPU占用高")]),t._v(" "),e("p",[t._v("在 MacOS Catalina 中，Vue 项目在运行 node run dev 时，webpack server 会调用 fsevents 模块进行监控文件变化。如果没有这个模块，就会一直遍历所有的文件。")]),t._v(" "),e("p",[t._v("https://www.jianshu.com/p/f7769e01aa9c")]),t._v(" "),e("h2",{attrs:{id:"表格踩坑-最佳实践"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#表格踩坑-最佳实践"}},[t._v("#")]),t._v(" 表格踩坑，最佳实践")]),t._v(" "),e("p",[t._v("查询参数和分页，应该用一个 state，合并更新 query")]),t._v(" "),e("p",[t._v("这么写，会有冲突，比如筛选重置同时回第一页")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("useEffect")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchList")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("curQuery"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pagination"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h2",{attrs:{id:"url-hash-变化-如何更新页面"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#url-hash-变化-如何更新页面"}},[t._v("#")]),t._v(" URL hash 变化，如何更新页面")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/48139281/react-doesnt-reload-component-data-on-route-param-change-or-query-change",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript - React doesn't reload component data on route param change or query change - Stack Overflow"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);