import{_ as t,r as p,o,c as e,a as n,b as c,F as l,e as s,d as u}from"./app.8749c1a1.js";const i={},k=s('<h1 id="setinterval" tabindex="-1"><a class="header-anchor" href="#setinterval" aria-hidden="true">#</a> setInterval</h1><p>\u5E94\u7528\u573A\u666F\uFF1A\u901A\u8FC7\u6A21\u62DF\u89E3\u51B3 setInterval \u4E0D\u51C6\u95EE\u9898</p><p>\u8003\u5BDF:</p><ul><li>\u9012\u5F52</li><li>api \u8FD4\u56DE\u503C\u662F\u4EC0\u4E48</li><li>\u5185\u90E8\u51FD\u6570 this \u4FDD\u6301</li><li>\u5982\u4F55\u505C\u6B62</li></ul><p>\u5982\u4F55\u62FF\u5230\u6700\u65B0\u7684 tId \u8FDB\u884C\u6E05\u9664\uFF0C\u89E3\u6CD5\u662F\u7528\u5F15\u7528\uFF1F</p><blockquote><p>setInterval\u80FD\u591F\u4FDD\u8BC1\u4EE5\u56FA\u5B9A\u9891\u7387\u5411\u4E8B\u4EF6\u961F\u5217\u653E\u5165\u56DE\u8C03\uFF0CsetTimeout\u4E0D\u80FD\u4FDD\u8BC1\u3002\u4E24\u4E2A\u90FD\u4E0D\u80FD\u4FDD\u8BC1\u56FA\u5B9A\u7684\u56DE\u8C03\u6267\u884C\u9891\u7387\uFF0C\u56E0\u4E3A\u5B58\u5728\u4E3B\u7EBF\u7A0B\u963B\u585E\u7684\u53EF\u80FD</p></blockquote>',6),r={href:"https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/259#issuecomment-687007642",target:"_blank",rel:"noopener noreferrer"},d=u("\u7B2C 133 \u9898\uFF1A\u7528 setTimeout \u5B9E\u73B0 setInterval\uFF0C\u9610\u8FF0\u5B9E\u73B0\u7684\u6548\u679C\u4E0EsetInterval\u7684\u5DEE\u5F02 \xB7 Issue #259 \xB7 Advanced-Frontend/Daily-Interview-Question"),f=s(`<div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token comment">// setInterval(fn, 3000)</span>

  <span class="token keyword">function</span> <span class="token function">mySetInterval</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> tId <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">let</span> self  <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token parameter">_fn<span class="token punctuation">,</span> _wait</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      tId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        <span class="token function">inner</span><span class="token punctuation">(</span>_fn<span class="token punctuation">,</span> _wait<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">inner</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> wait<span class="token punctuation">)</span>

    <span class="token keyword">return</span> tId
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token function">mySetInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token function">clearTimeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</code></pre></div><p>\u6539\u8FDB\uFF0C\u52A0\u6807\u8BB0\u5E76\u5BF9\u5916\u63D0\u4F9B\u4FEE\u6539\u65B9\u6CD5\uFF0C\u505C\u6B62\u8FD0\u884C</p><p>\u8003\u5BDF\u95ED\u5305</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">myInterval</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> stop <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token keyword">function</span> <span class="token function">inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>stop<span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>inner<span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span>inner<span class="token punctuation">,</span> wait<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      stop <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;haha&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> clear <span class="token operator">=</span> <span class="token function">myInterval</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div>`,4);function m(v,w){const a=p("ExternalLinkIcon");return o(),e(l,null,[k,n("p",null,[n("a",r,[d,c(a)])]),f],64)}var y=t(i,[["render",m],["__file","set-interval.html.vue"]]);export{y as default};
