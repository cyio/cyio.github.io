import{r as n,o as s,c as a,a as p,F as t,d as e,b as o}from"./app.09b8f80a.js";const c={},l=e('<h1 id="date" tabindex="-1"><a class="header-anchor" href="#date" aria-hidden="true">#</a> Date</h1><h2 id="日期格式国际标准" tabindex="-1"><a class="header-anchor" href="#日期格式国际标准" aria-hidden="true">#</a> 日期格式国际标准</h2><p>use the ISO 8601 standard for dates YYYY-MM-DD</p><p>美国用的是 MMDDYYYY</p><p>如果手动拼，要注意用 0 补足位数 ，即 left pad</p><p>优点是清楚，易于排序</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>\n<span class="token comment">// &quot;2018-10-07&quot;</span>\n\n<span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>DateTimeFormat</span><span class="token punctuation">(</span><span class="token string">&#39;zh-CN&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token comment">// &quot;2018/2/26&quot;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="unix" tabindex="-1"><a class="header-anchor" href="#unix" aria-hidden="true">#</a> UNIX</h2>',8),i=e('<li>Unix time (AKA epoch time)</li><li>定义是本地时间相对于 UTC 1970.1.1 以来的秒数。本地调慢时间后，访问 https 网站浏览器会拦截</li><li>JS 中的<code>Date.getTime()</code>得到的是毫秒<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Date</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">unix</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li>',3),u=o("UNIX 时间戳的定义与时区无关 "),r={href:"https://coderwall.com/p/rbfl6g/how-to-get-the-correct-unix-timestamp-from-any-date-in-javascript",target:"_blank",rel:"noopener noreferrer"},k=o("How to get the correct Unix Timestamp from any Date in JavaScript"),m={href:"https://www.digitalocean.com/community/tutorials/understanding-date-and-time-in-javascript",target:"_blank",rel:"noopener noreferrer"},d=o("How To Work with Date and Time in JavaScript using Date Objects | DigitalOcean"),b=e('<h2 id="客户端时间与服务器时间同步" tabindex="-1"><a class="header-anchor" href="#客户端时间与服务器时间同步" aria-hidden="true">#</a> 客户端时间与服务器时间同步</h2><p>影响因素：</p><ol><li>网络延时</li><li>js 计时器不准，页面一直开着，偏差会越来越大</li><li>用户修改系统时间</li></ol><p>解决：</p><ul><li>(进入页面时)获取与服务器时间差，缺点是每秒获取当前时间，可能用户在进入页面后更改</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//entry.js入口文件</span>\n<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>dateDiff<span class="token punctuation">)</span><span class="token punctuation">{</span>\n    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;api/GetTimeDiff&#39;</span><span class="token punctuation">,</span>\n        <span class="token punctuation">{</span>nowDate<span class="token operator">:</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dateDiff</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n            window<span class="token punctuation">.</span>dateDiff <span class="token operator">=</span> dateDiff<span class="token punctuation">;</span>\n            <span class="token comment">//将时间差存在全局变量中，方便在其他模块中调用</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n<span class="token operator">...</span>\n\n<span class="token comment">//other.js 其他模块</span>\n<span class="token operator">...</span>\n<span class="token keyword">var</span> myInterval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>\n    <span class="token keyword">var</span> countDown <span class="token operator">=</span> endTime <span class="token operator">-</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> dateDiff<span class="token punctuation">;</span>\n    <span class="token comment">//每秒会获取本地时间，这样就算执行的周期不准确</span>\n    <span class="token comment">//也可以准确的获取时间差</span>\n\n    <span class="token comment">//执行页面倒计时的渲染</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div>',6),f={id:"替代方案-moment-js-docs",tabindex:"-1"},h=p("a",{class:"header-anchor",href:"#替代方案-moment-js-docs","aria-hidden":"true"},"#",-1),w=o(),g={href:"https://momentjs.com/docs/#/-project-status/",target:"_blank",rel:"noopener noreferrer"},v=o("替代方案 Moment.js | Docs"),D=p("p",null,"新项目不建议使用 moment，说明原因及介绍替代选择",-1);c.render=function(e,o){const c=n("OutboundLink");return s(),a(t,null,[l,p("ul",null,[i,p("li",null,[u,p("a",r,[k,p(c)]),p("a",m,[d,p(c)])])]),b,p("h2",f,[h,w,p("a",g,[v,p(c)])]),D],64)};export default c;
