<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.37">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#0089a7"><meta name="referrer" content="no-referrer"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><title>性能 | Oaker小站</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app.10bf14e8.js"><link rel="modulepreload" href="/assets/perf.html.0c70aed5.js"><link rel="modulepreload" href="/assets/perf.html.3889192c.js">
    <link rel="stylesheet" href="/assets/style.1f6754f1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Oaker小站</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/index.html" class="" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/concept.html" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/web/html.html" class="" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frameworks/vue.html" class="" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/node/concept.html" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/markdown.html" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/algorithms/index.html" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/solutions/fib.html" class="" aria-label="题解"><!--[--><!--]--> 题解 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cyio" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/index.html" class="" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/concept.html" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/web/html.html" class="" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frameworks/vue.html" class="" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/node/concept.html" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/markdown.html" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/algorithms/index.html" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/solutions/fib.html" class="" aria-label="题解"><!--[--><!--]--> 题解 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cyio" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Web <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/web/api.html" class="sidebar-item" aria-label="API"><!--[--><!--]--> API <!--[--><!--]--></a><!----></li><li><a href="/web/babel.html" class="sidebar-item" aria-label="babel"><!--[--><!--]--> babel <!--[--><!--]--></a><!----></li><li><a href="/web/blob.html" class="sidebar-item" aria-label="blob"><!--[--><!--]--> blob <!--[--><!--]--></a><!----></li><li><a href="/web/canvas.html" class="sidebar-item" aria-label="Canvas"><!--[--><!--]--> Canvas <!--[--><!--]--></a><!----></li><li><a href="/web/cdn.html" class="sidebar-item" aria-label="CDN"><!--[--><!--]--> CDN <!--[--><!--]--></a><!----></li><li><a href="/web/chrome-dev-tools.html" class="sidebar-item" aria-label="Chrome-DevTools"><!--[--><!--]--> Chrome-DevTools <!--[--><!--]--></a><!----></li><li><a href="/web/chrome-extensions-develop.html" class="sidebar-item" aria-label="Chrome 扩展开发"><!--[--><!--]--> Chrome 扩展开发 <!--[--><!--]--></a><!----></li><li><a href="/web/chrome-recorder.html" class="sidebar-item" aria-label="chrome-recorder"><!--[--><!--]--> chrome-recorder <!--[--><!--]--></a><!----></li><li><a href="/web/code-style.html" class="sidebar-item" aria-label="代码风格"><!--[--><!--]--> 代码风格 <!--[--><!--]--></a><!----></li><li><a href="/web/comment.html" class="sidebar-item" aria-label="更好的注释"><!--[--><!--]--> 更好的注释 <!--[--><!--]--></a><!----></li><li><a href="/web/configurable-form.html" class="sidebar-item" aria-label="使用 Vue.js 构造可配置化表单"><!--[--><!--]--> 使用 Vue.js 构造可配置化表单 <!--[--><!--]--></a><!----></li><li><a href="/web/cookie.html" class="sidebar-item" aria-label="Cookie"><!--[--><!--]--> Cookie <!--[--><!--]--></a><!----></li><li><a href="/web/css-animation.html" class="sidebar-item" aria-label="CSS 动画"><!--[--><!--]--> CSS 动画 <!--[--><!--]--></a><!----></li><li><a href="/web/css-concept.html" class="sidebar-item" aria-label="CSS 概念"><!--[--><!--]--> CSS 概念 <!--[--><!--]--></a><!----></li><li><a href="/web/css-layout.html" class="sidebar-item" aria-label="CSS 布局"><!--[--><!--]--> CSS 布局 <!--[--><!--]--></a><!----></li><li><a href="/web/css-loading.html" class="sidebar-item" aria-label="CSS Loading"><!--[--><!--]--> CSS Loading <!--[--><!--]--></a><!----></li><li><a href="/web/css-practice.html" class="sidebar-item" aria-label="CSS 实践"><!--[--><!--]--> CSS 实践 <!--[--><!--]--></a><!----></li><li><a href="/web/css-preprocessor.html" class="sidebar-item" aria-label="CSS 预处理器"><!--[--><!--]--> CSS 预处理器 <!--[--><!--]--></a><!----></li><li><a href="/web/css-selector.html" class="sidebar-item" aria-label="css-selector.md"><!--[--><!--]--> css-selector.md <!--[--><!--]--></a><!----></li><li><a href="/web/css-unit.html" class="sidebar-item" aria-label="CSS unit"><!--[--><!--]--> CSS unit <!--[--><!--]--></a><!----></li><li><a href="/web/d3.html" class="sidebar-item" aria-label="D3"><!--[--><!--]--> D3 <!--[--><!--]--></a><!----></li><li><a href="/web/data-visualization.html" class="sidebar-item" aria-label="data-visualization.md"><!--[--><!--]--> data-visualization.md <!--[--><!--]--></a><!----></li><li><a href="/web/dom-calc.html" class="sidebar-item" aria-label="DOM 计算"><!--[--><!--]--> DOM 计算 <!--[--><!--]--></a><!----></li><li><a href="/web/dom-event.html" class="sidebar-item" aria-label="Dom 事件"><!--[--><!--]--> Dom 事件 <!--[--><!--]--></a><!----></li><li><a href="/web/dom.html" class="sidebar-item" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a><!----></li><li><a href="/web/download.html" class="sidebar-item" aria-label="download.md"><!--[--><!--]--> download.md <!--[--><!--]--></a><!----></li><li><a href="/web/e2e-test.html" class="sidebar-item" aria-label="前端测试"><!--[--><!--]--> 前端测试 <!--[--><!--]--></a><!----></li><li><a href="/web/encode.html" class="sidebar-item" aria-label="页面编码"><!--[--><!--]--> 页面编码 <!--[--><!--]--></a><!----></li><li><a href="/web/ensure-run-after-dom-change.html" class="sidebar-item" aria-label="如何保证 DOM 更新（绘制）后执行"><!--[--><!--]--> 如何保证 DOM 更新（绘制）后执行 <!--[--><!--]--></a><!----></li><li><a href="/web/flexbox.html" class="sidebar-item" aria-label="Flexbox"><!--[--><!--]--> Flexbox <!--[--><!--]--></a><!----></li><li><a href="/web/grid.html" class="sidebar-item" aria-label="Grid"><!--[--><!--]--> Grid <!--[--><!--]--></a><!----></li><li><a href="/web/href.html" class="sidebar-item" aria-label="Anchor"><!--[--><!--]--> Anchor <!--[--><!--]--></a><!----></li><li><a href="/web/html-head.html" class="sidebar-item" aria-label="html head"><!--[--><!--]--> html head <!--[--><!--]--></a><!----></li><li><a href="/web/html.html" class="sidebar-item" aria-label="HTML"><!--[--><!--]--> HTML <!--[--><!--]--></a><!----></li><li><a href="/web/html5-responsive.html" class="sidebar-item" aria-label="响应式设计"><!--[--><!--]--> 响应式设计 <!--[--><!--]--></a><!----></li><li><a href="/web/http.html" class="sidebar-item" aria-label="HTTP"><!--[--><!--]--> HTTP <!--[--><!--]--></a><!----></li><li><a href="/web/http2.html" class="sidebar-item" aria-label="HTTP 2"><!--[--><!--]--> HTTP 2 <!--[--><!--]--></a><!----></li><li><a href="/web/http3.html" class="sidebar-item" aria-label="http3"><!--[--><!--]--> http3 <!--[--><!--]--></a><!----></li><li><a href="/web/images.html" class="sidebar-item" aria-label="图片"><!--[--><!--]--> 图片 <!--[--><!--]--></a><!----></li><li><a href="/web/ios.html" class="sidebar-item" aria-label="iOS"><!--[--><!--]--> iOS <!--[--><!--]--></a><!----></li><li><a href="/web/jquery.html" class="sidebar-item" aria-label="jquery.md"><!--[--><!--]--> jquery.md <!--[--><!--]--></a><!----></li><li><a href="/web/jsMagic-course.html" class="sidebar-item" aria-label="Babel Node &amp;&amp; Npm"><!--[--><!--]--> Babel Node &amp;&amp; Npm <!--[--><!--]--></a><!----></li><li><a href="/web/less.html" class="sidebar-item" aria-label="Less"><!--[--><!--]--> Less <!--[--><!--]--></a><!----></li><li><a href="/web/loading.html" class="sidebar-item" aria-label="loading"><!--[--><!--]--> loading <!--[--><!--]--></a><!----></li><li><a href="/web/mock.html" class="sidebar-item" aria-label="Mock"><!--[--><!--]--> Mock <!--[--><!--]--></a><!----></li><li><a href="/web/netinfo.html" class="sidebar-item" aria-label="netinfo"><!--[--><!--]--> netinfo <!--[--><!--]--></a><!----></li><li><a href="/web/network-layer.html" class="sidebar-item" aria-label="network-layer.md"><!--[--><!--]--> network-layer.md <!--[--><!--]--></a><!----></li><li><a href="/web/pca.html" class="sidebar-item" aria-label="省市区联动"><!--[--><!--]--> 省市区联动 <!--[--><!--]--></a><!----></li><li><a href="/web/pdf.html" class="sidebar-item" aria-label="PDF"><!--[--><!--]--> PDF <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="性能"><!--[--><!--]--> 性能 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/web/perf.html#guidelines" class="router-link-active router-link-exact-active sidebar-item" aria-label="Guidelines"><!--[--><!--]--> Guidelines <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#方法论" class="router-link-active router-link-exact-active sidebar-item" aria-label="方法论"><!--[--><!--]--> 方法论 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#后台页面" class="router-link-active router-link-exact-active sidebar-item" aria-label="后台页面"><!--[--><!--]--> 后台页面 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#lazy" class="router-link-active router-link-exact-active sidebar-item" aria-label="lazy"><!--[--><!--]--> lazy <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#第三方方案" class="router-link-active router-link-exact-active sidebar-item" aria-label="第三方方案"><!--[--><!--]--> 第三方方案 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#modern-构建" class="router-link-active router-link-exact-active sidebar-item" aria-label="modern 构建"><!--[--><!--]--> modern 构建 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#fcp" class="router-link-active router-link-exact-active sidebar-item" aria-label="FCP"><!--[--><!--]--> FCP <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#ttfb" class="router-link-active router-link-exact-active sidebar-item" aria-label="TTFB"><!--[--><!--]--> TTFB <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#_4x-cpu" class="router-link-active router-link-exact-active sidebar-item" aria-label="4x cpu"><!--[--><!--]--> 4x cpu <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#clear-storage" class="router-link-active router-link-exact-active sidebar-item" aria-label="clear storage"><!--[--><!--]--> clear storage <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#show-coverage" class="router-link-active router-link-exact-active sidebar-item" aria-label="show coverage"><!--[--><!--]--> show coverage <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#main-thread" class="router-link-active router-link-exact-active sidebar-item" aria-label="main thread"><!--[--><!--]--> main thread <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#不同机器差异" class="router-link-active router-link-exact-active sidebar-item" aria-label="不同机器差异"><!--[--><!--]--> 不同机器差异 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#信息流内容页-闪开" class="router-link-active router-link-exact-active sidebar-item" aria-label="信息流内容页“闪开”"><!--[--><!--]--> 信息流内容页“闪开” <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#定位性能问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="定位性能问题"><!--[--><!--]--> 定位性能问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#element-ui" class="router-link-active router-link-exact-active sidebar-item" aria-label="element-ui"><!--[--><!--]--> element-ui <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#fps" class="router-link-active router-link-exact-active sidebar-item" aria-label="FPS"><!--[--><!--]--> FPS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#指标" class="router-link-active router-link-exact-active sidebar-item" aria-label="指标"><!--[--><!--]--> 指标 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#白屏" class="router-link-active router-link-exact-active sidebar-item" aria-label="白屏"><!--[--><!--]--> 白屏 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#首屏" class="router-link-active router-link-exact-active sidebar-item" aria-label="首屏"><!--[--><!--]--> 首屏 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#如何让页面加载更快" class="router-link-active router-link-exact-active sidebar-item" aria-label="如何让页面加载更快"><!--[--><!--]--> 如何让页面加载更快 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#平均帧率" class="router-link-active router-link-exact-active sidebar-item" aria-label="平均帧率"><!--[--><!--]--> 平均帧率 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#quicklink" class="router-link-active router-link-exact-active sidebar-item" aria-label="quicklink"><!--[--><!--]--> quicklink <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#lighthouse-treemap" class="router-link-active router-link-exact-active sidebar-item" aria-label="lighthouse treemap"><!--[--><!--]--> lighthouse treemap <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/web/perf.html#最关注的-3-个" class="router-link-active router-link-exact-active sidebar-item" aria-label="最关注的 3 个"><!--[--><!--]--> 最关注的 3 个 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/web/process.html" class="sidebar-item" aria-label="流程"><!--[--><!--]--> 流程 <!--[--><!--]--></a><!----></li><li><a href="/web/pseudo-class.html" class="sidebar-item" aria-label="伪类"><!--[--><!--]--> 伪类 <!--[--><!--]--></a><!----></li><li><a href="/web/pseudo-elements.html" class="sidebar-item" aria-label="伪元素"><!--[--><!--]--> 伪元素 <!--[--><!--]--></a><!----></li><li><a href="/web/pwa.html" class="sidebar-item" aria-label="PWA"><!--[--><!--]--> PWA <!--[--><!--]--></a><!----></li><li><a href="/web/roadhog.html" class="sidebar-item" aria-label="roadhog"><!--[--><!--]--> roadhog <!--[--><!--]--></a><!----></li><li><a href="/web/scroll.html" class="sidebar-item" aria-label="滚动"><!--[--><!--]--> 滚动 <!--[--><!--]--></a><!----></li><li><a href="/web/scss.html" class="sidebar-item" aria-label="SCSS"><!--[--><!--]--> SCSS <!--[--><!--]--></a><!----></li><li><a href="/web/security.html" class="sidebar-item" aria-label="Web 前端安全"><!--[--><!--]--> Web 前端安全 <!--[--><!--]--></a><!----></li><li><a href="/web/svg.html" class="sidebar-item" aria-label="SVG"><!--[--><!--]--> SVG <!--[--><!--]--></a><!----></li><li><a href="/web/table.html" class="sidebar-item" aria-label="table"><!--[--><!--]--> table <!--[--><!--]--></a><!----></li><li><a href="/web/ui-ux.html" class="sidebar-item" aria-label="UI/UX"><!--[--><!--]--> UI/UX <!--[--><!--]--></a><!----></li><li><a href="/web/unit-test.html" class="sidebar-item" aria-label="单元测试"><!--[--><!--]--> 单元测试 <!--[--><!--]--></a><!----></li><li><a href="/web/upload.html" class="sidebar-item" aria-label="上传"><!--[--><!--]--> 上传 <!--[--><!--]--></a><!----></li><li><a href="/web/url-hash-change.html" class="sidebar-item" aria-label="url-hash-change.md"><!--[--><!--]--> url-hash-change.md <!--[--><!--]--></a><!----></li><li><a href="/web/url-parse.html" class="sidebar-item" aria-label="url-parse.md"><!--[--><!--]--> url-parse.md <!--[--><!--]--></a><!----></li><li><a href="/web/web-browser-compatible.html" class="sidebar-item" aria-label="桌面浏览器兼容"><!--[--><!--]--> 桌面浏览器兼容 <!--[--><!--]--></a><!----></li><li><a href="/web/web-components.html" class="sidebar-item" aria-label="Web 原生组件"><!--[--><!--]--> Web 原生组件 <!--[--><!--]--></a><!----></li><li><a href="/web/web-notification.html" class="sidebar-item" aria-label="Web消息通知"><!--[--><!--]--> Web消息通知 <!--[--><!--]--></a><!----></li><li><a href="/web/web-pay.html" class="sidebar-item" aria-label="网页支付"><!--[--><!--]--> 网页支付 <!--[--><!--]--></a><!----></li><li><a href="/web/webassembly.html" class="sidebar-item" aria-label="WebAssembly - 通用跨编程语言字节码技术"><!--[--><!--]--> WebAssembly - 通用跨编程语言字节码技术 <!--[--><!--]--></a><!----></li><li><a href="/web/webrtc.html" class="sidebar-item" aria-label="webrtc"><!--[--><!--]--> webrtc <!--[--><!--]--></a><!----></li><li><a href="/web/websocket.html" class="sidebar-item" aria-label="websocket"><!--[--><!--]--> websocket <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="性能" tabindex="-1"><a class="header-anchor" href="#性能" aria-hidden="true">#</a> 性能</h1><p>[toc]</p><p><a href="https://godbasin.github.io/front-end-playground/front-end-basic/deep-learning/monitor-and-report.html#%25E6%2595%25B0%25E6%258D%25AE%25E6%2594%25B6%25E9%259B%2586" target="_blank" rel="noopener noreferrer">前端监控体系搭建 | 被删的前端游乐场<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="guidelines" tabindex="-1"><a class="header-anchor" href="#guidelines" aria-hidden="true">#</a> Guidelines</h2><ol><li>审计页面</li><li>使用报告找出优化点</li><li>一次改变一个点</li><li>每次改变后审计，观察效果</li></ol><p><a href="https://www.youtube.com/watch?v=5fLW5Q5ODiE" target="_blank" rel="noopener noreferrer">Improving Load Performance - Chrome DevTools 101 - YouTube<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="方法论" tabindex="-1"><a class="header-anchor" href="#方法论" aria-hidden="true">#</a> 方法论</h2><ul><li>请求 <ul><li>并发</li><li>延迟 Script defer</li><li>预取</li><li>head</li><li>transfer gzipped</li><li>body 压缩</li></ul></li><li>请求与渲染结合 <ul><li>非首屏图片懒加载 | 关键 CSS 拆分内联</li></ul></li></ul><p><a href="https://developers.google.com/web/fundamentals/performance/why-performance-matters/?hl=zh-cn" target="_blank" rel="noopener noreferrer">性能为何至关重要  |  Web Fundamentals  |  Google Developers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.smashingmagazine.com/2019/01/front-end-performance-checklist-2019-pdf-pages/" target="_blank" rel="noopener noreferrer">Front-End Performance Checklist 2019 [PDF, Apple Pages, MS Word] — Smashing Magazine<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://juejin.im/post/5b65105f5188251b134e9778" target="_blank" rel="noopener noreferrer">狙杀页面卡顿 —— Performance 指北 - 掘金<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="后台页面" tabindex="-1"><a class="header-anchor" href="#后台页面" aria-hidden="true">#</a> 后台页面</h2><ul><li><p>使用<code>visibilityChange</code>监听器避免在后台执行不必要的工作，如处理视图变化</p></li><li><p><code>requestAnimationFrame</code> 批量更新，失焦时不会触发 <a href="https://developers.google.com/web/updates/2017/03/background_tabs" target="_blank" rel="noopener noreferrer">Background Tabs in Chrome 57  |  Web  |  Google Developers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>例外，websocket 连接，audio，pinned tabs</p></li></ul><div class="language-text ext-text"><pre class="language-text"><code>Try those flags:

automatic tab discarding disabled

only auto-reload visible tabs disabled

throttle expensive background timers disabled
</code></pre></div><blockquote><p>改善下载时间 保持 JavaScript 包的小巧，特别是对于移动设备。小的 js 包可提高下载速度，降低内存使用率并降低 CPU 成本。 避免只有一个大 js 文件;如果单个 js 文件超过~50-100 kB，则将其拆分为单独的较小的 js 文件。 （通过 HTTP / 2 多路复用，可以同时传输多个请求和 响应消息，从而减少额外请求的开销。） 在移动设备上，你会希望发送的数据更小，特别是因为网络速度，但也保持低内存使用率。 缩短执行时间 避免使主线程保持忙碌的长任务，并可以推断出页面交互的时间。下载后，脚本执行时间现在是主要成本。 避免使用大型内联脚本（因为它们仍然在 主线程上进行了解析和编译）。一个好的经验法则是：如果脚本超过 1 kB，请避免内联（因为 1 kB 也是外部脚本启动时代码缓存的下限）。</p></blockquote><p><a href="https://v8.dev/blog/cost-of-javascript-2019" target="_blank" rel="noopener noreferrer">The cost of JavaScript in 2019 · V8<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://github.com/azl397985856/automate-everything/blob/master/docs/chapter4.md" target="_blank" rel="noopener noreferrer">页面加载性能优化 automate-everything/chapter4.md at master · azl397985856/automate-everything<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="lazy" tabindex="-1"><a class="header-anchor" href="#lazy" aria-hidden="true">#</a> lazy</h2><p>chrome 默认规则，按优先级加载，依然是尽快拉取 chrome 76 支持浏览器原生懒加载，显式指定加载规则 <code>auto</code> 默认 <code>lazy</code> 进入视口才加载 <code>eager</code> 忽略默认规则</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="第三方方案" tabindex="-1"><a class="header-anchor" href="#第三方方案" aria-hidden="true">#</a> 第三方方案</h2><p><a href="https://www.tingyun.com/tingyun_browser.html" target="_blank" rel="noopener noreferrer">听云Browser・实时了解您网站的真实用户体验<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.tingyun.com/tingyun_network.html" target="_blank" rel="noopener noreferrer">测速 - 听云Network・国内领先的网站性能监测与优化产品<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.gatsbyjs.org/blog/2018-10-16-why-mobile-performance-is-crucial/" target="_blank" rel="noopener noreferrer">Journey to the Content Mesh Part 4: Why Mobile Performance Is Crucial | GatsbyJS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="modern-构建" tabindex="-1"><a class="header-anchor" href="#modern-构建" aria-hidden="true">#</a> modern 构建</h2><p>构建两个版本，modern 降低体积，old 兼顾</p><p><a href="https://engineering.universe.com/improving-browser-performance-10x-f9551927dcff" target="_blank" rel="noopener noreferrer">Improving Browser Performance 10x - Universe Engineering<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/GoogleChrome/lighthouse/blob/master/docs/authenticated-pages.md" target="_blank" rel="noopener noreferrer">lighthouse/authenticated-pages.md at master · GoogleChrome/lighthouse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.cnblogs.com/videring/articles/7603864.html" target="_blank" rel="noopener noreferrer">Chrome 中的 First Meaningful Paint - 邹天得 - 博客园<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 算法： a. 首次有效绘制 = 具有最大布局变化的绘制 b. 布局显著性 = 添加的对象数目 / max(1, 页面高度 / 屏幕高度)</p><p>用户期待：页面的首屏内容应在1.5秒内加载完成</p><p>普通用户期望且能够接受的页面加载时间在 3 秒以内</p><p>搜索流量倾斜，3s 红线</p><p><a href="https://developers.weixin.qq.com/community/develop/article/doc/00062cad124c8867cf380f64156c13" target="_blank" rel="noopener noreferrer">前端加载优化及实践 | 微信开放社区<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.itslide.com/slide/244993" target="_blank" rel="noopener noreferrer">杨森 把前端性能监控做到极致 | ITSlide - 专注于PPT幻灯片的分享平台<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://blog.shipengqi.top/2018/10/29/frontend-performance-optimize/" target="_blank" rel="noopener noreferrer">笔记 前端性能优化原理与实践<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>FMP 主要内容用户可见 1220ms 99分 基于真实网站数据</p><p><a href="https://webpagetest.org/easy" target="_blank" rel="noopener noreferrer">WebPageTest - Website Performance and Optimization Test<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>可链接提供 Image Analysis Results，可压缩比</p><p><a href="https://docs.google.com/spreadsheets/d/1Cxzhy5ecqJCucdf1M0iOzM8mIxNc7mmx107o5nj38Eo/edit#gid=0" target="_blank" rel="noopener noreferrer">Lighthouse v3 Score Weighting [MAKE YOUR OWN COPY] - Google 表格<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>可交互时间、速度指标权重更高，FMP 权重最低，比较容易实现</p><p><a href="https://web.dev/lighthouse-performance" target="_blank" rel="noopener noreferrer">Performance audits  |  web.dev<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics#tracking_fmp_using_hero_elements" target="_blank" rel="noopener noreferrer">以用户为中心的性能指标  |  Web Fundamentals  |  Google Developers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>传统指标或单个指标不可靠，Google 定义新指标</p><p>Long Tasks API &gt;50 毫秒</p><p>100 毫秒内响应用户输入</p><p>发生在后，权重大，对用户更重要</p><p>PerformanceObserver 观测实际设备</p><p>首屏加载时间定义 一般 图片 课件，可操作时间</p><p>speedIndex 内容显示速度，综合指标，需要解决一系列问题提升</p><p>持续集成、测试关键指标是否合格，低于阈值判定失败</p><p>用户关注主要内容的展示和可交互，但浏览器不知道</p><p>自定义指标，测量方法 <a href="https://speedcurve.com/blog/user-timing-and-custom-metrics/" target="_blank" rel="noopener noreferrer">SpeedCurve | User Timing and Custom Metrics<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.w3.org/TR/navigation-timing-2/#performanceentry" target="_blank" rel="noopener noreferrer">Navigation Timing Level 2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-text ext-text"><pre class="language-text"><code>&lt;body onload=&quot;init()&quot;&gt;
</code></pre></div><p>这里<code>onload</code>即<code>window.onload</code>，完整 Document 资源加载结束，包括 images, scripts, links and sub-frames</p><p><a href="https://www.infoq.cn/article/pqSFIzu9DFuwmg4e51oM?utm_source=rss&amp;utm_medium=article" target="_blank" rel="noopener noreferrer">让偶现Bug无所遁形：贝壳自研时光机如何解决前端行业痛点？-InfoQ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><blockquote><p>在衡量 Web 页面性能时，最普遍的做法是通过 YSlow、Lighthouse 等工具对页面进行一次性的诊断分析。诚然这些工具可以检查出诸多页面性能的瓶颈和优化点，但我们依然无法感知并量化用户在访问页面时的具体表现，因为真实场景的页面性能会受到诸多因素的影响，如用户使用的终端类型、服务器响应速度、所在地域 CDN 性能等。</p></blockquote><p>真实用户访问 --&gt; 提取性能指标 --&gt; 数据清洗加工 --&gt; 性能分析监控（监控平台）</p><p>高精度时间，小数点后 12 位 <code>performance.now</code>单调递增，不受修改系统时间影响</p><p>原生 DCL --&gt; FP/FCP --&gt; FMP 算法推导 用户感知</p><p>FMP 布局树，布局对象，最大之后的绘制，可见区域 页面高度</p><blockquote><p>First meaningful paint = Paint that follows biggest layout change Biggest layout change means layout with the largest number of LayoutObjectsThatHadNeverHadLayout. In Figure 1, the biggest layout change is at 1.86s, so the next paint (1.907s) is the first meaningful paint.</p></blockquote><h2 id="fcp" tabindex="-1"><a class="header-anchor" href="#fcp" aria-hidden="true">#</a> FCP</h2><p>首次内容绘制 (FCP) 是测量<a href="https://web.dev/user-centric-performance-metrics/#types-of-metrics" target="_blank" rel="noopener noreferrer">感知加载速度<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>的一个以用户为中心的重要指标，因为该项指标会在用户首次在屏幕上看到任何内容时，在页面加载时间轴中标记出相应的点，迅捷的 FCP 有助于让用户确信某些事情正在<a href="https://web.dev/user-centric-performance-metrics/#questions" target="_blank" rel="noopener noreferrer">进行<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><p>PWA 一般 150-200ms，没有网络开销，加载本地资源、执行JS、渲染</p><p>SSR 页面，有网络开销，即使流式加载，理论也会增加 200ms（ping 耗时+服务器处理时间），但由于服务器预渲染比客户端快很多，</p><h2 id="ttfb" tabindex="-1"><a class="header-anchor" href="#ttfb" aria-hidden="true">#</a> TTFB</h2><p>首字节时间(TTFB)用于测量服务器的响应能力。是从客户端发起 HTTP 请求到客户端浏览器收到资源的第一个字节所经历的时间。由 socket 连接时间、发送 HTTP 请求所需时间、收到页面第一个字节所需时间组成。</p><p>Gzip 压缩会导致 TTFB 提升</p><p>大多数服务器的 TTFB 时间都在 50 ms 以下</p><p>本地过多 cookie ？每次请求会带上，上传受限，可能增加 TTFB</p><p>h2 统计到的 TTFB 值会更高，因为 socket 连接更早？</p><p>更好解答 <a href="https://stackoverflow.com/questions/53699584/is-it-possible-to-do-hls-streaming-over-http-2-and-will-it-be-better-latency-wi/53899295#53899295" target="_blank" rel="noopener noreferrer">Is it possible to do HLS streaming over HTTP/2, and will it be better latency-wise than over HTTP/1.1? - Stack Overflow<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> HTTP2 优势在大量并行小请求 而视频流是串行请求大的数据块，HTTP1.1 + keep alive 就能满足，且更高效，不需要处理 HTTP2 基于 TCP 的流控制架构</p><p><a href="https://blog.cloudflare.com/ttfb-time-to-first-byte-considered-meaningles/" target="_blank" rel="noopener noreferrer">Stop worrying about Time To First Byte (TTFB)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://superuser.com/questions/931389/http-2-has-much-higher-ttfb-than-http-1-1" target="_blank" rel="noopener noreferrer">iis - HTTP/2 has much higher TTFB than HTTP/1.1 - Super User<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://haydenjames.io/nginx-tuning-tips-tls-ssl-https-ttfb-latency/" target="_blank" rel="noopener noreferrer">Nginx tuning tips: TLS/SSL HTTPS - Improved TTFB/latency<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://juejin.im/post/5cb54286e51d456e235d9be6" target="_blank" rel="noopener noreferrer">《HTTP/2 基础教程》 阅读摘要 - 掘金<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://zhuanlan.zhihu.com/p/34020557" target="_blank" rel="noopener noreferrer">页面加载与API服务响应--- 性能标定与标准 - 知乎<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>可能是分帧，增加了延迟？ <a href="https://segmentfault.com/a/1190000015030944#item-5-19" target="_blank" rel="noopener noreferrer">HTTP/2 技术调研和性能分析 - 个人文章 - SegmentFault 思否<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_4x-cpu" tabindex="-1"><a class="header-anchor" href="#_4x-cpu" aria-hidden="true">#</a> 4x cpu</h2><p>仅影响主线程，产生额外线程频繁打断主线程 simulated 与 Applied 区别，不实际节流，推测值</p><p><a href="https://stackoverflow.com/questions/50848341/what-does-4x-slower-cpu-throttle-in-chrome-devtools-simulate-in-terms-of-hardwar" target="_blank" rel="noopener noreferrer">performance testing - What does 4x slower CPU throttle in Chrome DevTools simulate in terms of hardware? - Stack Overflow<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="clear-storage" tabindex="-1"><a class="header-anchor" href="#clear-storage" aria-hidden="true">#</a> clear storage</h2><p>选中，模拟用户首次访问 取消选中，模拟重复访问</p><h2 id="show-coverage" tabindex="-1"><a class="header-anchor" href="#show-coverage" aria-hidden="true">#</a> show coverage</h2><p>按文件，按行分析，红色为未用到</p><p>判断是否渲染阻塞资源， show block，刷新，页面是否正常渲染</p><h2 id="main-thread" tabindex="-1"><a class="header-anchor" href="#main-thread" aria-hidden="true">#</a> main thread</h2><ol><li>performance</li><li>reload</li><li>user timing</li><li>bottom-up</li></ol><h2 id="不同机器差异" tabindex="-1"><a class="header-anchor" href="#不同机器差异" aria-hidden="true">#</a> 不同机器差异</h2><p>一次优化在一台机器上测，模拟环境，然后在真实环境验证。跨机器标准化可操作性差，影响因素太多。同一台机器，尽量减少影响结果的差异因素。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><ul><li>先审计再优化</li><li>一次改一点，隔离变化对性能影响</li></ul><p><a href="https://developers.google.com/web/tools/chrome-devtools/speed/get-started" target="_blank" rel="noopener noreferrer">Optimize Website Speed With Chrome DevTools  |  Tools for Web Developers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://zhuanlan.zhihu.com/p/91365316" target="_blank" rel="noopener noreferrer">Lighthouse 测试内幕 - 知乎<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="信息流内容页-闪开" tabindex="-1"><a class="header-anchor" href="#信息流内容页-闪开" aria-hidden="true">#</a> 信息流内容页“闪开”</h2><p>流程上在Webview列表初始化的时候进行详情页资源的预加载，同时针对视图内的信息流列表进行内容页的预渲染，从而在用户点击详情页的时候可以直接从内存中读出HTML，达到闪开的效果。</p><p>它将渲染的损耗分摊到了客户端，从而保证渲染不会受高流量访问的影响</p><h2 id="定位性能问题" tabindex="-1"><a class="header-anchor" href="#定位性能问题" aria-hidden="true">#</a> 定位性能问题</h2><p>问题： 页面滚动不流畅</p><ol><li>打开 console - <code>...</code> - rendering - Paint flashing</li><li>绿色块表示存在性能问题</li><li>反复移除内容，直到绿色块消失</li><li><code>fixed</code> 引起</li></ol><p><a href="https://www.youtube.com/watch?v=2vFrZXWiwIc" target="_blank" rel="noopener noreferrer">Troubleshooting rendering performance issues - YouTube<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://stackoverflow.com/questions/26907265/css-will-change-how-to-use-it-how-it-works" target="_blank" rel="noopener noreferrer">css3 - CSS <code>will-change</code> - how to use it, how it works - Stack Overflow<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="element-ui" tabindex="-1"><a class="header-anchor" href="#element-ui" aria-hidden="true">#</a> element-ui</h2><p>css vendor common 重合 babel 配置隐式 import css 改用 scss import，线开 js split 机制</p><p><a href="https://www.smashingmagazine.com/2020/01/front-end-performance-checklist-2020-pdf-pages/" target="_blank" rel="noopener noreferrer">Front-End Performance Checklist 2020 [PDF, Apple Pages, MS Word] — Smashing Magazine<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="fps" tabindex="-1"><a class="header-anchor" href="#fps" aria-hidden="true">#</a> FPS</h2><p>基础值 24，低于时，感觉卡顿 理想值 60，最佳状态，更流畅</p><p>收集 FPS list</p><p>连续出现3个低于20的 FPS 即可认为网页存在卡顿。</p><p><a href="https://zhuanlan.zhihu.com/p/39292837" target="_blank" rel="noopener noreferrer">如何监控网页的卡顿？ - 知乎<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">let</span> hasFocus <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">hasFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;focus&#39;</span><span class="token punctuation">,</span> focusListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span> blurListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>https://github.com/GoogleChromeLabs/squoosh/blob/dev/src/shared/prerendered-app/Intro/blob-anim/index.ts#L337</p><p><a href="https://zhuanlan.zhihu.com/p/420330110" target="_blank" rel="noopener noreferrer">前端监控 SDK 的一些技术要点原理分析 - 知乎<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="指标" tabindex="-1"><a class="header-anchor" href="#指标" aria-hidden="true">#</a> 指标</h2><p>起始时间，是导航开始时间</p><h2 id="白屏" tabindex="-1"><a class="header-anchor" href="#白屏" aria-hidden="true">#</a> 白屏</h2><p>定义：渲染出第一个字</p><p>计算：</p><ul><li>白屏结束时间：head最底部</li></ul><p>白屏原因，表现在 SPA 单页应用上，包体积过大，请求、解析耗时长（默认 html 一个 app 标签，等 JS 加载后 mount）</p><p>优化思路</p><ol><li><code>app</code>标签增加 loading 动画，基本没有白屏了</li><li>请求：大包拆分，按需加载</li><li>解析：SSR/SSG</li></ol><h2 id="首屏" tabindex="-1"><a class="header-anchor" href="#首屏" aria-hidden="true">#</a> 首屏</h2><p>计算：首屏线（第一屏内容底部在HTML文档的什么位置）</p><p>dom 稳定 MutationObserver</p><ul><li>body</li><li>层级稳定</li></ul><p>window.onload or mounted</p><h2 id="如何让页面加载更快" tabindex="-1"><a class="header-anchor" href="#如何让页面加载更快" aria-hidden="true">#</a> 如何让页面加载更快</h2><p>源码：代码分割，摇树 工程化：压缩、资源优化 网络：缓存、CDN</p><h2 id="平均帧率" tabindex="-1"><a class="header-anchor" href="#平均帧率" aria-hidden="true">#</a> 平均帧率</h2><p>Frame Timing API <a href="https://blog.51cto.com/zhangchiworkos/2712114" target="_blank" rel="noopener noreferrer">【前端性能】Web 动画帧率（FPS）计算_51CTO博客_动画常用帧率<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> firefox 自带？ <a href="https://contest-server.cs.uchicago.edu/ref/JavaScript/developer.mozilla.org/en-US/docs/Web/API/Frame_Timing_API/Using_the_Frame_Timing_API.html" target="_blank" rel="noopener noreferrer">Using the Frame Timing API<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="quicklink" tabindex="-1"><a class="header-anchor" href="#quicklink" aria-hidden="true">#</a> quicklink</h2><p>闲置时拉取视口内链接资源，可快速接入</p><p>https://github.com/GoogleChromeLabs/quicklink</p><h2 id="lighthouse-treemap" tabindex="-1"><a class="header-anchor" href="#lighthouse-treemap" aria-hidden="true">#</a> lighthouse treemap</h2><h2 id="最关注的-3-个" tabindex="-1"><a class="header-anchor" href="#最关注的-3-个" aria-hidden="true">#</a> 最关注的 3 个</h2><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: gongyi01@baidu.com">gongyi01</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/web/pdf.html" class="" aria-label="PDF"><!--[--><!--]--> PDF <!--[--><!--]--></a></span><span class="next"><a href="/web/process.html" class="" aria-label="流程"><!--[--><!--]--> 流程 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.10bf14e8.js" defer></script>
  </body>
</html>
