<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.37">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/favicon.ico"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#0089a7"><meta name="referrer" content="no-referrer"><link rel="apple-touch-icon" sizes="180x180" href="/favicon.ico"><title>React | Oaker小站</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app.98d9de05.js"><link rel="modulepreload" href="/assets/react.html.9d9acae4.js"><link rel="modulepreload" href="/assets/react.html.71c2cc9a.js">
    <link rel="stylesheet" href="/assets/style.5af559d1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Oaker小站</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/concept.html" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/web/html.html" class="" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frameworks/vue.html" class="" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/node/concept.html" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/markdown.html" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/algorithms/index.html" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/solutions/fib.html" class="" aria-label="题解"><!--[--><!--]--> 题解 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cyio" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="主页"><!--[--><!--]--> 主页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/concept.html" class="" aria-label="JavaScript"><!--[--><!--]--> JavaScript <!--[--><!--]--></a></div><div class="navbar-item"><a href="/web/html.html" class="" aria-label="Web"><!--[--><!--]--> Web <!--[--><!--]--></a></div><div class="navbar-item"><a href="/frameworks/vue.html" class="" aria-label="框架"><!--[--><!--]--> 框架 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/node/concept.html" class="" aria-label="Node"><!--[--><!--]--> Node <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tools/markdown.html" class="" aria-label="工具"><!--[--><!--]--> 工具 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/algorithms/index.html" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/javascript/solutions/fib.html" class="" aria-label="题解"><!--[--><!--]--> 题解 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/cyio" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">框架 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/frameworks/ajax-http-request-libray.html" class="sidebar-item" aria-label="ajax/http 请求库、工具"><!--[--><!--]--> ajax/http 请求库、工具 <!--[--><!--]--></a><!----></li><li><a href="/frameworks/bootstrap.html" class="sidebar-item" aria-label="Bootstrap"><!--[--><!--]--> Bootstrap <!--[--><!--]--></a><!----></li><li><a href="/frameworks/cropperjs.html" class="sidebar-item" aria-label="cropperjs"><!--[--><!--]--> cropperjs <!--[--><!--]--></a><!----></li><li><a href="/frameworks/date-fns.html" class="sidebar-item" aria-label="date-fns"><!--[--><!--]--> date-fns <!--[--><!--]--></a><!----></li><li><a href="/frameworks/element-ui.html" class="sidebar-item" aria-label="element-ui"><!--[--><!--]--> element-ui <!--[--><!--]--></a><!----></li><li><a href="/frameworks/flutter.html" class="sidebar-item" aria-label="Flutter"><!--[--><!--]--> Flutter <!--[--><!--]--></a><!----></li><li><a href="/frameworks/mobx.html" class="sidebar-item" aria-label="Mobx"><!--[--><!--]--> Mobx <!--[--><!--]--></a><!----></li><li><a href="/frameworks/next.html" class="sidebar-item" aria-label="Next"><!--[--><!--]--> Next <!--[--><!--]--></a><!----></li><li><a href="/frameworks/qwik.html" class="sidebar-item" aria-label="qwik.md"><!--[--><!--]--> qwik.md <!--[--><!--]--></a><!----></li><li><a href="/frameworks/react-issues.html" class="sidebar-item" aria-label="react issues"><!--[--><!--]--> react issues <!--[--><!--]--></a><!----></li><li><a href="/frameworks/react-native.html" class="sidebar-item" aria-label="React Native"><!--[--><!--]--> React Native <!--[--><!--]--></a><!----></li><li><a href="/frameworks/react-source-code.html" class="sidebar-item" aria-label="React source code"><!--[--><!--]--> React source code <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frameworks/react.html#为什么用" class="router-link-active router-link-exact-active sidebar-item" aria-label="为什么用"><!--[--><!--]--> 为什么用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#学习参考" class="router-link-active router-link-exact-active sidebar-item" aria-label="学习参考"><!--[--><!--]--> 学习参考 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#virtual-dom" class="router-link-active router-link-exact-active sidebar-item" aria-label="Virtual DOM"><!--[--><!--]--> Virtual DOM <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#state" class="router-link-active router-link-exact-active sidebar-item" aria-label="state"><!--[--><!--]--> state <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#布局总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="布局总结"><!--[--><!--]--> 布局总结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#jsx" class="router-link-active router-link-exact-active sidebar-item" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frameworks/react.html#定义" class="router-link-active router-link-exact-active sidebar-item" aria-label="定义"><!--[--><!--]--> 定义 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#创建和使用组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建和使用组件"><!--[--><!--]--> 创建和使用组件 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/frameworks/react.html#render-中绑定函数提到外面" class="router-link-active router-link-exact-active sidebar-item" aria-label="render 中绑定函数提到外面"><!--[--><!--]--> render 中绑定函数提到外面 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#learn" class="router-link-active router-link-exact-active sidebar-item" aria-label="learn"><!--[--><!--]--> learn <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#hooks" class="router-link-active router-link-exact-active sidebar-item" aria-label="hooks"><!--[--><!--]--> hooks <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frameworks/react.html#usestate" class="router-link-active router-link-exact-active sidebar-item" aria-label="useState"><!--[--><!--]--> useState <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#useeffect" class="router-link-active router-link-exact-active sidebar-item" aria-label="useEffect"><!--[--><!--]--> useEffect <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/frameworks/react.html#生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期"><!--[--><!--]--> 生命周期 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/frameworks/react.html#componentdidupdate" class="router-link-active router-link-exact-active sidebar-item" aria-label="componentDidUpdate"><!--[--><!--]--> componentDidUpdate <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/frameworks/react.html#组件演化" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件演化"><!--[--><!--]--> 组件演化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#proptypes" class="router-link-active router-link-exact-active sidebar-item" aria-label="PropTypes"><!--[--><!--]--> PropTypes <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#portal" class="router-link-active router-link-exact-active sidebar-item" aria-label="Portal"><!--[--><!--]--> Portal <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#react-memo-vs-usememo" class="router-link-active router-link-exact-active sidebar-item" aria-label="React.memo vs useMemo"><!--[--><!--]--> React.memo vs useMemo <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#react-diff-算法" class="router-link-active router-link-exact-active sidebar-item" aria-label="React diff 算法"><!--[--><!--]--> React diff 算法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#懒加载" class="router-link-active router-link-exact-active sidebar-item" aria-label="懒加载"><!--[--><!--]--> 懒加载 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/frameworks/react.html#setstate-何时同步、何时异步" class="router-link-active router-link-exact-active sidebar-item" aria-label="setState 何时同步、何时异步"><!--[--><!--]--> setState 何时同步、何时异步 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/frameworks/redux.html" class="sidebar-item" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a><!----></li><li><a href="/frameworks/solidjs.html" class="sidebar-item" aria-label="SolidJS"><!--[--><!--]--> SolidJS <!--[--><!--]--></a><!----></li><li><a href="/frameworks/svelte.html" class="sidebar-item" aria-label="Svelte"><!--[--><!--]--> Svelte <!--[--><!--]--></a><!----></li><li><a href="/frameworks/swiper.html" class="sidebar-item" aria-label="Swiper"><!--[--><!--]--> Swiper <!--[--><!--]--></a><!----></li><li><a href="/frameworks/tailwind.html" class="sidebar-item" aria-label="Tailwind CSS"><!--[--><!--]--> Tailwind CSS <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vite.html" class="sidebar-item" aria-label="vite"><!--[--><!--]--> vite <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vue-components.html" class="sidebar-item" aria-label="vue-components"><!--[--><!--]--> vue-components <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vue-router.html" class="sidebar-item" aria-label="vue-router"><!--[--><!--]--> vue-router <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vue.html" class="sidebar-item" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vue2-source-code.html" class="sidebar-item" aria-label="Vue 源码学习"><!--[--><!--]--> Vue 源码学习 <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vue3-source-code.html" class="sidebar-item" aria-label="Vue 3 源码学习"><!--[--><!--]--> Vue 3 源码学习 <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vue3.html" class="sidebar-item" aria-label="Vue 3"><!--[--><!--]--> Vue 3 <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vuejs-issues.html" class="sidebar-item" aria-label="vue-issues"><!--[--><!--]--> vue-issues <!--[--><!--]--></a><!----></li><li><a href="/frameworks/vuex.html" class="sidebar-item" aria-label="Vuex"><!--[--><!--]--> Vuex <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="react" tabindex="-1"><a class="header-anchor" href="#react" aria-hidden="true">#</a> React</h1><nav class="table-of-contents"><ul><li><a aria-current="page" href="/frameworks/react.html#为什么用" class="router-link-active router-link-exact-active">为什么用</a></li><li><a aria-current="page" href="/frameworks/react.html#学习参考" class="router-link-active router-link-exact-active">学习参考</a></li><li><a aria-current="page" href="/frameworks/react.html#virtual-dom" class="router-link-active router-link-exact-active">Virtual DOM</a></li><li><a aria-current="page" href="/frameworks/react.html#state" class="router-link-active router-link-exact-active">state</a></li><li><a aria-current="page" href="/frameworks/react.html#布局总结" class="router-link-active router-link-exact-active">布局总结</a></li><li><a aria-current="page" href="/frameworks/react.html#jsx" class="router-link-active router-link-exact-active">JSX</a><ul><li><a aria-current="page" href="/frameworks/react.html#定义" class="router-link-active router-link-exact-active">定义</a></li><li><a aria-current="page" href="/frameworks/react.html#创建和使用组件" class="router-link-active router-link-exact-active">创建和使用组件</a></li></ul></li><li><a aria-current="page" href="/frameworks/react.html#render-中绑定函数提到外面" class="router-link-active router-link-exact-active">render 中绑定函数提到外面</a></li><li><a aria-current="page" href="/frameworks/react.html#learn" class="router-link-active router-link-exact-active">learn</a></li><li><a aria-current="page" href="/frameworks/react.html#hooks" class="router-link-active router-link-exact-active">hooks</a><ul><li><a aria-current="page" href="/frameworks/react.html#usestate" class="router-link-active router-link-exact-active">useState</a></li><li><a aria-current="page" href="/frameworks/react.html#useeffect" class="router-link-active router-link-exact-active">useEffect</a></li></ul></li><li><a aria-current="page" href="/frameworks/react.html#生命周期" class="router-link-active router-link-exact-active">生命周期</a><ul><li><a aria-current="page" href="/frameworks/react.html#componentdidupdate" class="router-link-active router-link-exact-active">componentDidUpdate</a></li></ul></li><li><a aria-current="page" href="/frameworks/react.html#组件演化" class="router-link-active router-link-exact-active">组件演化</a></li><li><a aria-current="page" href="/frameworks/react.html#proptypes" class="router-link-active router-link-exact-active">PropTypes</a></li><li><a aria-current="page" href="/frameworks/react.html#portal" class="router-link-active router-link-exact-active">Portal</a></li><li><a aria-current="page" href="/frameworks/react.html#react-memo-vs-usememo" class="router-link-active router-link-exact-active">React.memo vs useMemo</a></li><li><a aria-current="page" href="/frameworks/react.html#react-diff-算法" class="router-link-active router-link-exact-active">React diff 算法</a></li><li><a aria-current="page" href="/frameworks/react.html#懒加载" class="router-link-active router-link-exact-active">懒加载</a></li><li><a aria-current="page" href="/frameworks/react.html#setstate-何时同步、何时异步" class="router-link-active router-link-exact-active">setState 何时同步、何时异步</a></li></ul></nav><h2 id="为什么用" tabindex="-1"><a class="header-anchor" href="#为什么用" aria-hidden="true">#</a> 为什么用</h2><ul><li><p>名称含义：re hack html</p></li><li><p>传统 web ，要更新一个状态，必须刷新整个页面，而重绘的伤害性体验，是传统 web 无法解决的</p><p>如何追踪变化？如何按需更新？</p></li><li><p>组件化，解决协作，复用问题</p><ul><li>VirtualDOM：JS 版的 DOM ，高效渲染 DOM（diff） ，允许服务端渲染</li><li>diff 两个 VirtualDOM 树</li><li>改变节点类型，会略过 diff</li></ul></li><li><p>函数就是组件</p><ul><li>组件内任意嵌套组件</li></ul></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">c1</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1 <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>c1 style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;red&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><blockquote><p>React 再加上函数式编程技巧，项目可以无往而不利</p></blockquote><ul><li><p>显示和状态分离</p><p>用 stateless 组件来负责显示，class 组件来负责状态和逻辑</p></li></ul><h2 id="学习参考" tabindex="-1"><a class="header-anchor" href="#学习参考" aria-hidden="true">#</a> 学习参考</h2><p><a href="http://developer.telerik.com/featured/5-steps-for-learning-react-application-development/" target="_blank" rel="noopener noreferrer">5 Steps for Learning React Application Development - Telerik Developer Network<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="virtual-dom" tabindex="-1"><a class="header-anchor" href="#virtual-dom" aria-hidden="true">#</a> Virtual DOM</h2><ul><li>两个前提：JS 高效，DOM 操作慢</li><li>生成虚拟 DOM 树，更新时对比，用最少的操作更新视图</li></ul><h2 id="state" tabindex="-1"><a class="header-anchor" href="#state" aria-hidden="true">#</a> state</h2><ul><li><p>state 计算依赖，依赖值</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// won&#39;t update</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">previousState</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">counter</span><span class="token operator">:</span> previousState<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li><li><p>state 可作为 props 向下传递，props 按组件树向下传递，而 state 由组件单独管理和由函数冒泡改变</p></li></ul><h2 id="布局总结" tabindex="-1"><a class="header-anchor" href="#布局总结" aria-hidden="true">#</a> 布局总结</h2><ol><li>react 宽度基于 pt 为单位， 可以通过 Dimensions 来获取宽高，PixelRatio 获取密度，如果想使用百分比，可以通过获取屏幕宽度手动计算。</li><li>基于 flex 的布局 <ol><li>view 默认宽度为 100%</li><li>水平居中用 alignItems, 垂直居中用 justifyContent</li><li>基于 flex 能够实现现有的网格系统需求，且网格能够各种嵌套无 bug</li></ol></li><li>图片布局 <ol><li>通过 Image.resizeMode 来适配图片布局，包括 contain, cover, stretch</li><li>默认不设置模式等于 cover 模式</li><li>contain 模式自适应宽高，给出高度值即可</li><li>cover 铺满容器，但是会做截取</li><li>stretch 铺满容器，拉伸</li></ol></li><li>定位 <ol><li>定位相对于父元素，父元素不用设置 position 也行</li><li>padding 设置在 Text 元素上的时候会存在 bug。所有 padding 变成了 marginBottom</li></ol></li><li>文本元素 <ol><li>文字必须放在 Text 元素里边</li><li>Text 元素可以相互嵌套，且存在样式继承关系</li><li>numberOfLines 需要放在最外层的 Text 元素上，且虽然截取了文字但是还是会占用空间</li></ol></li></ol><h2 id="jsx" tabindex="-1"><a class="header-anchor" href="#jsx" aria-hidden="true">#</a> JSX</h2><h3 id="定义" tabindex="-1"><a class="header-anchor" href="#定义" aria-hidden="true">#</a> 定义</h3><p>像 XML 的 JavaScript 语法扩展，用于描述包含属性的树状结构</p><p>我们只要记住 HTML 只是代码创建 DOM 的一种语法形式，就很容易理解 JSX。而这种使用代码构建界面的方式，完全消除了业务逻辑和界面元素之间的隔阂，让代码更加直观和易于维护。</p><ul><li>组件(首字母大写)</li><li>HTML 标签(首字母小写)</li></ul><h3 id="创建和使用组件" tabindex="-1"><a class="header-anchor" href="#创建和使用组件" aria-hidden="true">#</a> 创建和使用组件</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 创建</span>
<span class="token keyword">var</span> MyComponent <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">/*...*/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 使用</span>
<span class="token keyword">var</span> myElement <span class="token operator">=</span> <span class="token operator">&lt;</span>MyComponent someProperty<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>myElement<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;example&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>命名组件解决子组件较多的情况</p><ul><li>如何使用混合子表达式</li><li>如何添加注释</li></ul><p>特殊属性:</p><ul><li>className 替换 class</li><li>htmlFor 替换 for</li></ul><p>可使用点号对象访问方式，构成组件名</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> MyComponents <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">DatePicker</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">DatePicker</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Imagine a <span class="token punctuation">{</span>props<span class="token punctuation">.</span>color<span class="token punctuation">}</span> datepicker here<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">BlueDatePicker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>MyComponents<span class="token punctuation">.</span>DatePicker color<span class="token operator">=</span><span class="token string">&quot;blue&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>首字母大写才会被解析为用户定义组件，否则会认为是普通 HTML 标签</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> components <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">photo</span><span class="token operator">:</span> PhotoStory<span class="token punctuation">,</span>
  <span class="token literal-property property">video</span><span class="token operator">:</span> VideoStory
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Story</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> SpecificStory <span class="token operator">=</span> components<span class="token punctuation">[</span>props<span class="token punctuation">.</span>storyType<span class="token punctuation">]</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>SpecificStory story<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>story<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>扩展属性</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Greeting firstName<span class="token operator">=</span><span class="token string">&quot;Ben&quot;</span> lastName<span class="token operator">=</span><span class="token string">&quot;Hector&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">App2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&#39;Ben&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&#39;Hector&#39;</span> <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Greeting <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>0</code>会被渲染，使用逻辑表达式前要确保条件类型是布尔值</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span>props<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span>
    <span class="token operator">&lt;</span>MessageList messages<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>messages<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span>props<span class="token punctuation">.</span>messages<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
    <span class="token operator">&lt;</span>MessageList messages<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>messages<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><h2 id="render-中绑定函数提到外面" tabindex="-1"><a class="header-anchor" href="#render-中绑定函数提到外面" aria-hidden="true">#</a> render 中绑定函数提到外面</h2><p>官方解答，使用箭头函数是 OK 的，在你遇到性能问题之前</p><p><a href="https://reactjs.org/docs/faq-functions.html" target="_blank" rel="noopener noreferrer">Passing Functions to Components – React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>原理：创建新函数，意味着 prop 值每次变化，进而不必要地 re render 子组件</p><ol><li>外提箭头函数赋值</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;clickity&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在构造器中统一绑定</li></ol><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;clickity&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li><p>解决绑定传参，拆分组件</p><p><a href="https://daveceddia.com/avoid-bind-when-passing-props/" target="_blank" rel="noopener noreferrer">Don&#39;t Use Bind When Passing Props<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li></ol><h2 id="learn" tabindex="-1"><a class="header-anchor" href="#learn" aria-hidden="true">#</a> learn</h2><p>state 每个组件私有</p><p>当需要获取多个子组件数据，或两个组件需要相互通讯，state 提升到父组件</p><p>受控组件</p><blockquote><p>受控”与“非受控”两个概念，区别在于这个组件的状态是否可以被外部修改。一个设计得当的组件应该同时支持“受控”与“非受控”两种形式，即当开发者不控制组件属性时，组件自己管理状态，而当开发者控制组件属性时，组件该由属性控制。而开发一个复杂组件更需要注意这点，以避免只有部分属性受控，使其变成一个半受控组件。 <a href="https://www.yuque.com/ant-design/course/goozth" target="_blank" rel="noopener noreferrer">受控组件与非受控组件 · 语雀<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>不可变数据：</p><ul><li><p>跟踪更容易</p></li><li><p>优势，帮助创建 pure components，变化时机 --&gt; 确定重新渲染</p></li><li><p>只有 render，不含私有数据(state)，写成函数组件更简单</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">NoStateComp</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre></div></li><li><p>React 元素 对象 一等公民 参数传递</p></li><li><p>动态列表，指定 key，且 key 一般不要用数组索引</p></li><li><p>组合，no 继承</p></li><li><p>大型 webapp 首选</p></li><li><p>组件划分原则，单一职责</p></li><li><p>渲染 UI vs 添加交互</p><p>大量编码 vs 大量细节</p></li><li><p>prop vs state</p><p>构建静态版本时，不需要 state</p></li><li><p>小型 vs 大型</p><p>自下而上 vs 自上而下</p></li></ul><p>state 需要定义的最少数据</p><p>创建新上层组件理由，需要存放共同 state</p><ul><li>class ==&gt; hook why <ul><li>组件复用，抽象层嵌套地域</li><li>生命周期，不相关逻辑分散</li><li>class this 理解难度大</li></ul></li></ul><h2 id="hooks" tabindex="-1"><a class="header-anchor" href="#hooks" aria-hidden="true">#</a> hooks</h2><ul><li>hooks 是一种在函数式组件内使用 state 逻辑，消除写 classes 的必要。</li><li>vue 可以结合 mixin 来写无状态的函数式组件。mixin 的缺点是无法消费或使用另一个 mixin。导致链式逻辑难以实现。</li><li>更清晰定义和共享逻辑、传递 state</li></ul><p><a href="https://blog.logrocket.com/hooks-are-coming-to-vue/" target="_blank" rel="noopener noreferrer">Hooks are coming to Vue.js version 3.0 - LogRocket Blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://zhuanlan.zhihu.com/p/66170210" target="_blank" rel="noopener noreferrer">useHooks~小窍门 - 知乎<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="usestate" tabindex="-1"><a class="header-anchor" href="#usestate" aria-hidden="true">#</a> useState</h3><p>use 设置对象或数组时替换， 有别于 class 合并</p><p>除非需要替换更新的一类数据，否则都应该分开定义</p><p><a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#should-i-use-one-or-many-state-variables" target="_blank" rel="noopener noreferrer">Hooks FAQ – React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://blog.solutotlv.com/react-class-to-hooks/" target="_blank" rel="noopener noreferrer">React Class features vs. Hooks equivalents • Soluto Engineering Blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://github.com/shanggqm/blog/issues/4" target="_blank" rel="noopener noreferrer">无意识设计-复盘 React Hook 的创造过程 · Issue #4 · shanggqm/blog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li><p>调用限制：</p><ul><li><p>只在 top level 调用 Hooks，而不能在循环、条件或嵌套函数中使用</p></li><li><p>只在 React 函数组件或自定义 Hooks 中调用，而不能在普通 JS 函数中</p></li></ul></li><li><p>useState 里数据务必为 immutable</p></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code>        <span class="token comment">// bad 这样无法触发更新</span>
        <span class="token function">setList</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// good 必须传入一个新的对象</span>
        <span class="token function">setList</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="useeffect" tabindex="-1"><a class="header-anchor" href="#useeffect" aria-hidden="true">#</a> useEffect</h3><ul><li><p>async 要用 IIFE 包起来</p></li><li><p>组件渲染后执行，不阻塞绘制。<code>componentDidMount</code> and <code>componentDidUpdate</code>是同步</p><p><a href="https://frezc.github.io/2019/03/23/react-hooks-traps/" target="_blank" rel="noopener noreferrer">react hooks 踩坑记录 | Code for fun<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>什么情况下不用？操作 DOM 且每次渲染不一样，DOM 更新后又触发 effect。用户会看到界面闪烁，只有这一种情况需要使用<code>useLayoutEffect</code>，执行在 dom 更新后，绘制前</p></li></ul><p><a href="https://kentcdodds.com/blog/useeffect-vs-uselayouteffect" target="_blank" rel="noopener noreferrer">useEffect vs useLayoutEffect<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Fragment 相当于 vue 的 template</p><p>加空格方式 <code>{&#39; &#39;}</code></p><p>setState 更新回调</p><ol><li>componentDidUpdate</li><li><code>setState(updater, callback)</code></li></ol><p>render return 里可直接定义变量<code>const ChapterName = &lt;h2&gt;{chapterName}&lt;/h2&gt;;</code></p><h2 id="生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期" aria-hidden="true">#</a> 生命周期</h2><p><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noopener noreferrer">React lifecycle methods diagram<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="componentdidupdate" tabindex="-1"><a class="header-anchor" href="#componentdidupdate" aria-hidden="true">#</a> componentDidUpdate</h3><ul><li>组件更新后立即调用，首次渲染不调用</li><li>用于网络请求导致 props 变化等</li><li>注意，执行操作要有条件，避免死循环</li></ul><h2 id="组件演化" tabindex="-1"><a class="header-anchor" href="#组件演化" aria-hidden="true">#</a> 组件演化</h2><p><img src="https://img.oaker.bid/?url=http://ww2.sinaimg.cn/large/4e5d3ea7ly1gikjo188z2j21q80x8gs0.jpg" alt="image.png"></p><h2 id="proptypes" tabindex="-1"><a class="header-anchor" href="#proptypes" aria-hidden="true">#</a> PropTypes</h2><p>默认非必须，即允许 null / undefined</p><h2 id="portal" tabindex="-1"><a class="header-anchor" href="#portal" aria-hidden="true">#</a> Portal</h2><p>仅影响 DOM 结构，不影响事件、生命周期、组件树</p><h2 id="react-memo-vs-usememo" tabindex="-1"><a class="header-anchor" href="#react-memo-vs-usememo" aria-hidden="true">#</a> React.memo vs useMemo</h2><p>类型，顶层 api，hooks 第二参数，比较函数（是否相等），依赖数组</p><p>避免受</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">propsAreEqual</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">prevProp</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">nextProp</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>prevProp<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>nextProp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>Comp<span class="token punctuation">,</span> propsAreEqual<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>useMemo 缓存计算值，仅依赖变化时重新计算</p><h2 id="react-diff-算法" tabindex="-1"><a class="header-anchor" href="#react-diff-算法" aria-hidden="true">#</a> React diff 算法</h2><ul><li>不同元素类型，旧元素卸载，挂载新元素</li><li>相同类型的 DOM 元素，只更新属性</li><li>相同类型的 Component 元素，更新 prop</li><li>DOM 子元素遍历比较，顺序发生变化会全部认为 diff，可用 key 显式指明是否是同一元素</li></ul><p><a href="https://reactjs.org/docs/reconciliation.html" target="_blank" rel="noopener noreferrer">Reconciliation – React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="http://benweizhu.github.io/blog/2018/04/22/deep-thinking-in-react-5/" target="_blank" rel="noopener noreferrer">React的思考（五）- Reconciliation - NO END FOR LEARNING<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>不可变数据优势 <a href="https://zh-hans.reactjs.org/tutorial/tutorial.html#why-immutability-is-important" target="_blank" rel="noopener noreferrer">入门教程: 认识 React – React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>易于实现复杂特性，如撤销和恢复</li></ul><h2 id="懒加载" tabindex="-1"><a class="header-anchor" href="#懒加载" aria-hidden="true">#</a> 懒加载</h2><p>React.lazy 配合 Suspense</p><h2 id="setstate-何时同步、何时异步" tabindex="-1"><a class="header-anchor" href="#setstate-何时同步、何时异步" aria-hidden="true">#</a> setState 何时同步、何时异步</h2><p>与 Vue 原理一样，由于是状态驱动视图，如果 state 短时间内频繁设置，是否要立刻响应渲染呢？当然不是，所以要在一次同步代码执行完、合并更新，在 React 中是等父子组件的内置事件监听器中的 setState 全部执行完。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: icaner@qq.com">cyio</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/frameworks/react-source-code.html" class="" aria-label="React source code"><!--[--><!--]--> React source code <!--[--><!--]--></a></span><span class="next"><a href="/frameworks/redux.html" class="" aria-label="Redux"><!--[--><!--]--> Redux <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.98d9de05.js" defer></script>
  </body>
</html>
