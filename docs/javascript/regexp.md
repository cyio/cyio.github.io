# æ­£åˆ™è¡¨è¾¾å¼

[[toc]]

[any86/any-rule: ğŸ¦• å¸¸ç”¨æ­£åˆ™å¤§å…¨, æ”¯æŒ web / vscode / idea / Alfred Workflow å¤šå¹³å°](https://github.com/any86/any-rule)

> å­¦ä¹ ç›®æ ‡ï¼šåŸºç¡€æ‰å®ï¼Œç†Ÿç»ƒè¿ç”¨
> ç§¯ç´¯ä¸€äº›ç»ƒä¹ é¢˜ï¼Œéš”æ®µæ—¶é—´å›å¿†è€ƒå¯Ÿ

åªèƒ½å¤„ç†å­—ç¬¦ä¸²ï¼Œä¸èƒ½å¤„ç†è¯­æ³•åˆ†æï¼ˆè¯­æ³•è¡¨è¾¾ç¤ºï¼‰

```js
var re = /hello src=(.+) yes/; // åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè¿™é‡Œä¸æ˜¯å­—ç¬¦ä¸²
var str = "hello src=value yes";
re.exec(str); // è¿”å›ç»“æœæ•°ç»„æˆ–nullï¼Œå¦‚æœåªéœ€è¦çŸ¥é“ true æˆ– falseï¼Œç”¨ test æˆ– String.search/indexOf
alert(RegExp.$1); //è·å–ç¬¬ä¸€ä¸ªåˆ†ç»„åŒ¹é…

g è¡¨ç¤ºæ‰§è¡Œå¤šæ¬¡ï¼Œç¬¦åˆåŒ¹é…çš„å¯èƒ½æœ‰å¤šä¸ª
åŒ¹é…å­å­—ç¬¦ä¸²ï¼Œä» lastIndex å¼€å§‹
```

## match/exec/test

> RegExp.prototype.test()
> RegExp.prototype.exec()
> String.prototype.match()

```js
/bc/.exec('abc').index === 'abc'.match('bc').index
```
æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…ç´¢å¼•ï¼Œä¸¤ä¸ªéƒ½å¯ä»¥ï¼Œè¿”å›ä¸€è‡´

exec ä¸æ”¯æŒ g

```js
let s = 'abcab'
s.match(/ab/g)
// ["ab", "ab"]
```

RegExp æ˜¯æœ‰çŠ¶æ€çš„ lastIndex ä¼šæ›´æ–°

```js
  function indexOfAll(str, target) {
    let res = []
    let reg = new RegExp(target, 'g')
    let d = reg.exec(str)
    while(d && reg.lastIndex <= str.length) {
      console.log(d)
      res.push(d.index)
      d = reg.exec(str)
    }
    console.log(res)
    return res
  }

  matchAll('abcdbc', 'bc') // [1, 4]
```

match å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å› null

## åŸºç¡€

### åˆ›å»ºæ–¹å¼

å­—é¢é‡å’Œæ„é€ å™¨ï¼Œå¦‚æœæ­£åˆ™å†…å®¹æ˜¯åŠ¨æ€æœ‰å˜é‡ï¼Œåªèƒ½ç”¨æ„é€ å™¨

### å…ƒå­—ç¬¦

`.`æ¢è¡Œç¬¦å¤–çš„ä»»æ„å­—ç¬¦ï¼Œå¦‚æœè¦åŒ…æ‹¬æ¢è¡Œç¬¦çš„è¯ï¼Œåœ¨ JS ä¸­ï¼Œ`\s\S`åŒ¹é…ä»»æ„å­—ç¬¦

`\w`å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼Œç›¸å½“äº`[a-zA-Z0-9_]`ï¼Œæ³¨æ„åŒ…æ‹¬æ•°å­—å’Œä¸‹åˆ’çº¿

`\s`ä»»æ„ç©ºç™½å­—ç¬¦ï¼Œç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦

å¤§å†™æ—¶æ±‚åï¼Œå¦‚`\S`è¡¨ç¤ºåŒ¹é…ä»»æ„éç©ºç™½å­—ç¬¦

`()`åˆ†ç»„

`[]`å­—ç¬¦ç»„ï¼Œå¦‚`[a-z]`

`{n}`é‡è¯

`{n, m}`èŒƒå›´

### å®šä½ç¬¦

`\b`å•è¯è¾¹ç•Œ(word boundary) æ”¾åˆ°å¾…åŒ¹é…å­—ç¬¦å‰é¢

`^`(åœ¨å…¶å®ƒè¯­è¨€é‡Œæ˜¯ A) æ–‡æœ¬å¼€å¤´

`$ (\z \Z)`æ–‡æœ¬ç»“æŸï¼ŒåŒºåˆ«æ˜¯`Z`ä¼šåŒ¹é…åˆ°æœ€åçš„æ¢è¡Œç¬¦

### é€‰æ‹©åˆ†æ”¯

| ç®¡é“ï¼Œæˆ–

### è¡¥å……

n è¿›åˆ¶ï¼Œå³é€¢ n è¿›ä¸€ä½ï¼Œå¦‚äºŒè¿›åˆ¶ï¼Œé€¢ 2 å˜ 10ï¼Œé€¢ 4 å˜ 100ã€‚é’Ÿè¡¨æ˜¯åäºŒè¿›åˆ¶åŠ å…­åè¿›åˆ¶ï¼Œå…«å¦æ˜¯ç±»å…«è¿›åˆ¶è¡¨ç¤º

## å¸¸ç”¨åŒ¹é…

å›¾ç‰‡åç¼€

```
const s = 'afafad/a.jpg|233' // è·¯å¾„æœ«å°¾æœ‰å¤šä½™å­—ç¬¦ï¼Œéœ€è¦å»æ‰
s.match(/(.+?).(jpe?g|png|webp)/g)
// return ["afafad/a.jpg"]
```

## å¸¸ç”¨æ­£åˆ™

```js
// å¤šä¸ªå­—ç¬¦ä¸²æˆ–å…³ç³»
var reg = /hello|world/ // æ˜¯å¦å­˜åœ¨ hello æˆ– world
reg.test('hello') // return true
vue è¡¨è¾¾å¼å¯¹æ­£åˆ™æ”¯æŒä¸å¥½ï¼Œæ¯”å¦‚URLåœ°å€è½¬ä¹‰`\/`ä¼šæŠ¥è¡¨è¾¾å¼æ— æ•ˆ

// å°†ç­‰å·å·¦å³è¯æ‰æ¢
let t = '2=1'
var result = t.replace(/(\w+)=(\w+)/, '$2=$1') // åŒ¹é…ä¸æˆåŠŸï¼Œç›¸å½“äºèµ‹å€¼ä¸º t
console.log(result)

// åŒ¹é… HTML æ ‡ç­¾
var re = /<[^<>]*>/

// å°†åŠ ç²—å†…å®¹ä¸­çš„ before æ›¿æ¢ä¸º after
// ä¸€æ¬¡æ›¿æ¢ä¸å®Œ
var t = 'before <b>first before</b> test <b>before before</b> then'
var result = t.replace(/<b>.*?<\/b>/g, function (match) { // é—®å·ä¿®é¥°æ˜Ÿå·ï¼Œæ‡’åŒ¹é…ï¼Œ0 æˆ–æ›´å¤šï¼Œå¦åˆ™ä¼šåŒ¹é…å¾ˆé•¿
	console.log(match)
	return match.replace(/before/g, 'after')
})
console.log(result)

// æ›¿æ¢æ•°å­—ä¸ºå…¶2å€
var t = '123'
var re = /\d+/ // æˆ–è€… /\d/g æ‰§è¡Œå¤šæ¬¡
var result = t.replace(/\d+/, function (match) {
  return match * 2
})
console.log(result)

// æ—¥æœŸï¼Œè¿æ¥ç¬¦å¯ä¸º / . -
// 1. è¿å­—ç¬¦å¤„é¿å…ç‚¹å·æ»¥ç”¨ï¼Œå¦åˆ™ä¼šåŒ¹é… 999999 è¿™æ ·
// 2. æœ€åä¸€æ®µåé¢æ²¡æœ‰çŸ­æ 
// 3. ç›´ç™½çš„å†™æ›´ç®€å•ï¼Ÿæœ‰ä¼˜åŒ–æ„ä¹‰å—ï¼Ÿ
/(\d{2}[/.\-]){2}\d{2}/

```

## æ„é€ æ­£åˆ™æ­¥éª¤

1. åŠ è½½ä¸€äº›åˆæ³•å’Œä¸åˆæ³•çš„æ ·ä¾‹æ•°æ®
2. å†™ä¸€ä¸ªæ­£åˆ™åŒ¹é…æ‰€æœ‰åˆæ³•çš„æ•°æ®
3. é›•ç¢ç»„æˆéƒ¨åˆ†ï¼Œç›´åˆ°ä¸å†åŒ¹é…ä»»ä½•ä¸åˆæ³•çš„æ•°æ®

## æ¡ˆä¾‹ä¸å®æˆ˜

- æ­£åˆ™è¡¨è¾¾å¼`/^d+[^d]+/`èƒ½åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Ÿ
  - A 123
  - B 123a
  - C d123
  - D 123def

è¿™é“é¢˜ç†è§£é”™è¯¯åœ¨ä¸€ä¸‹å‡ ç‚¹ï¼š

1. æ­£åˆ™è¡¨è¾¾å¼çš„å¼€å¤´çš„ d+ ä¸æ˜¯è¡¨ç¤ºæ•°å­—ï¼Œè¡¨ç¤ºæ•°å­—æ˜¯ \dï¼Œæ­¤å¤„è¦åŒ¹é…çš„å°±æ˜¯è‹±æ–‡å­—æ¯ d
2. ä¸­æ‹¬å·çš„æ„æ€æ˜¯åŒ¹é…å…¶ä¸­æŸä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚ [123]è¦åŒ¹é… 1 æˆ– 2 æˆ– 3
3. ä¸­å£å·ä¸­çš„ ^ä¸æ˜¯åŒ¹é…å•è¯å¼€å§‹ï¼Œè€Œæ˜¯å–åçš„æ„æ€ï¼Œå³è¦åŒ¹é…çš„å­—ç¬¦ä¸èƒ½ä½¿ä¸­æ‹¬å·ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œæ¯”å¦‚ [^123]è¦åŒ¹é…çš„å­—ç¬¦æ˜¯ 1ã€2ã€3 ä¹‹å¤–çš„ä»»æ„å­—ç¬¦å³å¯
4. æ‰€ä»¥é¢˜ç›®ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼è¦åŒ¹é…çš„æ˜¯ä»¥è‹±æ–‡å­—æ¯ d å¼€å¤´çš„å­—ç¬¦ï¼Œå­—æ¯ d æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œç„¶åä¸æ˜¯è‹±æ–‡å­—æ¯
   d çš„å­—ç¬¦ä¸€ä¸ªæˆ–å¤šä¸ªï¼ˆè‡³å°‘æœ‰ä¸€ä¸ªï¼‰

### å¦‚ä½•åŒ¹é…ç”µå­é‚®ä»¶

- ä¸¤è¾¹éç©ºç™½å­—ç¬¦ 1 åˆ° N ä¸ªï¼Œä¸­é—´ @
- å…ˆå†™å…¨æ³•çš„æ„é€ ï¼Œç„¶åé’ˆå¯¹ä¸åˆæ³•æƒ…å†µï¼Œå†™ç»†èŠ‚

### æ‰‹æœºå·

[JS æ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰ - æ˜é‡‘](https://juejin.im/post/5965943ff265da6c30653879)

### æ±‰å­—

åŒ¹é…

```js
new RegExp('[\\u4E00-\\u9FFF]+', 'g')
;/.*[\u4e00-\u9fa5]+.*$/.test('abæˆ‘')
```

[RegExr: Learn, Build, & Test RegEx](https://regexr.com/)

[ç¤¾åŒºè§„åˆ™é›† RegexHQ](https://github.com/regexhq)

[JS æ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰ - æ˜é‡‘](https://juejin.im/post/5965943ff265da6c30653879)

[Regulexï¼šJavaScript Regular Expression Visualizer](https://jex.im/regulex)

è¾¹ç•Œæ¨¡å¼
å†…å®¹æ¨¡å¼

- æ‹¬å·åŒ¹é…

```js
;/\((.*?)\)/g
// (a, bc) bdbdb (1, 2)
```

è´ªå©ªæ¨¡å¼ å­—ç¬¦ä¸²å›æº¯
æ‡’æƒ°æ¨¡å¼? æ­£åˆ™å›æº¯
ç‹¬å æ¨¡å¼+ï¼Œä¸å›æº¯

è¿‡æ»¤ Emojiï¼š

```
name = name.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g, "");
```

éªŒè¯æ’ä»¶åªæ”¯æŒæ­£å‘ pattern

```
const validStrPattern = /^[\u4e00-\u9fa5_a-zA-Z0-9- ]+$/
```

[å½“æˆ‘é—®è¡¨å•æ ¡éªŒçš„é¢è¯•é¢˜æ—¶ï¼Œæˆ‘æœŸæœ›å¾—åˆ°ä»€ä¹ˆæ ·çš„ç­”æ¡ˆ-å›¾çµç¤¾åŒº](https://www.ituring.com.cn/article/500582)

- URL è·å–æ–‡ä»¶æ‰©å±•

```js
function getUrlExtension(url) {
  return url
    .split(/[#?]/)[0]
    .split('.')
    .pop()
    .trim()
    .toLowerCase()
}
```

[How to pull url file extension out of url string using javascript - Stack Overflow](https://stackoverflow.com/a/47767860/5657916)

string trim

```js
let s = ' x y '
s.replace(/^\s*|\s*$/g, '')
```
[å°±å› ä¸ºè¿™ä¸‰ä¸ªçŸ¥è¯†ç‚¹ï¼Œæˆ‘å½»åº•å­¦åºŸäº†â€œæ­£åˆ™è¡¨è¾¾å¼â€](https://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&mid=2651593792&idx=1&sn=3e7135683cad3910ac6381fe8e72729f&chksm=8022cb81b75542976b677380f91ac8562ac16ebefcefb82cda9c0474670cd5e534b574bc1c42#rd)
